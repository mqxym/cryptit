#!/usr/bin/env node
var l6=Object.create;var{getPrototypeOf:i6,defineProperty:Pj,getOwnPropertyNames:n6}=Object;var m6=Object.prototype.hasOwnProperty;var FA=(A,j,q)=>{q=A!=null?l6(i6(A)):{};let E=j||!A||!A.__esModule?Pj(q,"default",{value:A,enumerable:!0}):q;for(let _ of n6(A))if(!m6.call(E,_))Pj(E,_,{get:()=>A[_],enumerable:!0});return E};var Q=(A,j)=>()=>(j||A((j={exports:{}}).exports,j),j.exports);var p=Q((CA)=>{class OA extends Error{constructor(A,j,q){super(q);Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=j,this.exitCode=A,this.nestedError=void 0}}class Kj extends OA{constructor(A){super(1,"commander.invalidArgument",A);Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}}CA.CommanderError=OA;CA.InvalidArgumentError=Kj});var PA=Q((xA)=>{var{InvalidArgumentError:r6}=p();class Tj{constructor(A,j){switch(this.description=j||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,A[0]){case"<":this.required=!0,this._name=A.slice(1,-1);break;case"[":this.required=!1,this._name=A.slice(1,-1);break;default:this.required=!0,this._name=A;break}if(this._name.length>3&&this._name.slice(-3)==="...")this.variadic=!0,this._name=this._name.slice(0,-3)}name(){return this._name}_concatValue(A,j){if(j===this.defaultValue||!Array.isArray(j))return[A];return j.concat(A)}default(A,j){return this.defaultValue=A,this.defaultValueDescription=j,this}argParser(A){return this.parseArg=A,this}choices(A){return this.argChoices=A.slice(),this.parseArg=(j,q)=>{if(!this.argChoices.includes(j))throw new r6(`Allowed choices are ${this.argChoices.join(", ")}.`);if(this.variadic)return this._concatValue(j,q);return j},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}}function t6(A){let j=A.name()+(A.variadic===!0?"...":"");return A.required?"<"+j+">":"["+j+"]"}xA.Argument=Tj;xA.humanReadableArgName=t6});var bA=Q((Jj)=>{var{humanReadableArgName:d6}=PA();class Xj{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(A){let j=A.commands.filter((q)=>!q._hidden);if(A._hasImplicitHelpCommand()){let[,q,E]=A._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/),_=A.createCommand(q).helpOption(!1);if(_.description(A._helpCommandDescription),E)_.arguments(E);j.push(_)}if(this.sortSubcommands)j.sort((q,E)=>{return q.name().localeCompare(E.name())});return j}compareOptions(A,j){let q=(E)=>{return E.short?E.short.replace(/^-/,""):E.long.replace(/^--/,"")};return q(A).localeCompare(q(j))}visibleOptions(A){let j=A.options.filter((_)=>!_.hidden),q=A._hasHelpOption&&A._helpShortFlag&&!A._findOption(A._helpShortFlag),E=A._hasHelpOption&&!A._findOption(A._helpLongFlag);if(q||E){let _;if(!q)_=A.createOption(A._helpLongFlag,A._helpDescription);else if(!E)_=A.createOption(A._helpShortFlag,A._helpDescription);else _=A.createOption(A._helpFlags,A._helpDescription);j.push(_)}if(this.sortOptions)j.sort(this.compareOptions);return j}visibleGlobalOptions(A){if(!this.showGlobalOptions)return[];let j=[];for(let q=A.parent;q;q=q.parent){let E=q.options.filter((_)=>!_.hidden);j.push(...E)}if(this.sortOptions)j.sort(this.compareOptions);return j}visibleArguments(A){if(A._argsDescription)A.registeredArguments.forEach((j)=>{j.description=j.description||A._argsDescription[j.name()]||""});if(A.registeredArguments.find((j)=>j.description))return A.registeredArguments;return[]}subcommandTerm(A){let j=A.registeredArguments.map((q)=>d6(q)).join(" ");return A._name+(A._aliases[0]?"|"+A._aliases[0]:"")+(A.options.length?" [options]":"")+(j?" "+j:"")}optionTerm(A){return A.flags}argumentTerm(A){return A.name()}longestSubcommandTermLength(A,j){return j.visibleCommands(A).reduce((q,E)=>{return Math.max(q,j.subcommandTerm(E).length)},0)}longestOptionTermLength(A,j){return j.visibleOptions(A).reduce((q,E)=>{return Math.max(q,j.optionTerm(E).length)},0)}longestGlobalOptionTermLength(A,j){return j.visibleGlobalOptions(A).reduce((q,E)=>{return Math.max(q,j.optionTerm(E).length)},0)}longestArgumentTermLength(A,j){return j.visibleArguments(A).reduce((q,E)=>{return Math.max(q,j.argumentTerm(E).length)},0)}commandUsage(A){let j=A._name;if(A._aliases[0])j=j+"|"+A._aliases[0];let q="";for(let E=A.parent;E;E=E.parent)q=E.name()+" "+q;return q+j+" "+A.usage()}commandDescription(A){return A.description()}subcommandDescription(A){return A.summary()||A.description()}optionDescription(A){let j=[];if(A.argChoices)j.push(`choices: ${A.argChoices.map((q)=>JSON.stringify(q)).join(", ")}`);if(A.defaultValue!==void 0){if(A.required||A.optional||A.isBoolean()&&typeof A.defaultValue==="boolean")j.push(`default: ${A.defaultValueDescription||JSON.stringify(A.defaultValue)}`)}if(A.presetArg!==void 0&&A.optional)j.push(`preset: ${JSON.stringify(A.presetArg)}`);if(A.envVar!==void 0)j.push(`env: ${A.envVar}`);if(j.length>0)return`${A.description} (${j.join(", ")})`;return A.description}argumentDescription(A){let j=[];if(A.argChoices)j.push(`choices: ${A.argChoices.map((q)=>JSON.stringify(q)).join(", ")}`);if(A.defaultValue!==void 0)j.push(`default: ${A.defaultValueDescription||JSON.stringify(A.defaultValue)}`);if(j.length>0){let q=`(${j.join(", ")})`;if(A.description)return`${A.description} ${q}`;return q}return A.description}formatHelp(A,j){let q=j.padWidth(A,j),E=j.helpWidth||80,_=2,$=2;function I(K,L){if(L){let H=`${K.padEnd(q+2)}${L}`;return j.wrap(H,E-2,q+2)}return K}function k(K){return K.join(`
`).replace(/^/gm," ".repeat(2))}let G=[`Usage: ${j.commandUsage(A)}`,""],U=j.commandDescription(A);if(U.length>0)G=G.concat([j.wrap(U,E,0),""]);let R=j.visibleArguments(A).map((K)=>{return I(j.argumentTerm(K),j.argumentDescription(K))});if(R.length>0)G=G.concat(["Arguments:",k(R),""]);let P=j.visibleOptions(A).map((K)=>{return I(j.optionTerm(K),j.optionDescription(K))});if(P.length>0)G=G.concat(["Options:",k(P),""]);if(this.showGlobalOptions){let K=j.visibleGlobalOptions(A).map((L)=>{return I(j.optionTerm(L),j.optionDescription(L))});if(K.length>0)G=G.concat(["Global Options:",k(K),""])}let T=j.visibleCommands(A).map((K)=>{return I(j.subcommandTerm(K),j.subcommandDescription(K))});if(T.length>0)G=G.concat(["Commands:",k(T),""]);return G.join(`
`)}padWidth(A,j){return Math.max(j.longestOptionTermLength(A,j),j.longestGlobalOptionTermLength(A,j),j.longestSubcommandTermLength(A,j),j.longestArgumentTermLength(A,j))}wrap(A,j,q,E=40){let $=new RegExp(`[\\n][${" \\f\\t\\v   -   　\uFEFF"}]+`);if(A.match($))return A;let I=j-q;if(I<E)return A;let k=A.slice(0,q),G=A.slice(q).replace(`\r
`,`
`),U=" ".repeat(q),P=`\\s${"​"}`,T=new RegExp(`
|.{1,${I-1}}([${P}]|$)|[^${P}]+?([${P}]|$)`,"g"),K=G.match(T)||[];return k+K.map((L,H)=>{if(L===`
`)return"";return(H>0?U:"")+L.trimEnd()}).join(`
`)}}Jj.Help=Xj});var hA=Q((KA)=>{var{InvalidArgumentError:p6}=p();class Yj{constructor(A,j){this.flags=A,this.description=j||"",this.required=A.includes("<"),this.optional=A.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(A),this.mandatory=!1;let q=zj(A);if(this.short=q.shortFlag,this.long=q.longFlag,this.negate=!1,this.long)this.negate=this.long.startsWith("--no-");this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(A,j){return this.defaultValue=A,this.defaultValueDescription=j,this}preset(A){return this.presetArg=A,this}conflicts(A){return this.conflictsWith=this.conflictsWith.concat(A),this}implies(A){let j=A;if(typeof A==="string")j={[A]:!0};return this.implied=Object.assign(this.implied||{},j),this}env(A){return this.envVar=A,this}argParser(A){return this.parseArg=A,this}makeOptionMandatory(A=!0){return this.mandatory=!!A,this}hideHelp(A=!0){return this.hidden=!!A,this}_concatValue(A,j){if(j===this.defaultValue||!Array.isArray(j))return[A];return j.concat(A)}choices(A){return this.argChoices=A.slice(),this.parseArg=(j,q)=>{if(!this.argChoices.includes(j))throw new p6(`Allowed choices are ${this.argChoices.join(", ")}.`);if(this.variadic)return this._concatValue(j,q);return j},this}name(){if(this.long)return this.long.replace(/^--/,"");return this.short.replace(/^-/,"")}attributeName(){return s6(this.name().replace(/^no-/,""))}is(A){return this.short===A||this.long===A}isBoolean(){return!this.required&&!this.optional&&!this.negate}}class Qj{constructor(A){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,A.forEach((j)=>{if(j.negate)this.negativeOptions.set(j.attributeName(),j);else this.positiveOptions.set(j.attributeName(),j)}),this.negativeOptions.forEach((j,q)=>{if(this.positiveOptions.has(q))this.dualOptions.add(q)})}valueFromOption(A,j){let q=j.attributeName();if(!this.dualOptions.has(q))return!0;let E=this.negativeOptions.get(q).presetArg,_=E!==void 0?E:!1;return j.negate===(_===A)}}function s6(A){return A.split("-").reduce((j,q)=>{return j+q[0].toUpperCase()+q.slice(1)})}function zj(A){let j,q,E=A.split(/[ |,]+/);if(E.length>1&&!/^[[<]/.test(E[1]))j=E.shift();if(q=E.shift(),!j&&/^-[^-]$/.test(q))j=q,q=void 0;return{shortFlag:j,longFlag:q}}KA.Option=Yj;KA.splitOptionFlags=zj;KA.DualOptions=Qj});var Wj=Q((Zj)=>{function o6(A,j){if(Math.abs(A.length-j.length)>3)return Math.max(A.length,j.length);let q=[];for(let E=0;E<=A.length;E++)q[E]=[E];for(let E=0;E<=j.length;E++)q[0][E]=E;for(let E=1;E<=j.length;E++)for(let _=1;_<=A.length;_++){let $=1;if(A[_-1]===j[E-1])$=0;else $=1;if(q[_][E]=Math.min(q[_-1][E]+1,q[_][E-1]+1,q[_-1][E-1]+$),_>1&&E>1&&A[_-1]===j[E-2]&&A[_-2]===j[E-1])q[_][E]=Math.min(q[_][E],q[_-2][E-2]+1)}return q[A.length][j.length]}function a6(A,j){if(!j||j.length===0)return"";j=Array.from(new Set(j));let q=A.startsWith("--");if(q)A=A.slice(2),j=j.map((I)=>I.slice(2));let E=[],_=3,$=0.4;if(j.forEach((I)=>{if(I.length<=1)return;let k=o6(A,I),G=Math.max(A.length,I.length);if((G-k)/G>$){if(k<_)_=k,E=[I];else if(k===_)E.push(I)}}),E.sort((I,k)=>I.localeCompare(k)),q)E=E.map((I)=>`--${I}`);if(E.length>1)return`
(Did you mean one of ${E.join(", ")}?)`;if(E.length===1)return`
(Did you mean ${E[0]}?)`;return""}Zj.suggestSimilar=a6});var Vj=Q((Mj)=>{var e6=require("events").EventEmitter,uA=require("child_process"),M=require("path"),gA=require("fs"),J=require("process"),{Argument:Aq,humanReadableArgName:jq}=PA(),{CommanderError:cA}=p(),{Help:qq}=bA(),{Option:Sj,splitOptionFlags:Eq,DualOptions:_q}=hA(),{suggestSimilar:fj}=Wj();class lA extends e6{constructor(A){super();this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=A||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:(j)=>J.stdout.write(j),writeErr:(j)=>J.stderr.write(j),getOutHelpWidth:()=>J.stdout.isTTY?J.stdout.columns:void 0,getErrHelpWidth:()=>J.stderr.isTTY?J.stderr.columns:void 0,outputError:(j,q)=>q(j)},this._hidden=!1,this._hasHelpOption=!0,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._addImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command",this._helpConfiguration={}}copyInheritedSettings(A){return this._outputConfiguration=A._outputConfiguration,this._hasHelpOption=A._hasHelpOption,this._helpFlags=A._helpFlags,this._helpDescription=A._helpDescription,this._helpShortFlag=A._helpShortFlag,this._helpLongFlag=A._helpLongFlag,this._helpCommandName=A._helpCommandName,this._helpCommandnameAndArgs=A._helpCommandnameAndArgs,this._helpCommandDescription=A._helpCommandDescription,this._helpConfiguration=A._helpConfiguration,this._exitCallback=A._exitCallback,this._storeOptionsAsProperties=A._storeOptionsAsProperties,this._combineFlagAndOptionalValue=A._combineFlagAndOptionalValue,this._allowExcessArguments=A._allowExcessArguments,this._enablePositionalOptions=A._enablePositionalOptions,this._showHelpAfterError=A._showHelpAfterError,this._showSuggestionAfterError=A._showSuggestionAfterError,this}_getCommandAndAncestors(){let A=[];for(let j=this;j;j=j.parent)A.push(j);return A}command(A,j,q){let E=j,_=q;if(typeof E==="object"&&E!==null)_=E,E=null;_=_||{};let[,$,I]=A.match(/([^ ]+) *(.*)/),k=this.createCommand($);if(E)k.description(E),k._executableHandler=!0;if(_.isDefault)this._defaultCommandName=k._name;if(k._hidden=!!(_.noHelp||_.hidden),k._executableFile=_.executableFile||null,I)k.arguments(I);if(this.commands.push(k),k.parent=this,k.copyInheritedSettings(this),E)return this;return k}createCommand(A){return new lA(A)}createHelp(){return Object.assign(new qq,this.configureHelp())}configureHelp(A){if(A===void 0)return this._helpConfiguration;return this._helpConfiguration=A,this}configureOutput(A){if(A===void 0)return this._outputConfiguration;return Object.assign(this._outputConfiguration,A),this}showHelpAfterError(A=!0){if(typeof A!=="string")A=!!A;return this._showHelpAfterError=A,this}showSuggestionAfterError(A=!0){return this._showSuggestionAfterError=!!A,this}addCommand(A,j){if(!A._name)throw new Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);if(j=j||{},j.isDefault)this._defaultCommandName=A._name;if(j.noHelp||j.hidden)A._hidden=!0;return this.commands.push(A),A.parent=this,this}createArgument(A,j){return new Aq(A,j)}argument(A,j,q,E){let _=this.createArgument(A,j);if(typeof q==="function")_.default(E).argParser(q);else _.default(q);return this.addArgument(_),this}arguments(A){return A.trim().split(/ +/).forEach((j)=>{this.argument(j)}),this}addArgument(A){let j=this.registeredArguments.slice(-1)[0];if(j&&j.variadic)throw new Error(`only the last argument can be variadic '${j.name()}'`);if(A.required&&A.defaultValue!==void 0&&A.parseArg===void 0)throw new Error(`a default value for a required argument is never used: '${A.name()}'`);return this.registeredArguments.push(A),this}addHelpCommand(A,j){if(A===!1)this._addImplicitHelpCommand=!1;else{if(this._addImplicitHelpCommand=!0,typeof A==="string")this._helpCommandName=A.split(" ")[0],this._helpCommandnameAndArgs=A;this._helpCommandDescription=j||this._helpCommandDescription}return this}_hasImplicitHelpCommand(){if(this._addImplicitHelpCommand===void 0)return this.commands.length&&!this._actionHandler&&!this._findCommand("help");return this._addImplicitHelpCommand}hook(A,j){let q=["preSubcommand","preAction","postAction"];if(!q.includes(A))throw new Error(`Unexpected value for event passed to hook : '${A}'.
Expecting one of '${q.join("', '")}'`);if(this._lifeCycleHooks[A])this._lifeCycleHooks[A].push(j);else this._lifeCycleHooks[A]=[j];return this}exitOverride(A){if(A)this._exitCallback=A;else this._exitCallback=(j)=>{if(j.code!=="commander.executeSubCommandAsync")throw j};return this}_exit(A,j,q){if(this._exitCallback)this._exitCallback(new cA(A,j,q));J.exit(A)}action(A){let j=(q)=>{let E=this.registeredArguments.length,_=q.slice(0,E);if(this._storeOptionsAsProperties)_[E]=this;else _[E]=this.opts();return _.push(this),A.apply(this,_)};return this._actionHandler=j,this}createOption(A,j){return new Sj(A,j)}_callParseArg(A,j,q,E){try{return A.parseArg(j,q)}catch(_){if(_.code==="commander.invalidArgument"){let $=`${E} ${_.message}`;this.error($,{exitCode:_.exitCode,code:_.code})}throw _}}addOption(A){let j=A.name(),q=A.attributeName();if(A.negate){let _=A.long.replace(/^--no-/,"--");if(!this._findOption(_))this.setOptionValueWithSource(q,A.defaultValue===void 0?!0:A.defaultValue,"default")}else if(A.defaultValue!==void 0)this.setOptionValueWithSource(q,A.defaultValue,"default");this.options.push(A);let E=(_,$,I)=>{if(_==null&&A.presetArg!==void 0)_=A.presetArg;let k=this.getOptionValue(q);if(_!==null&&A.parseArg)_=this._callParseArg(A,_,k,$);else if(_!==null&&A.variadic)_=A._concatValue(_,k);if(_==null)if(A.negate)_=!1;else if(A.isBoolean()||A.optional)_=!0;else _="";this.setOptionValueWithSource(q,_,I)};if(this.on("option:"+j,(_)=>{let $=`error: option '${A.flags}' argument '${_}' is invalid.`;E(_,$,"cli")}),A.envVar)this.on("optionEnv:"+j,(_)=>{let $=`error: option '${A.flags}' value '${_}' from env '${A.envVar}' is invalid.`;E(_,$,"env")});return this}_optionEx(A,j,q,E,_){if(typeof j==="object"&&j instanceof Sj)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");let $=this.createOption(j,q);if($.makeOptionMandatory(!!A.mandatory),typeof E==="function")$.default(_).argParser(E);else if(E instanceof RegExp){let I=E;E=(k,G)=>{let U=I.exec(k);return U?U[0]:G},$.default(_).argParser(E)}else $.default(E);return this.addOption($)}option(A,j,q,E){return this._optionEx({},A,j,q,E)}requiredOption(A,j,q,E){return this._optionEx({mandatory:!0},A,j,q,E)}combineFlagAndOptionalValue(A=!0){return this._combineFlagAndOptionalValue=!!A,this}allowUnknownOption(A=!0){return this._allowUnknownOption=!!A,this}allowExcessArguments(A=!0){return this._allowExcessArguments=!!A,this}enablePositionalOptions(A=!0){return this._enablePositionalOptions=!!A,this}passThroughOptions(A=!0){if(this._passThroughOptions=!!A,!!this.parent&&A&&!this.parent._enablePositionalOptions)throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)");return this}storeOptionsAsProperties(A=!0){if(this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this._storeOptionsAsProperties=!!A,this}getOptionValue(A){if(this._storeOptionsAsProperties)return this[A];return this._optionValues[A]}setOptionValue(A,j){return this.setOptionValueWithSource(A,j,void 0)}setOptionValueWithSource(A,j,q){if(this._storeOptionsAsProperties)this[A]=j;else this._optionValues[A]=j;return this._optionValueSources[A]=q,this}getOptionValueSource(A){return this._optionValueSources[A]}getOptionValueSourceWithGlobals(A){let j;return this._getCommandAndAncestors().forEach((q)=>{if(q.getOptionValueSource(A)!==void 0)j=q.getOptionValueSource(A)}),j}_prepareUserArgs(A,j){if(A!==void 0&&!Array.isArray(A))throw new Error("first parameter to parse must be array or undefined");if(j=j||{},A===void 0){if(A=J.argv,J.versions&&J.versions.electron)j.from="electron"}this.rawArgs=A.slice();let q;switch(j.from){case void 0:case"node":this._scriptPath=A[1],q=A.slice(2);break;case"electron":if(J.defaultApp)this._scriptPath=A[1],q=A.slice(2);else q=A.slice(1);break;case"user":q=A.slice(0);break;default:throw new Error(`unexpected parse option { from: '${j.from}' }`)}if(!this._name&&this._scriptPath)this.nameFromFilename(this._scriptPath);return this._name=this._name||"program",q}parse(A,j){let q=this._prepareUserArgs(A,j);return this._parseCommand([],q),this}async parseAsync(A,j){let q=this._prepareUserArgs(A,j);return await this._parseCommand([],q),this}_executeSubCommand(A,j){j=j.slice();let q=!1,E=[".js",".ts",".tsx",".mjs",".cjs"];function _(U,R){let P=M.resolve(U,R);if(gA.existsSync(P))return P;if(E.includes(M.extname(R)))return;let T=E.find((K)=>gA.existsSync(`${P}${K}`));if(T)return`${P}${T}`;return}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let $=A._executableFile||`${this._name}-${A._name}`,I=this._executableDir||"";if(this._scriptPath){let U;try{U=gA.realpathSync(this._scriptPath)}catch(R){U=this._scriptPath}I=M.resolve(M.dirname(U),I)}if(I){let U=_(I,$);if(!U&&!A._executableFile&&this._scriptPath){let R=M.basename(this._scriptPath,M.extname(this._scriptPath));if(R!==this._name)U=_(I,`${R}-${A._name}`)}$=U||$}q=E.includes(M.extname($));let k;if(J.platform!=="win32")if(q)j.unshift($),j=Dj(J.execArgv).concat(j),k=uA.spawn(J.argv[0],j,{stdio:"inherit"});else k=uA.spawn($,j,{stdio:"inherit"});else j.unshift($),j=Dj(J.execArgv).concat(j),k=uA.spawn(J.execPath,j,{stdio:"inherit"});if(!k.killed)["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach((R)=>{J.on(R,()=>{if(k.killed===!1&&k.exitCode===null)k.kill(R)})});let G=this._exitCallback;if(!G)k.on("close",J.exit.bind(J));else k.on("close",()=>{G(new cA(J.exitCode||0,"commander.executeSubCommandAsync","(close)"))});k.on("error",(U)=>{if(U.code==="ENOENT"){let R=I?`searched for local subcommand relative to directory '${I}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",P=`'${$}' does not exist
 - if '${A._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${R}`;throw new Error(P)}else if(U.code==="EACCES")throw new Error(`'${$}' not executable`);if(!G)J.exit(1);else{let R=new cA(1,"commander.executeSubCommandAsync","(error)");R.nestedError=U,G(R)}}),this.runningCommand=k}_dispatchSubcommand(A,j,q){let E=this._findCommand(A);if(!E)this.help({error:!0});let _;return _=this._chainOrCallSubCommandHook(_,E,"preSubcommand"),_=this._chainOrCall(_,()=>{if(E._executableHandler)this._executeSubCommand(E,j.concat(q));else return E._parseCommand(j,q)}),_}_dispatchHelpCommand(A){if(!A)this.help();let j=this._findCommand(A);if(j&&!j._executableHandler)j.help();return this._dispatchSubcommand(A,[],[this._helpLongFlag||this._helpShortFlag])}_checkNumberOfArguments(){if(this.registeredArguments.forEach((A,j)=>{if(A.required&&this.args[j]==null)this.missingArgument(A.name())}),this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic)return;if(this.args.length>this.registeredArguments.length)this._excessArguments(this.args)}_processArguments(){let A=(q,E,_)=>{let $=E;if(E!==null&&q.parseArg){let I=`error: command-argument value '${E}' is invalid for argument '${q.name()}'.`;$=this._callParseArg(q,E,_,I)}return $};this._checkNumberOfArguments();let j=[];this.registeredArguments.forEach((q,E)=>{let _=q.defaultValue;if(q.variadic){if(E<this.args.length){if(_=this.args.slice(E),q.parseArg)_=_.reduce(($,I)=>{return A(q,I,$)},q.defaultValue)}else if(_===void 0)_=[]}else if(E<this.args.length){if(_=this.args[E],q.parseArg)_=A(q,_,q.defaultValue)}j[E]=_}),this.processedArgs=j}_chainOrCall(A,j){if(A&&A.then&&typeof A.then==="function")return A.then(()=>j());return j()}_chainOrCallHooks(A,j){let q=A,E=[];if(this._getCommandAndAncestors().reverse().filter((_)=>_._lifeCycleHooks[j]!==void 0).forEach((_)=>{_._lifeCycleHooks[j].forEach(($)=>{E.push({hookedCommand:_,callback:$})})}),j==="postAction")E.reverse();return E.forEach((_)=>{q=this._chainOrCall(q,()=>{return _.callback(_.hookedCommand,this)})}),q}_chainOrCallSubCommandHook(A,j,q){let E=A;if(this._lifeCycleHooks[q]!==void 0)this._lifeCycleHooks[q].forEach((_)=>{E=this._chainOrCall(E,()=>{return _(this,j)})});return E}_parseCommand(A,j){let q=this.parseOptions(j);if(this._parseOptionsEnv(),this._parseOptionsImplied(),A=A.concat(q.operands),j=q.unknown,this.args=A.concat(j),A&&this._findCommand(A[0]))return this._dispatchSubcommand(A[0],A.slice(1),j);if(this._hasImplicitHelpCommand()&&A[0]===this._helpCommandName)return this._dispatchHelpCommand(A[1]);if(this._defaultCommandName)return Nj(this,j),this._dispatchSubcommand(this._defaultCommandName,A,j);if(this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName)this.help({error:!0});Nj(this,q.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let E=()=>{if(q.unknown.length>0)this.unknownOption(q.unknown[0])},_=`command:${this.name()}`;if(this._actionHandler){E(),this._processArguments();let $;if($=this._chainOrCallHooks($,"preAction"),$=this._chainOrCall($,()=>this._actionHandler(this.processedArgs)),this.parent)$=this._chainOrCall($,()=>{this.parent.emit(_,A,j)});return $=this._chainOrCallHooks($,"postAction"),$}if(this.parent&&this.parent.listenerCount(_))E(),this._processArguments(),this.parent.emit(_,A,j);else if(A.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",A,j);if(this.listenerCount("command:*"))this.emit("command:*",A,j);else if(this.commands.length)this.unknownCommand();else E(),this._processArguments()}else if(this.commands.length)E(),this.help({error:!0});else E(),this._processArguments()}_findCommand(A){if(!A)return;return this.commands.find((j)=>j._name===A||j._aliases.includes(A))}_findOption(A){return this.options.find((j)=>j.is(A))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach((A)=>{A.options.forEach((j)=>{if(j.mandatory&&A.getOptionValue(j.attributeName())===void 0)A.missingMandatoryOptionValue(j)})})}_checkForConflictingLocalOptions(){let A=this.options.filter((q)=>{let E=q.attributeName();if(this.getOptionValue(E)===void 0)return!1;return this.getOptionValueSource(E)!=="default"});A.filter((q)=>q.conflictsWith.length>0).forEach((q)=>{let E=A.find((_)=>q.conflictsWith.includes(_.attributeName()));if(E)this._conflictingOption(q,E)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach((A)=>{A._checkForConflictingLocalOptions()})}parseOptions(A){let j=[],q=[],E=j,_=A.slice();function $(k){return k.length>1&&k[0]==="-"}let I=null;while(_.length){let k=_.shift();if(k==="--"){if(E===q)E.push(k);E.push(..._);break}if(I&&!$(k)){this.emit(`option:${I.name()}`,k);continue}if(I=null,$(k)){let G=this._findOption(k);if(G){if(G.required){let U=_.shift();if(U===void 0)this.optionMissingArgument(G);this.emit(`option:${G.name()}`,U)}else if(G.optional){let U=null;if(_.length>0&&!$(_[0]))U=_.shift();this.emit(`option:${G.name()}`,U)}else this.emit(`option:${G.name()}`);I=G.variadic?G:null;continue}}if(k.length>2&&k[0]==="-"&&k[1]!=="-"){let G=this._findOption(`-${k[1]}`);if(G){if(G.required||G.optional&&this._combineFlagAndOptionalValue)this.emit(`option:${G.name()}`,k.slice(2));else this.emit(`option:${G.name()}`),_.unshift(`-${k.slice(2)}`);continue}}if(/^--[^=]+=/.test(k)){let G=k.indexOf("="),U=this._findOption(k.slice(0,G));if(U&&(U.required||U.optional)){this.emit(`option:${U.name()}`,k.slice(G+1));continue}}if($(k))E=q;if((this._enablePositionalOptions||this._passThroughOptions)&&j.length===0&&q.length===0){if(this._findCommand(k)){if(j.push(k),_.length>0)q.push(..._);break}else if(k===this._helpCommandName&&this._hasImplicitHelpCommand()){if(j.push(k),_.length>0)j.push(..._);break}else if(this._defaultCommandName){if(q.push(k),_.length>0)q.push(..._);break}}if(this._passThroughOptions){if(E.push(k),_.length>0)E.push(..._);break}E.push(k)}return{operands:j,unknown:q}}opts(){if(this._storeOptionsAsProperties){let A={},j=this.options.length;for(let q=0;q<j;q++){let E=this.options[q].attributeName();A[E]=E===this._versionOptionName?this._version:this[E]}return A}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((A,j)=>Object.assign(A,j.opts()),{})}error(A,j){if(this._outputConfiguration.outputError(`${A}
`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError==="string")this._outputConfiguration.writeErr(`${this._showHelpAfterError}
`);else if(this._showHelpAfterError)this._outputConfiguration.writeErr(`
`),this.outputHelp({error:!0});let q=j||{},E=q.exitCode||1,_=q.code||"commander.error";this._exit(E,_,A)}_parseOptionsEnv(){this.options.forEach((A)=>{if(A.envVar&&A.envVar in J.env){let j=A.attributeName();if(this.getOptionValue(j)===void 0||["default","config","env"].includes(this.getOptionValueSource(j)))if(A.required||A.optional)this.emit(`optionEnv:${A.name()}`,J.env[A.envVar]);else this.emit(`optionEnv:${A.name()}`)}})}_parseOptionsImplied(){let A=new _q(this.options),j=(q)=>{return this.getOptionValue(q)!==void 0&&!["default","implied"].includes(this.getOptionValueSource(q))};this.options.filter((q)=>q.implied!==void 0&&j(q.attributeName())&&A.valueFromOption(this.getOptionValue(q.attributeName()),q)).forEach((q)=>{Object.keys(q.implied).filter((E)=>!j(E)).forEach((E)=>{this.setOptionValueWithSource(E,q.implied[E],"implied")})})}missingArgument(A){let j=`error: missing required argument '${A}'`;this.error(j,{code:"commander.missingArgument"})}optionMissingArgument(A){let j=`error: option '${A.flags}' argument missing`;this.error(j,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(A){let j=`error: required option '${A.flags}' not specified`;this.error(j,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(A,j){let q=($)=>{let I=$.attributeName(),k=this.getOptionValue(I),G=this.options.find((R)=>R.negate&&I===R.attributeName()),U=this.options.find((R)=>!R.negate&&I===R.attributeName());if(G&&(G.presetArg===void 0&&k===!1||G.presetArg!==void 0&&k===G.presetArg))return G;return U||$},E=($)=>{let I=q($),k=I.attributeName();if(this.getOptionValueSource(k)==="env")return`environment variable '${I.envVar}'`;return`option '${I.flags}'`},_=`error: ${E(A)} cannot be used with ${E(j)}`;this.error(_,{code:"commander.conflictingOption"})}unknownOption(A){if(this._allowUnknownOption)return;let j="";if(A.startsWith("--")&&this._showSuggestionAfterError){let E=[],_=this;do{let $=_.createHelp().visibleOptions(_).filter((I)=>I.long).map((I)=>I.long);E=E.concat($),_=_.parent}while(_&&!_._enablePositionalOptions);j=fj(A,E)}let q=`error: unknown option '${A}'${j}`;this.error(q,{code:"commander.unknownOption"})}_excessArguments(A){if(this._allowExcessArguments)return;let j=this.registeredArguments.length,q=j===1?"":"s",_=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${j} argument${q} but got ${A.length}.`;this.error(_,{code:"commander.excessArguments"})}unknownCommand(){let A=this.args[0],j="";if(this._showSuggestionAfterError){let E=[];this.createHelp().visibleCommands(this).forEach((_)=>{if(E.push(_.name()),_.alias())E.push(_.alias())}),j=fj(A,E)}let q=`error: unknown command '${A}'${j}`;this.error(q,{code:"commander.unknownCommand"})}version(A,j,q){if(A===void 0)return this._version;this._version=A,j=j||"-V, --version",q=q||"output the version number";let E=this.createOption(j,q);return this._versionOptionName=E.attributeName(),this.options.push(E),this.on("option:"+E.name(),()=>{this._outputConfiguration.writeOut(`${A}
`),this._exit(0,"commander.version",A)}),this}description(A,j){if(A===void 0&&j===void 0)return this._description;if(this._description=A,j)this._argsDescription=j;return this}summary(A){if(A===void 0)return this._summary;return this._summary=A,this}alias(A){if(A===void 0)return this._aliases[0];let j=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler)j=this.commands[this.commands.length-1];if(A===j._name)throw new Error("Command alias can't be the same as its name");return j._aliases.push(A),this}aliases(A){if(A===void 0)return this._aliases;return A.forEach((j)=>this.alias(j)),this}usage(A){if(A===void 0){if(this._usage)return this._usage;let j=this.registeredArguments.map((q)=>{return jq(q)});return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?j:[]).join(" ")}return this._usage=A,this}name(A){if(A===void 0)return this._name;return this._name=A,this}nameFromFilename(A){return this._name=M.basename(A,M.extname(A)),this}executableDir(A){if(A===void 0)return this._executableDir;return this._executableDir=A,this}helpInformation(A){let j=this.createHelp();if(j.helpWidth===void 0)j.helpWidth=A&&A.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth();return j.formatHelp(this,j)}_getHelpContext(A){A=A||{};let j={error:!!A.error},q;if(j.error)q=(E)=>this._outputConfiguration.writeErr(E);else q=(E)=>this._outputConfiguration.writeOut(E);return j.write=A.write||q,j.command=this,j}outputHelp(A){let j;if(typeof A==="function")j=A,A=void 0;let q=this._getHelpContext(A);this._getCommandAndAncestors().reverse().forEach((_)=>_.emit("beforeAllHelp",q)),this.emit("beforeHelp",q);let E=this.helpInformation(q);if(j){if(E=j(E),typeof E!=="string"&&!Buffer.isBuffer(E))throw new Error("outputHelp callback must return a string or a Buffer")}if(q.write(E),this._helpLongFlag)this.emit(this._helpLongFlag);this.emit("afterHelp",q),this._getCommandAndAncestors().forEach((_)=>_.emit("afterAllHelp",q))}helpOption(A,j){if(typeof A==="boolean")return this._hasHelpOption=A,this;this._helpFlags=A||this._helpFlags,this._helpDescription=j||this._helpDescription;let q=Eq(this._helpFlags);return this._helpShortFlag=q.shortFlag,this._helpLongFlag=q.longFlag,this}help(A){this.outputHelp(A);let j=J.exitCode||0;if(j===0&&A&&typeof A!=="function"&&A.error)j=1;this._exit(j,"commander.help","(outputHelp)")}addHelpText(A,j){let q=["beforeAll","before","after","afterAll"];if(!q.includes(A))throw new Error(`Unexpected value for position to addHelpText.
Expecting one of '${q.join("', '")}'`);let E=`${A}Help`;return this.on(E,(_)=>{let $;if(typeof j==="function")$=j({error:_.error,command:_.command});else $=j;if($)_.write(`${$}
`)}),this}}function Nj(A,j){if(A._hasHelpOption&&j.find((E)=>E===A._helpLongFlag||E===A._helpShortFlag))A.outputHelp(),A._exit(0,"commander.helpDisplayed","(outputHelp)")}function Dj(A){return A.map((j)=>{if(!j.startsWith("--inspect"))return j;let q,E="127.0.0.1",_="9229",$;if(($=j.match(/^(--inspect(-brk)?)$/))!==null)q=$[1];else if(($=j.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null)if(q=$[1],/^\d+$/.test($[3]))_=$[3];else E=$[3];else if(($=j.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null)q=$[1],E=$[3],_=$[4];if(q&&_!=="0")return`${q}=${E}:${parseInt(_)+1}`;return j})}Mj.Command=lA});var Oj=Q((f,vj)=>{var{Argument:$q}=PA(),{Command:yj}=Vj(),{CommanderError:kq,InvalidArgumentError:wj}=p(),{Help:Iq}=bA(),{Option:Bq}=hA();f=vj.exports=new yj;f.program=f;f.Command=yj;f.Option=Bq;f.Argument=$q;f.Help=Iq;f.CommanderError=kq;f.InvalidArgumentError=wj;f.InvalidOptionArgumentError=wj});var eA=Q((uE,h)=>{var __dirname="/Users/maxim/Projects/Private/Sites/cryptit/node_modules/argon2-browser/dist",B=typeof self!=="undefined"&&typeof self.Module!=="undefined"?self.Module:{},Gq=B,o={},O;for(O in B)if(B.hasOwnProperty(O))o[O]=B[O];var a=[],gj="./this.program",tA=function(A,j){throw j},YA=!1,C=!1,pA=!1,cj=!1;YA=typeof window==="object";C=typeof importScripts==="function";pA=typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string";cj=!YA&&!pA&&!C;var S="";function Uq(A){if(B.locateFile)return B.locateFile(A,S);return S+A}var TA,dA,e,Lq,nA,mA;if(pA){if(C)S=require("path").dirname(S)+"/";else S=__dirname+"/";if(TA=function A(j,q){if(!nA)nA=require("fs");if(!mA)mA=require("path");return j=mA.normalize(j),nA.readFileSync(j,q?null:"utf8")},e=function A(j){var q=TA(j,!0);if(!q.buffer)q=new Uint8Array(q);return bj(q.buffer),q},process.argv.length>1)gj=process.argv[1].replace(/\\/g,"/");if(a=process.argv.slice(2),typeof h!=="undefined")h.exports=B;process.on("uncaughtException",function(A){if(!(A instanceof nq))throw A}),process.on("unhandledRejection",EA),tA=function(A){process.exit(A)},B.inspect=function(){return"[Emscripten Module object]"}}else if(cj){if(typeof read!="undefined")TA=function A(j){return read(j)};if(e=function A(j){var q;if(typeof readbuffer==="function")return new Uint8Array(readbuffer(j));return q=read(j,"binary"),bj(typeof q==="object"),q},typeof scriptArgs!="undefined")a=scriptArgs;else if(typeof arguments!="undefined")a=arguments;if(typeof quit==="function")tA=function(A){quit(A)};if(typeof print!=="undefined"){if(typeof console==="undefined")console={};console.log=print,console.warn=console.error=typeof printErr!=="undefined"?printErr:print}}else if(YA||C){if(C)S=self.location.href;else if(typeof document!=="undefined"&&document.currentScript)S=document.currentScript.src;if(S.indexOf("blob:")!==0)S=S.substr(0,S.lastIndexOf("/")+1);else S="";{if(TA=function(A){var j=new XMLHttpRequest;return j.open("GET",A,!1),j.send(null),j.responseText},C)e=function(A){var j=new XMLHttpRequest;return j.open("GET",A,!1),j.responseType="arraybuffer",j.send(null),new Uint8Array(j.response)};dA=function(A,j,q){var E=new XMLHttpRequest;E.open("GET",A,!0),E.responseType="arraybuffer",E.onload=function(){if(E.status==200||E.status==0&&E.response){j(E.response);return}q()},E.onerror=q,E.send(null)}}Lq=function(A){document.title=A}}var xE=B.print||console.log.bind(console),s=B.printErr||console.warn.bind(console);for(O in o)if(o.hasOwnProperty(O))B[O]=o[O];o=null;if(B.arguments)a=B.arguments;if(B.thisProgram)gj=B.thisProgram;if(B.quit)tA=B.quit;var jA;if(B.wasmBinary)jA=B.wasmBinary;var bE=B.noExitRuntime||!0;if(typeof WebAssembly!=="object")EA("no native wasm support detected");var qA,lj=!1,Rq;function bj(A,j){if(!A)EA("Assertion failed: "+j)}var Hq=0,Fq=1;function Pq(A,j){var q;if(j==Fq)q=E6(A.length);else q=q6(A.length);if(A.subarray||A.slice)b.set(A,q);else b.set(new Uint8Array(A),q);return q}var hj=typeof TextDecoder!=="undefined"?new TextDecoder("utf8"):void 0;function Kq(A,j,q){var E=j+q,_=j;while(A[_]&&!(_>=E))++_;if(_-j>16&&A.subarray&&hj)return hj.decode(A.subarray(j,_));else{var $="";while(j<_){var I=A[j++];if(!(I&128)){$+=String.fromCharCode(I);continue}var k=A[j++]&63;if((I&224)==192){$+=String.fromCharCode((I&31)<<6|k);continue}var G=A[j++]&63;if((I&240)==224)I=(I&15)<<12|k<<6|G;else I=(I&7)<<18|k<<12|G<<6|A[j++]&63;if(I<65536)$+=String.fromCharCode(I);else{var U=I-65536;$+=String.fromCharCode(55296|U>>10,56320|U&1023)}}}return $}function Tq(A,j){return A?Kq(b,A,j):""}function Xq(A,j){if(A%j>0)A+=j-A%j;return A}var sA,ij,b,nj,mj,rj,tj,dj,pj;function sj(A){sA=A,B.HEAP8=ij=new Int8Array(A),B.HEAP16=nj=new Int16Array(A),B.HEAP32=rj=new Int32Array(A),B.HEAPU8=b=new Uint8Array(A),B.HEAPU16=mj=new Uint16Array(A),B.HEAPU32=tj=new Uint32Array(A),B.HEAPF32=dj=new Float32Array(A),B.HEAPF64=pj=new Float64Array(A)}var hE=B.INITIAL_MEMORY||16777216,XA,oj=[],aj=[],ej=[],Jq=!1;function Yq(){if(B.preRun){if(typeof B.preRun=="function")B.preRun=[B.preRun];while(B.preRun.length)Zq(B.preRun.shift())}oA(oj)}function Qq(){Jq=!0,oA(aj)}function zq(){if(B.postRun){if(typeof B.postRun=="function")B.postRun=[B.postRun];while(B.postRun.length)Sq(B.postRun.shift())}oA(ej)}function Zq(A){oj.unshift(A)}function Wq(A){aj.unshift(A)}function Sq(A){ej.unshift(A)}var x=0,rA=null,AA=null;function fq(A){if(x++,B.monitorRunDependencies)B.monitorRunDependencies(x)}function Nq(A){if(x--,B.monitorRunDependencies)B.monitorRunDependencies(x);if(x==0){if(rA!==null)clearInterval(rA),rA=null;if(AA){var j=AA;AA=null,j()}}}B.preloadedImages={};B.preloadedAudios={};function EA(A){if(B.onAbort)B.onAbort(A);A+="",s(A),lj=!0,Rq=1,A="abort("+A+"). Build with -s ASSERTIONS=1 for more info.";var j=new WebAssembly.RuntimeError(A);throw j}var Dq="data:application/octet-stream;base64,";function A6(A){return A.startsWith(Dq)}function j6(A){return A.startsWith("file://")}var Z="argon2.wasm";if(!A6(Z))Z=Uq(Z);function uj(A){try{if(A==Z&&jA)return new Uint8Array(jA);if(e)return e(A);else throw"both async and sync fetching of the wasm failed"}catch(j){EA(j)}}function Mq(){if(!jA&&(YA||C)){if(typeof fetch==="function"&&!j6(Z))return fetch(Z,{credentials:"same-origin"}).then(function(A){if(!A.ok)throw"failed to load wasm binary file at '"+Z+"'";return A.arrayBuffer()}).catch(function(){return uj(Z)});else if(dA)return new Promise(function(A,j){dA(Z,function(q){A(new Uint8Array(q))},j)})}return Promise.resolve().then(function(){return uj(Z)})}function Vq(){var A={a:Oq};function j(I,k){var G=I.exports;B.asm=G,qA=B.asm.c,sj(qA.buffer),XA=B.asm.k,Wq(B.asm.d),Nq("wasm-instantiate")}fq("wasm-instantiate");function q(I){j(I.instance)}function E(I){return Mq().then(function(k){var G=WebAssembly.instantiate(k,A);return G}).then(I,function(k){s("failed to asynchronously prepare wasm: "+k),EA(k)})}function _(){if(!jA&&typeof WebAssembly.instantiateStreaming==="function"&&!A6(Z)&&!j6(Z)&&typeof fetch==="function")return fetch(Z,{credentials:"same-origin"}).then(function(I){var k=WebAssembly.instantiateStreaming(I,A);return k.then(q,function(G){return s("wasm streaming compile failed: "+G),s("falling back to ArrayBuffer instantiation"),E(q)})});else return E(q)}if(B.instantiateWasm)try{var $=B.instantiateWasm(A,j);return $}catch(I){return s("Module.instantiateWasm callback failed with error: "+I),!1}return _(),{}}function oA(A){while(A.length>0){var j=A.shift();if(typeof j=="function"){j(B);continue}var q=j.func;if(typeof q==="number")if(j.arg===void 0)XA.get(q)();else XA.get(q)(j.arg);else q(j.arg===void 0?null:j.arg)}}function yq(A,j,q){b.copyWithin(A,j,j+q)}function wq(A){try{return qA.grow(A-sA.byteLength+65535>>>16),sj(qA.buffer),1}catch(j){}}function vq(A){var j=b.length;A=A>>>0;var q=2147418112;if(A>q)return!1;for(var E=1;E<=4;E*=2){var _=j*(1+0.2/E);_=Math.min(_,A+100663296);var $=Math.min(q,Xq(Math.max(A,_),65536)),I=wq($);if(I)return!0}return!1}var Oq={a:yq,b:vq},Cq=Vq(),xq=B.___wasm_call_ctors=function(){return(xq=B.___wasm_call_ctors=B.asm.d).apply(null,arguments)},bq=B._argon2_hash=function(){return(bq=B._argon2_hash=B.asm.e).apply(null,arguments)},q6=B._malloc=function(){return(q6=B._malloc=B.asm.f).apply(null,arguments)},hq=B._free=function(){return(hq=B._free=B.asm.g).apply(null,arguments)},uq=B._argon2_verify=function(){return(uq=B._argon2_verify=B.asm.h).apply(null,arguments)},gq=B._argon2_error_message=function(){return(gq=B._argon2_error_message=B.asm.i).apply(null,arguments)},cq=B._argon2_encodedlen=function(){return(cq=B._argon2_encodedlen=B.asm.j).apply(null,arguments)},lq=B._argon2_hash_ext=function(){return(lq=B._argon2_hash_ext=B.asm.l).apply(null,arguments)},iq=B._argon2_verify_ext=function(){return(iq=B._argon2_verify_ext=B.asm.m).apply(null,arguments)},E6=B.stackAlloc=function(){return(E6=B.stackAlloc=B.asm.n).apply(null,arguments)};B.allocate=Pq;B.UTF8ToString=Tq;B.ALLOC_NORMAL=Hq;var JA;function nq(A){this.name="ExitStatus",this.message="Program terminated with exit("+A+")",this.status=A}AA=function A(){if(!JA)aA();if(!JA)AA=A};function aA(A){if(A=A||a,x>0)return;if(Yq(),x>0)return;function j(){if(JA)return;if(JA=!0,B.calledRun=!0,lj)return;if(Qq(),B.onRuntimeInitialized)B.onRuntimeInitialized();zq()}if(B.setStatus)B.setStatus("Running..."),setTimeout(function(){setTimeout(function(){B.setStatus("")},1),j()},1);else j()}B.run=aA;if(B.preInit){if(typeof B.preInit=="function")B.preInit=[B.preInit];while(B.preInit.length>0)B.preInit.pop()()}aA();if(typeof h!=="undefined")h.exports=B;B.unloadRuntime=function(){if(typeof self!=="undefined")delete self.Module;if(B=Gq=qA=XA=Cq=sA=ij=b=nj=mj=rj=tj=dj=pj=void 0,typeof h!=="undefined")delete h.exports}});var _6=Q((gE,mq)=>{mq.exports="./cryptit.cli.wasm"});var k6=Q(($6,QA)=>{(function(A,j){if(typeof define==="function"&&define.amd)define([],j);else if(typeof QA==="object"&&QA.exports)QA.exports=j();else A.argon2=j()})(typeof self!=="undefined"?self:$6,function(){let A=typeof self!=="undefined"?self:this,j={Argon2d:0,Argon2i:1,Argon2id:2};function q(L){if(q._promise)return q._promise;if(q._module)return Promise.resolve(q._module);let H;if(A.process&&A.process.versions&&A.process.versions.node)H=_().then((F)=>new Promise((Y)=>{F.postRun=()=>Y(F)}));else H=$().then((F)=>{let Y=L?k(L):void 0;return E(F,Y)});return q._promise=H,H.then((F)=>{return q._module=F,delete q._promise,F})}function E(L,H){return new Promise((F)=>{return A.Module={wasmBinary:L,wasmMemory:H,postRun(){F(Module)}},_()})}function _(){if(A.loadArgon2WasmModule)return A.loadArgon2WasmModule();return Promise.resolve(eA())}function $(){if(A.loadArgon2WasmBinary)return A.loadArgon2WasmBinary();return Promise.resolve(_6()).then((H)=>{return I(H)})}function I(L){let H=atob(L),F=new Uint8Array(new ArrayBuffer(H.length));for(let Y=0;Y<H.length;Y++)F[Y]=H.charCodeAt(Y);return F}function k(L){let g=Math.min(Math.max(Math.ceil(L*1024/65536),256)+256,32767);return new WebAssembly.Memory({initial:g,maximum:32767})}function G(L,H){return L.allocate(H,"i8",L.ALLOC_NORMAL)}function U(L,H){let F=new Uint8Array([...H,0]);return G(L,F)}function R(L){if(typeof L!=="string")return L;if(typeof TextEncoder==="function")return new TextEncoder().encode(L);else if(typeof Buffer==="function")return Buffer.from(L);else throw new Error("Don't know how to encode UTF8")}function P(L){let H=L.mem||1024;return q(H).then((F)=>{let Y=L.time||1,w=L.parallelism||1,r=R(L.pass),g=U(F,r),wA=r.length,BA=R(L.salt),GA=U(F,BA),t=BA.length,c=L.type||j.Argon2d,N=F.allocate(new Array(L.hashLen||24),"i8",F.ALLOC_NORMAL),v=L.secret?G(F,L.secret):0,d=L.secret?L.secret.byteLength:0,W=L.ad?G(F,L.ad):0,g6=L.ad?L.ad.byteLength:0,UA=L.hashLen||24,Rj=F._argon2_encodedlen(Y,H,w,t,UA,c),vA=F.allocate(new Array(Rj+1),"i8",F.ALLOC_NORMAL),PE=19,l,LA;try{LA=F._argon2_hash_ext(Y,H,w,g,wA,GA,t,N,UA,vA,Rj,c,v,d,W,g6,19)}catch(i){l=i}let RA;if(LA===0&&!l){let i="",Hj=new Uint8Array(UA);for(let HA=0;HA<UA;HA++){let Fj=F.HEAP8[N+HA];Hj[HA]=Fj,i+=("0"+(255&Fj).toString(16)).slice(-2)}let c6=F.UTF8ToString(vA);RA={hash:Hj,hashHex:i,encoded:c6}}else{try{if(!l)l=F.UTF8ToString(F._argon2_error_message(LA))}catch(i){}RA={message:l,code:LA}}try{if(F._free(g),F._free(GA),F._free(N),F._free(vA),W)F._free(W);if(v)F._free(v)}catch(i){}if(l)throw RA;else return RA})}function T(L){return q().then((H)=>{let F=R(L.pass),Y=U(H,F),w=F.length,r=L.secret?G(H,L.secret):0,g=L.secret?L.secret.byteLength:0,wA=L.ad?G(H,L.ad):0,BA=L.ad?L.ad.byteLength:0,GA=R(L.encoded),t=U(H,GA),c=L.type;if(c===void 0){let W=L.encoded.split("$")[1];if(W)W=W.replace("a","A"),c=j[W]||j.Argon2d}let N,v;try{v=H._argon2_verify_ext(t,Y,w,r,g,wA,BA,c)}catch(W){N=W}let d;if(v||N){try{if(!N)N=H.UTF8ToString(H._argon2_error_message(v))}catch(W){}d={message:N,code:v}}try{H._free(Y),H._free(t)}catch(W){}if(N)throw d;else return d})}function K(){if(q._module)q._module.unloadRuntime(),delete q._promise,delete q._module}return{ArgonType:j,hash:P,verify:T,unloadRuntime:K}})});var U6=Q((cE,G6)=>{var zA=/^[a-z0-9-]{1,32}$/,ZA=/^[a-z0-9-]{1,32}$/,WA=/^[a-zA-Z0-9/+.-]+$/,I6=/^([a-zA-Z0-9/+.-]+|)$/,rq=/^((-)?[1-9]\d*|0)$/,Aj=/^v=(\d+)$/;function tq(A){return _A(A).map((j)=>[j,A[j]].join("=")).join(",")}function dq(A){let j={};return A.split(",").forEach((q)=>{let E=q.split("=");if(E.length<2)throw new TypeError("params must be in the format name=value");j[E.shift()]=E.join("=")}),j}function _A(A){return Object.keys(A)}function B6(A){if(typeof Object.values==="function")return Object.values(A);return _A(A).map((j)=>A[j])}function pq(A){let j=[""];if(typeof A!=="object"||A===null)throw new TypeError("opts must be an object");if(typeof A.id!=="string")throw new TypeError("id must be a string");if(!zA.test(A.id))throw new TypeError(`id must satisfy ${zA}`);if(j.push(A.id),typeof A.version!=="undefined"){if(typeof A.version!=="number"||A.version<0||!Number.isInteger(A.version))throw new TypeError("version must be a positive integer number");j.push(`v=${A.version}`)}if(typeof A.params!=="undefined"){if(typeof A.params!=="object"||A.params===null)throw new TypeError("params must be an object");let E=_A(A.params);if(!E.every((I)=>ZA.test(I)))throw new TypeError(`params names must satisfy ${ZA}`);E.forEach((I)=>{if(typeof A.params[I]==="number")A.params[I]=A.params[I].toString();else if(Buffer.isBuffer(A.params[I]))A.params[I]=A.params[I].toString("base64").split("=")[0]});let _=B6(A.params);if(!_.every((I)=>typeof I==="string"))throw new TypeError("params values must be strings");if(!_.every((I)=>WA.test(I)))throw new TypeError(`params values must satisfy ${WA}`);let $=tq(A.params);j.push($)}if(typeof A.salt!=="undefined"){if(!Buffer.isBuffer(A.salt))throw new TypeError("salt must be a Buffer");if(j.push(A.salt.toString("base64").split("=")[0]),typeof A.hash!=="undefined"){if(!Buffer.isBuffer(A.hash))throw new TypeError("hash must be a Buffer");j.push(A.hash.toString("base64").split("=")[0])}}return j.join("$")}function sq(A){if(typeof A!=="string"||A==="")throw new TypeError("pchstr must be a non-empty string");if(A[0]!=="$")throw new TypeError("pchstr must contain a $ as first char");let j=A.split("$");j.shift();let q=5;if(!Aj.test(j[1]))q--;if(j.length>q)throw new TypeError(`pchstr contains too many fileds: ${j.length}/${q}`);let E=j.shift();if(!zA.test(E))throw new TypeError(`id must satisfy ${zA}`);let _;if(Aj.test(j[0]))_=parseInt(j.shift().match(Aj)[1],10);let $,I;if(I6.test(j[j.length-1]))if(j.length>1&&I6.test(j[j.length-2]))$=Buffer.from(j.pop(),"base64"),I=Buffer.from(j.pop(),"base64");else I=Buffer.from(j.pop(),"base64");let k;if(j.length>0){let U=j.pop();if(k=dq(U),!_A(k).every((T)=>ZA.test(T)))throw new TypeError(`params names must satisfy ${ZA}`);if(!B6(k).every((T)=>WA.test(T)))throw new TypeError(`params values must satisfy ${WA}`);_A(k).forEach((T)=>{k[T]=rq.test(k[T])?parseInt(k[T],10):k[T]})}if(j.length>0)throw new TypeError(`pchstr contains unrecognized fileds: ${j}`);let G={id:E};if(_)G.version=_;if(k)G.params=k;if(I)G.salt=I;if($)G.hash=$;return G}G6.exports={serialize:pq,deserialize:sq}});var f6=Q((lE,S6)=>{var F6=require("fs"),V=require("path"),P6=require("os"),K6=typeof __webpack_require__==="function"?__non_webpack_require__:require,oq=process.config&&process.config.variables||{},aq=!!process.env.PREBUILDS_ONLY,L6=process.versions.modules,jj=jE()?"electron":AE()?"node-webkit":"node",qj=process.env.npm_config_arch||P6.arch(),Ej=process.env.npm_config_platform||P6.platform(),T6=process.env.LIBC||(qE(Ej)?"musl":"glibc"),_j=process.env.ARM_VERSION||(qj==="arm64"?"8":oq.arm_version)||"",X6=(process.versions.uv||"").split(".")[0];S6.exports=D;function D(A){return K6(D.resolve(A))}D.resolve=D.path=function(A){A=V.resolve(A||".");try{var j=K6(V.join(A,"package.json")).name.toUpperCase().replace(/-/g,"_");if(process.env[j+"_PREBUILD"])A=process.env[j+"_PREBUILD"]}catch(G){}if(!aq){var q=R6(V.join(A,"build/Release"),H6);if(q)return q;var E=R6(V.join(A,"build/Debug"),H6);if(E)return E}var _=k(A);if(_)return _;var $=k(V.dirname(process.execPath));if($)return $;var I=["platform="+Ej,"arch="+qj,"runtime="+jj,"abi="+L6,"uv="+X6,_j?"armv="+_j:"","libc="+T6,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"",typeof __webpack_require__==="function"?"webpack=true":""].filter(Boolean).join(" ");throw new Error("No native build was found for "+I+`
    loaded from: `+A+`
`);function k(G){var U=$j(V.join(G,"prebuilds")).map(J6),R=U.filter(Y6(Ej,qj)).sort(Q6)[0];if(!R)return;var P=V.join(G,"prebuilds",R.name),T=$j(P).map(z6),K=T.filter(Z6(jj,L6)),L=K.sort(W6(jj))[0];if(L)return V.join(P,L.file)}};function $j(A){try{return F6.readdirSync(A)}catch(j){return[]}}function R6(A,j){var q=$j(A).filter(j);return q[0]&&V.join(A,q[0])}function H6(A){return/\.node$/.test(A)}function J6(A){var j=A.split("-");if(j.length!==2)return;var q=j[0],E=j[1].split("+");if(!q)return;if(!E.length)return;if(!E.every(Boolean))return;return{name:A,platform:q,architectures:E}}function Y6(A,j){return function(q){if(q==null)return!1;if(q.platform!==A)return!1;return q.architectures.includes(j)}}function Q6(A,j){return A.architectures.length-j.architectures.length}function z6(A){var j=A.split("."),q=j.pop(),E={file:A,specificity:0};if(q!=="node")return;for(var _=0;_<j.length;_++){var $=j[_];if($==="node"||$==="electron"||$==="node-webkit")E.runtime=$;else if($==="napi")E.napi=!0;else if($.slice(0,3)==="abi")E.abi=$.slice(3);else if($.slice(0,2)==="uv")E.uv=$.slice(2);else if($.slice(0,4)==="armv")E.armv=$.slice(4);else if($==="glibc"||$==="musl")E.libc=$;else continue;E.specificity++}return E}function Z6(A,j){return function(q){if(q==null)return!1;if(q.runtime&&q.runtime!==A&&!eq(q))return!1;if(q.abi&&q.abi!==j&&!q.napi)return!1;if(q.uv&&q.uv!==X6)return!1;if(q.armv&&q.armv!==_j)return!1;if(q.libc&&q.libc!==T6)return!1;return!0}}function eq(A){return A.runtime==="node"&&A.napi}function W6(A){return function(j,q){if(j.runtime!==q.runtime)return j.runtime===A?-1:1;else if(j.abi!==q.abi)return j.abi?-1:1;else if(j.specificity!==q.specificity)return j.specificity>q.specificity?-1:1;else return 0}}function AE(){return!!(process.versions&&process.versions.nw)}function jE(){if(process.versions&&process.versions.electron)return!0;if(process.env.ELECTRON_RUN_AS_NODE)return!0;return typeof window!=="undefined"&&window.process&&window.process.type==="renderer"}function qE(A){return A==="linux"&&F6.existsSync("/etc/alpine-release")}D.parseTags=z6;D.matchTags=Z6;D.compareTags=W6;D.parseTuple=J6;D.matchTuple=Y6;D.compareTuples=Q6});var N6=Q((iE,Ij)=>{var kj=typeof __webpack_require__==="function"?__non_webpack_require__:require;if(typeof kj.addon==="function")Ij.exports=kj.addon.bind(kj);else Ij.exports=f6()});var y6=Q((mE,u)=>{var __dirname="/Users/maxim/Projects/Private/Sites/cryptit/node_modules/argon2",nE=require("node:assert"),{randomBytes:EE,timingSafeEqual:_E}=require("node:crypto"),{promisify:$E}=require("node:util"),{deserialize:D6,serialize:kE}=U6(),IE=N6(),{hash:M6}=IE(__dirname),BE=$E(EE);u.exports.argon2d=0;u.exports.argon2i=1;u.exports.argon2id=2;var $A=Object.freeze({argon2d:0,argon2i:1,argon2id:2}),GE=Object.freeze({[$A.argon2d]:"argon2d",[$A.argon2i]:"argon2i",[$A.argon2id]:"argon2id"}),V6={hashLength:32,timeCost:3,memoryCost:65536,parallelism:4,type:2,version:19};async function UE(A,j){let{raw:q,salt:E,..._}={...V6,...j};if(_.hashLength>4294967295)throw new RangeError("Hash length is too large");if(_.memoryCost>4294967295)throw new RangeError("Memory cost is too large");if(_.timeCost>4294967295)throw new RangeError("Time cost is too large");if(_.parallelism>16777215)throw new RangeError("Parallelism is too large");E=E??await BE(16);let{hashLength:$,secret:I=Buffer.alloc(0),type:k,version:G,memoryCost:U,timeCost:R,parallelism:P,associatedData:T=Buffer.alloc(0)}=_,K=await M6({password:Buffer.from(A),salt:E,secret:I,data:T,hashLength:$,m:U,t:R,p:P,version:G,type:k});if(q)return K;return kE({id:GE[k],version:G,params:{m:U,t:R,p:P,...T.byteLength>0?{data:T}:{}},salt:E,hash:K})}u.exports.hash=UE;function LE(A,j={}){let{memoryCost:q,timeCost:E,parallelism:_,version:$}={...V6,...j},{version:I,params:{m:k,t:G,p:U}}=D6(A);return+I!==+$||+k!==+q||+G!==+E||+U!==+_}u.exports.needsRehash=LE;async function RE(A,j,q={}){let{id:E,..._}=D6(A);if(!(E in $A))return!1;let{version:$=16,params:{m:I,t:k,p:G,data:U=""},salt:R,hash:P}=_,{secret:T=Buffer.alloc(0)}=q;return _E(await M6({password:Buffer.from(j),salt:R,secret:T,data:Buffer.from(U,"base64"),hashLength:P.byteLength,m:+I,t:+k,p:+G,version:+$,type:$A[E]}),P)}u.exports.verify=RE});var Cj=FA(Oj()),{program:ZE,createCommand:WE,createArgument:SE,createOption:fE,CommanderError:NE,InvalidArgumentError:DE,InvalidOptionArgumentError:ME,Command:xj,Argument:VE,Option:yE,Help:wE}=Cj.default;var m=require("node:fs"),X=require("node:process"),VA=require("node:stream");class z{static byId=new Map;static register(A){if(this.byId.has(A.id))throw new Error(`Version ${A.id} already registered`);this.byId.set(A.id,A)}static get(A){let j=this.byId.get(A);if(!j)throw new Error(`Unknown version: ${A}`);return j}static get current(){return this.get(0)}}class iA{p;key;constructor(A){this.p=A}setKey(A){this.key=A}async encryptChunk(A){let j=this.p.getRandomValues(new Uint8Array(12)),q=new Uint8Array(await this.p.subtle.encrypt({name:"AES-GCM",iv:j},this.key,A)),E=new Uint8Array(j.length+q.length);return E.set(j),E.set(q,j.length),E}async decryptChunk(A){let j=A.slice(0,12),q=A.slice(12),E=await this.p.subtle.decrypt({name:"AES-GCM",iv:j},this.key,q);return new Uint8Array(E)}}var SA=FA(k6());async function w6(A,j,q,E){if(E==="node"){let _=await Promise.resolve().then(() => FA(y6())),$=typeof A==="string"?Buffer.from(A,"utf8"):Buffer.from(A),I=Buffer.from(j),k=await _.hash($,{salt:I,timeCost:q.time,memoryCost:q.mem,parallelism:q.parallelism,hashLength:32,raw:!0,type:_.argon2id});return{hash:new Uint8Array(k)}}if(E==="browser"){let{hash:_}=await SA.hash({pass:A,salt:j,time:q.time,mem:q.mem,parallelism:q.parallelism,hashLen:32,type:SA.ArgonType.Argon2id});return{hash:_}}throw new Error(`Unsupported environment: ${E}`)}class Bj{presets;name="argon2id";constructor(A){this.presets=A}async derive(A,j,q,E){let{hash:_}=await w6(A,j,this.presets[q],E.isNode?"node":"browser");return E.subtle.importKey("raw",_,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}}var v6={low:{time:5,mem:65536,parallelism:1},middle:{time:20,mem:65536,parallelism:1},high:{time:40,mem:65536,parallelism:1}},HE={id:0,cipher:iA,kdf:new Bj(v6),saltLengths:{low:12,high:16},difficulties:v6,defaultChunkSize:524288};z.register(HE);var fA=1;function Gj(...A){let j=A.reduce((_,$)=>_+$.byteLength,0),q=new Uint8Array(j),E=0;for(let _ of A)q.set(_,E),E+=_.byteLength;return q}function O6(...A){return Buffer.from(Gj(...A)).toString("base64")}function C6(A){return Uint8Array.from(Buffer.from(A,"base64"))}function NA(A,j,q,E){let _={low:0,middle:1,high:2}[j]??0,$=A<<5|(q==="high"?1:0)<<2|_;return Gj(new Uint8Array([fA,$]),E)}function DA(A){if(A[0]!==fA)throw new Error("INVALID_HEADER");let j=A[1],q=j>>5,E=j>>2&1?"high":"low",_=j&3,$=["low","middle","high"][_],I=z.get(q).saltLengths[E],k=A.slice(2,2+I);return{version:q,difficulty:$,saltStrength:E,salt:k,headerLen:2+I}}class kA{engine;chunkSize;buffer=new Uint8Array(0);constructor(A,j=524288){this.engine=A;this.chunkSize=j}toTransformStream(){return new TransformStream({transform:async(A,j)=>{await this.transform(await this.asUint8Array(A),j)},flush:async(A)=>this.flush(A)})}async transform(A,j){let q=new Uint8Array(this.buffer.length+A.length);q.set(this.buffer),q.set(A,this.buffer.length);let E=0;while(q.length-E>=this.chunkSize){let _=q.slice(E,E+this.chunkSize);E+=this.chunkSize;let $=await this.engine.encryptChunk(_),I=new Uint8Array(4);new DataView(I.buffer).setUint32(0,$.length,!1);let k=new Uint8Array(4+$.length);k.set(I),k.set($,I.length),j.enqueue(k)}this.buffer=q.slice(E)}async flush(A){if(!this.buffer.length)return;let j=await this.engine.encryptChunk(this.buffer),q=new Uint8Array(4);new DataView(q.buffer).setUint32(0,j.length,!1);let E=new Uint8Array(4+j.length);E.set(q),E.set(j,4),A.enqueue(E),this.buffer=new Uint8Array(0)}async asUint8Array(A){if(A instanceof Uint8Array)return A;if(A instanceof ArrayBuffer)return new Uint8Array(A);return new Uint8Array(await A.arrayBuffer())}}class n{engine;chunkSize;buffer=new Uint8Array(0);constructor(A,j=524288){this.engine=A;this.chunkSize=j}toTransformStream(){return new TransformStream({transform:async(A,j)=>{await this.transform(await this.asUint8Array(A),j)},flush:async(A)=>this.flush(A)})}async transform(A,j){let q=new Uint8Array(this.buffer.length+A.length);q.set(this.buffer),q.set(A,this.buffer.length);let E=0;while(!0){if(q.length-E<4)break;let _=new DataView(q.buffer,q.byteOffset+E,4).getUint32(0,!1);if(q.length-E-4<_)break;E+=4;let $=q.slice(E,E+_);E+=_;let I=await this.engine.decryptChunk($);j.enqueue(I)}this.buffer=q.slice(E)}async flush(A){await this.transform(new Uint8Array(0),A),this.buffer=new Uint8Array(0)}async asUint8Array(A){if(A instanceof Uint8Array)return A;if(A instanceof ArrayBuffer)return new Uint8Array(A);return new Uint8Array(await A.arrayBuffer())}}class Uj{engine;chunkSize;constructor(A,j=524288){this.engine=A;this.chunkSize=j}encryptionStream(){let A=new kA(this.engine,this.chunkSize).toTransformStream();return{writable:A.writable,readable:A.readable}}decryptionStream(A){let j=A,q=new TransformStream({transform(_,$){if(j===0){$.enqueue(_);return}if(_.byteLength<=j){j-=_.byteLength;return}$.enqueue(_.slice(j)),j=0}}),E=new n(this.engine,this.chunkSize).toTransformStream();return{writable:q.writable,readable:q.readable.pipeThrough(E)}}async collect(A,j,q=null){let E=A.pipeThrough(j).getReader(),_=[];if(q?.length)_.push(q);while(!0){let{value:G,done:U}=await E.read();if(U)break;_.push(G)}let $=_.reduce((G,U)=>G+U.byteLength,0),I=new Uint8Array($),k=0;for(let G of _)I.set(G,k),k+=G.byteLength;return I}}class Lj{provider;v;cipher;kdf;chunkSize;stream;difficulty;saltStrength;constructor(A,j={}){this.provider=A;this.v=z.get(j.version??z.current.id),this.cipher=new this.v.cipher(A),this.kdf=this.v.kdf,this.chunkSize=j.chunkSize??this.v.defaultChunkSize,this.stream=new Uj(this.cipher,this.chunkSize),this.difficulty=j.difficulty??"middle",this.saltStrength=j.saltStrength??"high"}async encryptText(A,j){let q=this.genSalt();await this.deriveKey(j,q);let E=await this.cipher.encryptChunk(typeof A==="string"?new TextEncoder().encode(A):A),_=NA(this.v.id,this.difficulty,this.saltStrength,q);return O6(_,E)}async decryptText(A,j){let q=C6(A),E=DA(q),_=z.get(E.version);this.ensureSameVersion(_),await this.deriveKey(j,E.salt,E.difficulty);let $=await this.cipher.decryptChunk(q.slice(E.headerLen));return new TextDecoder().decode($)}async encryptFile(A,j){let q=this.genSalt();await this.deriveKey(j,q);let E=NA(this.v.id,this.difficulty,this.saltStrength,q),_=await this.stream.collect(A.stream(),new kA(this.cipher,this.chunkSize).toTransformStream(),E);return new Blob([_],{type:"application/octet-stream"})}async decryptFile(A,j){let q=new Uint8Array(await A.slice(0,2).arrayBuffer()),E=q[1]>>5,_=q[1]>>2&1?"high":"low",I=2+z.get(E).saltLengths[_],k=new Uint8Array(await A.slice(0,I).arrayBuffer()),G=DA(k);await this.deriveKey(j,G.salt,G.difficulty);let U=await this.stream.collect(A.slice(I).stream(),new n(this.cipher,this.chunkSize).toTransformStream());return new Blob([U],{type:"application/octet-stream"})}async createEncryptionStream(A){let j=this.genSalt();await this.deriveKey(A,j);let q=NA(this.v.id,this.difficulty,this.saltStrength,j),E=this.stream.encryptionStream();return{header:q,writable:E.writable,readable:E.readable}}async createDecryptionStream(A){let j=this,q=new Uint8Array(0),E=!1,_;function $(k,G){let U=new Uint8Array(k.length+G.length);return U.set(k),U.set(G,k.length),U}async function I(k,G){let U=k.getReader();while(!0){let{value:R,done:P}=await U.read();if(P)break;G.enqueue(R)}}return new TransformStream({async transform(k,G){if(!E){if(q=$(q,k),q.length<2)return;let R=q[1]>>5,P=q[1]>>2&1?"high":"low",K=2+z.get(R).saltLengths[P];if(q.length<K)return;let L=q.slice(0,K),{salt:H,difficulty:F}=DA(L);if(R!==j.v.id)throw new Error(`Ciphertext v${R} but Cryptit instance is v${j.v.id}`);await j.deriveKey(A,H,F),_=new n(j.cipher,j.chunkSize).toTransformStream(),I(_.readable,G);let Y=q.slice(K);if(Y.length){let w=_.writable.getWriter();await w.write(Y),w.releaseLock()}E=!0;return}let U=_.writable.getWriter();await U.write(k),U.releaseLock()},async flush(){if(E){let k=_.writable.getWriter();await k.close(),k.releaseLock()}}})}async deriveKey(A,j,q=this.difficulty){let E=await this.kdf.derive(A,j,q,this.provider);this.cipher.key=E}concat(A,j){let q=new Uint8Array(A.length+j.length);return q.set(A,0),q.set(j,A.length),q}genSalt(){let A=this.v.saltLengths[this.saltStrength];return this.provider.getRandomValues(new Uint8Array(A))}ensureSameVersion(A){if(A.id!==this.v.id)throw new Error(`This Cryptit instance was created for v${this.v.id} but ciphertext is v${A.id}`)}}var MA=require("node:crypto"),x6={subtle:MA.webcrypto.subtle,getRandomValues(A){return MA.randomFillSync(A),A},isNode:!0};function IA(A){return new Lj(x6,A)}var FE="0.2.1";async function yA(){if(!X.stdin.isTTY)throw new Error("STDIN not a TTY; use --pass");X.stderr.write("Passphrase: "),X.stdin.setRawMode?.(!0),X.stdin.resume(),X.stdin.setEncoding("utf8");let A="";return new Promise((j)=>{function q(){X.stdin.setRawMode?.(!1),X.stdin.pause(),X.stderr.write(`
`),X.stdin.off("data",E),j(A)}function E(_){if(_==="\x03")X.exit(130);if(_==="\r"||_===`
`)return q();if(_==="\b"||_===""){A=A.slice(0,-1);return}A+=_}X.stdin.on("data",E)})}function b6(A){return VA.Readable.toWeb(A)}function h6(A){return VA.Writable.toWeb(A)}async function u6(){let A=[];for await(let j of X.stdin)A.push(j);return Buffer.concat(A).toString("utf8")}var y=new xj().name("cryptit").version(FE).description("AES-GCM / Argon2 encryption utility").option("-p, --pass <passphrase>","passphrase (prompt if omitted)").option("-d, --difficulty <level>","argon2 difficulty low|middle|high","middle").option("-s, --salt-strength <low|high>","salt length variant","high").option("-c, --chunk-size <bytes>","chunk size in bytes",(A)=>Number(A),524288).option("-v, --verbose","increase verbosity",(A,j)=>(j??0)+1,0);y.command("encrypt <src>").description("Encrypt file; use - for STDIN, --out - for STDOUT").option("-o, --out <file>","output file (default STDOUT)","-").action(async(A,j)=>{let q=y.opts(),E=IA({difficulty:q.difficulty,saltStrength:q.saltStrength,chunkSize:q.chunkSize}),_=q.pass??(X.stdin.isTTY?await yA():(()=>{X.stderr.write(`Use --pass when piping via STDIN
`),X.exit(1)})()),$=A==="-"?X.stdin:m.createReadStream(A),I=j.out==="-"?X.stdout:m.createWriteStream(j.out),{header:k,writable:G,readable:U}=await E.createEncryptionStream(_),R=b6($),P=h6(I),T=P.getWriter();await T.write(k),T.releaseLock(),await Promise.all([R.pipeTo(G),U.pipeTo(P)])});y.command("decrypt <src>").description("Decrypt file; use - for STDIN, --out - for STDOUT").option("-o, --out <file>","output file (default STDOUT)","-").action(async(A,j)=>{let q=y.opts(),E=IA({difficulty:q.difficulty,saltStrength:q.saltStrength,chunkSize:q.chunkSize}),_=q.pass??await yA(),$=A==="-"?X.stdin:m.createReadStream(A),I=j.out==="-"?X.stdout:m.createWriteStream(j.out),k=b6($),G=h6(I),U=await E.createDecryptionStream(_);await Promise.all([k.pipeTo(U.writable),U.readable.pipeTo(G)])});y.command("encrypt-text [text]").description("Encrypt plaintext; omit arg to read from STDIN").action(async(A)=>{let j=y.opts(),q=IA({difficulty:j.difficulty,saltStrength:j.saltStrength}),E=j.pass??(X.stdin.isTTY?await yA():(()=>{X.stderr.write(`Use --pass when piping via STDIN
`),X.exit(1)})()),_=A??await u6(),$=await q.encryptText(_,E);X.stdout.write($+`
`)});y.command("decrypt-text [b64]").description("Decrypt Base64 ciphertext; omit arg to read from STDIN").action(async(A)=>{let j=y.opts(),q=IA({difficulty:j.difficulty,saltStrength:j.saltStrength}),E=j.pass??await yA(),_=A??(await u6()).trim(),$=await q.decryptText(_,E);X.stdout.write($+`
`)});y.parse();

//# debugId=9A996DC0DBDAB32C64756E2164756E21

#!/usr/bin/env node
import{createRequire as u6}from"node:module";var C6=Object.create;var{getPrototypeOf:x6,defineProperty:Lj,getOwnPropertyNames:b6}=Object;var h6=Object.prototype.hasOwnProperty;var HA=(A,j,q)=>{q=A!=null?C6(x6(A)):{};let E=j||!A||!A.__esModule?Lj(q,"default",{value:A,enumerable:!0}):q;for(let _ of b6(A))if(!h6.call(E,_))Lj(E,_,{get:()=>A[_],enumerable:!0});return E};var Q=(A,j)=>()=>(j||A((j={exports:{}}).exports,j),j.exports);var T=u6(import.meta.url);var p=Q((g6)=>{class wA extends Error{constructor(A,j,q){super(q);Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=j,this.exitCode=A,this.nestedError=void 0}}class Uj extends wA{constructor(A){super(1,"commander.invalidArgument",A);Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}}g6.CommanderError=wA;g6.InvalidArgumentError=Uj});var KA=Q((n6)=>{var{InvalidArgumentError:i6}=p();class Fj{constructor(A,j){switch(this.description=j||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,A[0]){case"<":this.required=!0,this._name=A.slice(1,-1);break;case"[":this.required=!1,this._name=A.slice(1,-1);break;default:this.required=!0,this._name=A;break}if(this._name.length>3&&this._name.slice(-3)==="...")this.variadic=!0,this._name=this._name.slice(0,-3)}name(){return this._name}_concatValue(A,j){if(j===this.defaultValue||!Array.isArray(j))return[A];return j.concat(A)}default(A,j){return this.defaultValue=A,this.defaultValueDescription=j,this}argParser(A){return this.parseArg=A,this}choices(A){return this.argChoices=A.slice(),this.parseArg=(j,q)=>{if(!this.argChoices.includes(j))throw new i6(`Allowed choices are ${this.argChoices.join(", ")}.`);if(this.variadic)return this._concatValue(j,q);return j},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}}function m6(A){let j=A.name()+(A.variadic===!0?"...":"");return A.required?"<"+j+">":"["+j+"]"}n6.Argument=Fj;n6.humanReadableArgName=m6});var OA=Q((p6)=>{var{humanReadableArgName:d6}=KA();class Hj{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(A){let j=A.commands.filter((q)=>!q._hidden);if(A._hasImplicitHelpCommand()){let[,q,E]=A._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/),_=A.createCommand(q).helpOption(!1);if(_.description(A._helpCommandDescription),E)_.arguments(E);j.push(_)}if(this.sortSubcommands)j.sort((q,E)=>{return q.name().localeCompare(E.name())});return j}compareOptions(A,j){let q=(E)=>{return E.short?E.short.replace(/^-/,""):E.long.replace(/^--/,"")};return q(A).localeCompare(q(j))}visibleOptions(A){let j=A.options.filter((_)=>!_.hidden),q=A._hasHelpOption&&A._helpShortFlag&&!A._findOption(A._helpShortFlag),E=A._hasHelpOption&&!A._findOption(A._helpLongFlag);if(q||E){let _;if(!q)_=A.createOption(A._helpLongFlag,A._helpDescription);else if(!E)_=A.createOption(A._helpShortFlag,A._helpDescription);else _=A.createOption(A._helpFlags,A._helpDescription);j.push(_)}if(this.sortOptions)j.sort(this.compareOptions);return j}visibleGlobalOptions(A){if(!this.showGlobalOptions)return[];let j=[];for(let q=A.parent;q;q=q.parent){let E=q.options.filter((_)=>!_.hidden);j.push(...E)}if(this.sortOptions)j.sort(this.compareOptions);return j}visibleArguments(A){if(A._argsDescription)A.registeredArguments.forEach((j)=>{j.description=j.description||A._argsDescription[j.name()]||""});if(A.registeredArguments.find((j)=>j.description))return A.registeredArguments;return[]}subcommandTerm(A){let j=A.registeredArguments.map((q)=>d6(q)).join(" ");return A._name+(A._aliases[0]?"|"+A._aliases[0]:"")+(A.options.length?" [options]":"")+(j?" "+j:"")}optionTerm(A){return A.flags}argumentTerm(A){return A.name()}longestSubcommandTermLength(A,j){return j.visibleCommands(A).reduce((q,E)=>{return Math.max(q,j.subcommandTerm(E).length)},0)}longestOptionTermLength(A,j){return j.visibleOptions(A).reduce((q,E)=>{return Math.max(q,j.optionTerm(E).length)},0)}longestGlobalOptionTermLength(A,j){return j.visibleGlobalOptions(A).reduce((q,E)=>{return Math.max(q,j.optionTerm(E).length)},0)}longestArgumentTermLength(A,j){return j.visibleArguments(A).reduce((q,E)=>{return Math.max(q,j.argumentTerm(E).length)},0)}commandUsage(A){let j=A._name;if(A._aliases[0])j=j+"|"+A._aliases[0];let q="";for(let E=A.parent;E;E=E.parent)q=E.name()+" "+q;return q+j+" "+A.usage()}commandDescription(A){return A.description()}subcommandDescription(A){return A.summary()||A.description()}optionDescription(A){let j=[];if(A.argChoices)j.push(`choices: ${A.argChoices.map((q)=>JSON.stringify(q)).join(", ")}`);if(A.defaultValue!==void 0){if(A.required||A.optional||A.isBoolean()&&typeof A.defaultValue==="boolean")j.push(`default: ${A.defaultValueDescription||JSON.stringify(A.defaultValue)}`)}if(A.presetArg!==void 0&&A.optional)j.push(`preset: ${JSON.stringify(A.presetArg)}`);if(A.envVar!==void 0)j.push(`env: ${A.envVar}`);if(j.length>0)return`${A.description} (${j.join(", ")})`;return A.description}argumentDescription(A){let j=[];if(A.argChoices)j.push(`choices: ${A.argChoices.map((q)=>JSON.stringify(q)).join(", ")}`);if(A.defaultValue!==void 0)j.push(`default: ${A.defaultValueDescription||JSON.stringify(A.defaultValue)}`);if(j.length>0){let q=`(${j.join(", ")})`;if(A.description)return`${A.description} ${q}`;return q}return A.description}formatHelp(A,j){let q=j.padWidth(A,j),E=j.helpWidth||80,_=2,$=2;function k(X,L){if(L){let F=`${X.padEnd(q+2)}${L}`;return j.wrap(F,E-2,q+2)}return X}function I(X){return X.join(`
`).replace(/^/gm," ".repeat(2))}let G=[`Usage: ${j.commandUsage(A)}`,""],R=j.commandDescription(A);if(R.length>0)G=G.concat([j.wrap(R,E,0),""]);let U=j.visibleArguments(A).map((X)=>{return k(j.argumentTerm(X),j.argumentDescription(X))});if(U.length>0)G=G.concat(["Arguments:",I(U),""]);let P=j.visibleOptions(A).map((X)=>{return k(j.optionTerm(X),j.optionDescription(X))});if(P.length>0)G=G.concat(["Options:",I(P),""]);if(this.showGlobalOptions){let X=j.visibleGlobalOptions(A).map((L)=>{return k(j.optionTerm(L),j.optionDescription(L))});if(X.length>0)G=G.concat(["Global Options:",I(X),""])}let K=j.visibleCommands(A).map((X)=>{return k(j.subcommandTerm(X),j.subcommandDescription(X))});if(K.length>0)G=G.concat(["Commands:",I(K),""]);return G.join(`
`)}padWidth(A,j){return Math.max(j.longestOptionTermLength(A,j),j.longestGlobalOptionTermLength(A,j),j.longestSubcommandTermLength(A,j),j.longestArgumentTermLength(A,j))}wrap(A,j,q,E=40){let $=new RegExp(`[\\n][${" \\f\\t\\v   -   　\uFEFF"}]+`);if(A.match($))return A;let k=j-q;if(k<E)return A;let I=A.slice(0,q),G=A.slice(q).replace(`\r
`,`
`),R=" ".repeat(q),P=`\\s${"​"}`,K=new RegExp(`
|.{1,${k-1}}([${P}]|$)|[^${P}]+?([${P}]|$)`,"g"),X=G.match(K)||[];return I+X.map((L,F)=>{if(L===`
`)return"";return(F>0?R:"")+L.trimEnd()}).join(`
`)}}p6.Help=Hj});var CA=Q((e6)=>{var{InvalidArgumentError:o6}=p();class Kj{constructor(A,j){this.flags=A,this.description=j||"",this.required=A.includes("<"),this.optional=A.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(A),this.mandatory=!1;let q=Xj(A);if(this.short=q.shortFlag,this.long=q.longFlag,this.negate=!1,this.long)this.negate=this.long.startsWith("--no-");this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(A,j){return this.defaultValue=A,this.defaultValueDescription=j,this}preset(A){return this.presetArg=A,this}conflicts(A){return this.conflictsWith=this.conflictsWith.concat(A),this}implies(A){let j=A;if(typeof A==="string")j={[A]:!0};return this.implied=Object.assign(this.implied||{},j),this}env(A){return this.envVar=A,this}argParser(A){return this.parseArg=A,this}makeOptionMandatory(A=!0){return this.mandatory=!!A,this}hideHelp(A=!0){return this.hidden=!!A,this}_concatValue(A,j){if(j===this.defaultValue||!Array.isArray(j))return[A];return j.concat(A)}choices(A){return this.argChoices=A.slice(),this.parseArg=(j,q)=>{if(!this.argChoices.includes(j))throw new o6(`Allowed choices are ${this.argChoices.join(", ")}.`);if(this.variadic)return this._concatValue(j,q);return j},this}name(){if(this.long)return this.long.replace(/^--/,"");return this.short.replace(/^-/,"")}attributeName(){return a6(this.name().replace(/^no-/,""))}is(A){return this.short===A||this.long===A}isBoolean(){return!this.required&&!this.optional&&!this.negate}}class Pj{constructor(A){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,A.forEach((j)=>{if(j.negate)this.negativeOptions.set(j.attributeName(),j);else this.positiveOptions.set(j.attributeName(),j)}),this.negativeOptions.forEach((j,q)=>{if(this.positiveOptions.has(q))this.dualOptions.add(q)})}valueFromOption(A,j){let q=j.attributeName();if(!this.dualOptions.has(q))return!0;let E=this.negativeOptions.get(q).presetArg,_=E!==void 0?E:!1;return j.negate===(_===A)}}function a6(A){return A.split("-").reduce((j,q)=>{return j+q[0].toUpperCase()+q.slice(1)})}function Xj(A){let j,q,E=A.split(/[ |,]+/);if(E.length>1&&!/^[[<]/.test(E[1]))j=E.shift();if(q=E.shift(),!j&&/^-[^-]$/.test(q))j=q,q=void 0;return{shortFlag:j,longFlag:q}}e6.Option=Kj;e6.splitOptionFlags=Xj;e6.DualOptions=Pj});var Jj=Q(($q)=>{function Eq(A,j){if(Math.abs(A.length-j.length)>3)return Math.max(A.length,j.length);let q=[];for(let E=0;E<=A.length;E++)q[E]=[E];for(let E=0;E<=j.length;E++)q[0][E]=E;for(let E=1;E<=j.length;E++)for(let _=1;_<=A.length;_++){let $=1;if(A[_-1]===j[E-1])$=0;else $=1;if(q[_][E]=Math.min(q[_-1][E]+1,q[_][E-1]+1,q[_-1][E-1]+$),_>1&&E>1&&A[_-1]===j[E-2]&&A[_-2]===j[E-1])q[_][E]=Math.min(q[_][E],q[_-2][E-2]+1)}return q[A.length][j.length]}function _q(A,j){if(!j||j.length===0)return"";j=Array.from(new Set(j));let q=A.startsWith("--");if(q)A=A.slice(2),j=j.map((k)=>k.slice(2));let E=[],_=3,$=0.4;if(j.forEach((k)=>{if(k.length<=1)return;let I=Eq(A,k),G=Math.max(A.length,k.length);if((G-I)/G>$){if(I<_)_=I,E=[k];else if(I===_)E.push(k)}}),E.sort((k,I)=>k.localeCompare(I)),q)E=E.map((k)=>`--${k}`);if(E.length>1)return`
(Did you mean one of ${E.join(", ")}?)`;if(E.length===1)return`
(Did you mean ${E[0]}?)`;return""}$q.suggestSimilar=_q});var Zj=Q((Fq)=>{var Iq=T("events").EventEmitter,xA=T("child_process"),V=T("path"),bA=T("fs"),J=T("process"),{Argument:Bq,humanReadableArgName:Gq}=KA(),{CommanderError:hA}=p(),{Help:Rq}=OA(),{Option:Tj,splitOptionFlags:Lq,DualOptions:Uq}=CA(),{suggestSimilar:Yj}=Jj();class uA extends Iq{constructor(A){super();this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=A||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:(j)=>J.stdout.write(j),writeErr:(j)=>J.stderr.write(j),getOutHelpWidth:()=>J.stdout.isTTY?J.stdout.columns:void 0,getErrHelpWidth:()=>J.stderr.isTTY?J.stderr.columns:void 0,outputError:(j,q)=>q(j)},this._hidden=!1,this._hasHelpOption=!0,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._addImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command",this._helpConfiguration={}}copyInheritedSettings(A){return this._outputConfiguration=A._outputConfiguration,this._hasHelpOption=A._hasHelpOption,this._helpFlags=A._helpFlags,this._helpDescription=A._helpDescription,this._helpShortFlag=A._helpShortFlag,this._helpLongFlag=A._helpLongFlag,this._helpCommandName=A._helpCommandName,this._helpCommandnameAndArgs=A._helpCommandnameAndArgs,this._helpCommandDescription=A._helpCommandDescription,this._helpConfiguration=A._helpConfiguration,this._exitCallback=A._exitCallback,this._storeOptionsAsProperties=A._storeOptionsAsProperties,this._combineFlagAndOptionalValue=A._combineFlagAndOptionalValue,this._allowExcessArguments=A._allowExcessArguments,this._enablePositionalOptions=A._enablePositionalOptions,this._showHelpAfterError=A._showHelpAfterError,this._showSuggestionAfterError=A._showSuggestionAfterError,this}_getCommandAndAncestors(){let A=[];for(let j=this;j;j=j.parent)A.push(j);return A}command(A,j,q){let E=j,_=q;if(typeof E==="object"&&E!==null)_=E,E=null;_=_||{};let[,$,k]=A.match(/([^ ]+) *(.*)/),I=this.createCommand($);if(E)I.description(E),I._executableHandler=!0;if(_.isDefault)this._defaultCommandName=I._name;if(I._hidden=!!(_.noHelp||_.hidden),I._executableFile=_.executableFile||null,k)I.arguments(k);if(this.commands.push(I),I.parent=this,I.copyInheritedSettings(this),E)return this;return I}createCommand(A){return new uA(A)}createHelp(){return Object.assign(new Rq,this.configureHelp())}configureHelp(A){if(A===void 0)return this._helpConfiguration;return this._helpConfiguration=A,this}configureOutput(A){if(A===void 0)return this._outputConfiguration;return Object.assign(this._outputConfiguration,A),this}showHelpAfterError(A=!0){if(typeof A!=="string")A=!!A;return this._showHelpAfterError=A,this}showSuggestionAfterError(A=!0){return this._showSuggestionAfterError=!!A,this}addCommand(A,j){if(!A._name)throw new Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);if(j=j||{},j.isDefault)this._defaultCommandName=A._name;if(j.noHelp||j.hidden)A._hidden=!0;return this.commands.push(A),A.parent=this,this}createArgument(A,j){return new Bq(A,j)}argument(A,j,q,E){let _=this.createArgument(A,j);if(typeof q==="function")_.default(E).argParser(q);else _.default(q);return this.addArgument(_),this}arguments(A){return A.trim().split(/ +/).forEach((j)=>{this.argument(j)}),this}addArgument(A){let j=this.registeredArguments.slice(-1)[0];if(j&&j.variadic)throw new Error(`only the last argument can be variadic '${j.name()}'`);if(A.required&&A.defaultValue!==void 0&&A.parseArg===void 0)throw new Error(`a default value for a required argument is never used: '${A.name()}'`);return this.registeredArguments.push(A),this}addHelpCommand(A,j){if(A===!1)this._addImplicitHelpCommand=!1;else{if(this._addImplicitHelpCommand=!0,typeof A==="string")this._helpCommandName=A.split(" ")[0],this._helpCommandnameAndArgs=A;this._helpCommandDescription=j||this._helpCommandDescription}return this}_hasImplicitHelpCommand(){if(this._addImplicitHelpCommand===void 0)return this.commands.length&&!this._actionHandler&&!this._findCommand("help");return this._addImplicitHelpCommand}hook(A,j){let q=["preSubcommand","preAction","postAction"];if(!q.includes(A))throw new Error(`Unexpected value for event passed to hook : '${A}'.
Expecting one of '${q.join("', '")}'`);if(this._lifeCycleHooks[A])this._lifeCycleHooks[A].push(j);else this._lifeCycleHooks[A]=[j];return this}exitOverride(A){if(A)this._exitCallback=A;else this._exitCallback=(j)=>{if(j.code!=="commander.executeSubCommandAsync")throw j};return this}_exit(A,j,q){if(this._exitCallback)this._exitCallback(new hA(A,j,q));J.exit(A)}action(A){let j=(q)=>{let E=this.registeredArguments.length,_=q.slice(0,E);if(this._storeOptionsAsProperties)_[E]=this;else _[E]=this.opts();return _.push(this),A.apply(this,_)};return this._actionHandler=j,this}createOption(A,j){return new Tj(A,j)}_callParseArg(A,j,q,E){try{return A.parseArg(j,q)}catch(_){if(_.code==="commander.invalidArgument"){let $=`${E} ${_.message}`;this.error($,{exitCode:_.exitCode,code:_.code})}throw _}}addOption(A){let j=A.name(),q=A.attributeName();if(A.negate){let _=A.long.replace(/^--no-/,"--");if(!this._findOption(_))this.setOptionValueWithSource(q,A.defaultValue===void 0?!0:A.defaultValue,"default")}else if(A.defaultValue!==void 0)this.setOptionValueWithSource(q,A.defaultValue,"default");this.options.push(A);let E=(_,$,k)=>{if(_==null&&A.presetArg!==void 0)_=A.presetArg;let I=this.getOptionValue(q);if(_!==null&&A.parseArg)_=this._callParseArg(A,_,I,$);else if(_!==null&&A.variadic)_=A._concatValue(_,I);if(_==null)if(A.negate)_=!1;else if(A.isBoolean()||A.optional)_=!0;else _="";this.setOptionValueWithSource(q,_,k)};if(this.on("option:"+j,(_)=>{let $=`error: option '${A.flags}' argument '${_}' is invalid.`;E(_,$,"cli")}),A.envVar)this.on("optionEnv:"+j,(_)=>{let $=`error: option '${A.flags}' value '${_}' from env '${A.envVar}' is invalid.`;E(_,$,"env")});return this}_optionEx(A,j,q,E,_){if(typeof j==="object"&&j instanceof Tj)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");let $=this.createOption(j,q);if($.makeOptionMandatory(!!A.mandatory),typeof E==="function")$.default(_).argParser(E);else if(E instanceof RegExp){let k=E;E=(I,G)=>{let R=k.exec(I);return R?R[0]:G},$.default(_).argParser(E)}else $.default(E);return this.addOption($)}option(A,j,q,E){return this._optionEx({},A,j,q,E)}requiredOption(A,j,q,E){return this._optionEx({mandatory:!0},A,j,q,E)}combineFlagAndOptionalValue(A=!0){return this._combineFlagAndOptionalValue=!!A,this}allowUnknownOption(A=!0){return this._allowUnknownOption=!!A,this}allowExcessArguments(A=!0){return this._allowExcessArguments=!!A,this}enablePositionalOptions(A=!0){return this._enablePositionalOptions=!!A,this}passThroughOptions(A=!0){if(this._passThroughOptions=!!A,!!this.parent&&A&&!this.parent._enablePositionalOptions)throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)");return this}storeOptionsAsProperties(A=!0){if(this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this._storeOptionsAsProperties=!!A,this}getOptionValue(A){if(this._storeOptionsAsProperties)return this[A];return this._optionValues[A]}setOptionValue(A,j){return this.setOptionValueWithSource(A,j,void 0)}setOptionValueWithSource(A,j,q){if(this._storeOptionsAsProperties)this[A]=j;else this._optionValues[A]=j;return this._optionValueSources[A]=q,this}getOptionValueSource(A){return this._optionValueSources[A]}getOptionValueSourceWithGlobals(A){let j;return this._getCommandAndAncestors().forEach((q)=>{if(q.getOptionValueSource(A)!==void 0)j=q.getOptionValueSource(A)}),j}_prepareUserArgs(A,j){if(A!==void 0&&!Array.isArray(A))throw new Error("first parameter to parse must be array or undefined");if(j=j||{},A===void 0){if(A=J.argv,J.versions&&J.versions.electron)j.from="electron"}this.rawArgs=A.slice();let q;switch(j.from){case void 0:case"node":this._scriptPath=A[1],q=A.slice(2);break;case"electron":if(J.defaultApp)this._scriptPath=A[1],q=A.slice(2);else q=A.slice(1);break;case"user":q=A.slice(0);break;default:throw new Error(`unexpected parse option { from: '${j.from}' }`)}if(!this._name&&this._scriptPath)this.nameFromFilename(this._scriptPath);return this._name=this._name||"program",q}parse(A,j){let q=this._prepareUserArgs(A,j);return this._parseCommand([],q),this}async parseAsync(A,j){let q=this._prepareUserArgs(A,j);return await this._parseCommand([],q),this}_executeSubCommand(A,j){j=j.slice();let q=!1,E=[".js",".ts",".tsx",".mjs",".cjs"];function _(R,U){let P=V.resolve(R,U);if(bA.existsSync(P))return P;if(E.includes(V.extname(U)))return;let K=E.find((X)=>bA.existsSync(`${P}${X}`));if(K)return`${P}${K}`;return}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let $=A._executableFile||`${this._name}-${A._name}`,k=this._executableDir||"";if(this._scriptPath){let R;try{R=bA.realpathSync(this._scriptPath)}catch(U){R=this._scriptPath}k=V.resolve(V.dirname(R),k)}if(k){let R=_(k,$);if(!R&&!A._executableFile&&this._scriptPath){let U=V.basename(this._scriptPath,V.extname(this._scriptPath));if(U!==this._name)R=_(k,`${U}-${A._name}`)}$=R||$}q=E.includes(V.extname($));let I;if(J.platform!=="win32")if(q)j.unshift($),j=zj(J.execArgv).concat(j),I=xA.spawn(J.argv[0],j,{stdio:"inherit"});else I=xA.spawn($,j,{stdio:"inherit"});else j.unshift($),j=zj(J.execArgv).concat(j),I=xA.spawn(J.execPath,j,{stdio:"inherit"});if(!I.killed)["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach((U)=>{J.on(U,()=>{if(I.killed===!1&&I.exitCode===null)I.kill(U)})});let G=this._exitCallback;if(!G)I.on("close",J.exit.bind(J));else I.on("close",()=>{G(new hA(J.exitCode||0,"commander.executeSubCommandAsync","(close)"))});I.on("error",(R)=>{if(R.code==="ENOENT"){let U=k?`searched for local subcommand relative to directory '${k}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",P=`'${$}' does not exist
 - if '${A._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${U}`;throw new Error(P)}else if(R.code==="EACCES")throw new Error(`'${$}' not executable`);if(!G)J.exit(1);else{let U=new hA(1,"commander.executeSubCommandAsync","(error)");U.nestedError=R,G(U)}}),this.runningCommand=I}_dispatchSubcommand(A,j,q){let E=this._findCommand(A);if(!E)this.help({error:!0});let _;return _=this._chainOrCallSubCommandHook(_,E,"preSubcommand"),_=this._chainOrCall(_,()=>{if(E._executableHandler)this._executeSubCommand(E,j.concat(q));else return E._parseCommand(j,q)}),_}_dispatchHelpCommand(A){if(!A)this.help();let j=this._findCommand(A);if(j&&!j._executableHandler)j.help();return this._dispatchSubcommand(A,[],[this._helpLongFlag||this._helpShortFlag])}_checkNumberOfArguments(){if(this.registeredArguments.forEach((A,j)=>{if(A.required&&this.args[j]==null)this.missingArgument(A.name())}),this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic)return;if(this.args.length>this.registeredArguments.length)this._excessArguments(this.args)}_processArguments(){let A=(q,E,_)=>{let $=E;if(E!==null&&q.parseArg){let k=`error: command-argument value '${E}' is invalid for argument '${q.name()}'.`;$=this._callParseArg(q,E,_,k)}return $};this._checkNumberOfArguments();let j=[];this.registeredArguments.forEach((q,E)=>{let _=q.defaultValue;if(q.variadic){if(E<this.args.length){if(_=this.args.slice(E),q.parseArg)_=_.reduce(($,k)=>{return A(q,k,$)},q.defaultValue)}else if(_===void 0)_=[]}else if(E<this.args.length){if(_=this.args[E],q.parseArg)_=A(q,_,q.defaultValue)}j[E]=_}),this.processedArgs=j}_chainOrCall(A,j){if(A&&A.then&&typeof A.then==="function")return A.then(()=>j());return j()}_chainOrCallHooks(A,j){let q=A,E=[];if(this._getCommandAndAncestors().reverse().filter((_)=>_._lifeCycleHooks[j]!==void 0).forEach((_)=>{_._lifeCycleHooks[j].forEach(($)=>{E.push({hookedCommand:_,callback:$})})}),j==="postAction")E.reverse();return E.forEach((_)=>{q=this._chainOrCall(q,()=>{return _.callback(_.hookedCommand,this)})}),q}_chainOrCallSubCommandHook(A,j,q){let E=A;if(this._lifeCycleHooks[q]!==void 0)this._lifeCycleHooks[q].forEach((_)=>{E=this._chainOrCall(E,()=>{return _(this,j)})});return E}_parseCommand(A,j){let q=this.parseOptions(j);if(this._parseOptionsEnv(),this._parseOptionsImplied(),A=A.concat(q.operands),j=q.unknown,this.args=A.concat(j),A&&this._findCommand(A[0]))return this._dispatchSubcommand(A[0],A.slice(1),j);if(this._hasImplicitHelpCommand()&&A[0]===this._helpCommandName)return this._dispatchHelpCommand(A[1]);if(this._defaultCommandName)return Qj(this,j),this._dispatchSubcommand(this._defaultCommandName,A,j);if(this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName)this.help({error:!0});Qj(this,q.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let E=()=>{if(q.unknown.length>0)this.unknownOption(q.unknown[0])},_=`command:${this.name()}`;if(this._actionHandler){E(),this._processArguments();let $;if($=this._chainOrCallHooks($,"preAction"),$=this._chainOrCall($,()=>this._actionHandler(this.processedArgs)),this.parent)$=this._chainOrCall($,()=>{this.parent.emit(_,A,j)});return $=this._chainOrCallHooks($,"postAction"),$}if(this.parent&&this.parent.listenerCount(_))E(),this._processArguments(),this.parent.emit(_,A,j);else if(A.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",A,j);if(this.listenerCount("command:*"))this.emit("command:*",A,j);else if(this.commands.length)this.unknownCommand();else E(),this._processArguments()}else if(this.commands.length)E(),this.help({error:!0});else E(),this._processArguments()}_findCommand(A){if(!A)return;return this.commands.find((j)=>j._name===A||j._aliases.includes(A))}_findOption(A){return this.options.find((j)=>j.is(A))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach((A)=>{A.options.forEach((j)=>{if(j.mandatory&&A.getOptionValue(j.attributeName())===void 0)A.missingMandatoryOptionValue(j)})})}_checkForConflictingLocalOptions(){let A=this.options.filter((q)=>{let E=q.attributeName();if(this.getOptionValue(E)===void 0)return!1;return this.getOptionValueSource(E)!=="default"});A.filter((q)=>q.conflictsWith.length>0).forEach((q)=>{let E=A.find((_)=>q.conflictsWith.includes(_.attributeName()));if(E)this._conflictingOption(q,E)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach((A)=>{A._checkForConflictingLocalOptions()})}parseOptions(A){let j=[],q=[],E=j,_=A.slice();function $(I){return I.length>1&&I[0]==="-"}let k=null;while(_.length){let I=_.shift();if(I==="--"){if(E===q)E.push(I);E.push(..._);break}if(k&&!$(I)){this.emit(`option:${k.name()}`,I);continue}if(k=null,$(I)){let G=this._findOption(I);if(G){if(G.required){let R=_.shift();if(R===void 0)this.optionMissingArgument(G);this.emit(`option:${G.name()}`,R)}else if(G.optional){let R=null;if(_.length>0&&!$(_[0]))R=_.shift();this.emit(`option:${G.name()}`,R)}else this.emit(`option:${G.name()}`);k=G.variadic?G:null;continue}}if(I.length>2&&I[0]==="-"&&I[1]!=="-"){let G=this._findOption(`-${I[1]}`);if(G){if(G.required||G.optional&&this._combineFlagAndOptionalValue)this.emit(`option:${G.name()}`,I.slice(2));else this.emit(`option:${G.name()}`),_.unshift(`-${I.slice(2)}`);continue}}if(/^--[^=]+=/.test(I)){let G=I.indexOf("="),R=this._findOption(I.slice(0,G));if(R&&(R.required||R.optional)){this.emit(`option:${R.name()}`,I.slice(G+1));continue}}if($(I))E=q;if((this._enablePositionalOptions||this._passThroughOptions)&&j.length===0&&q.length===0){if(this._findCommand(I)){if(j.push(I),_.length>0)q.push(..._);break}else if(I===this._helpCommandName&&this._hasImplicitHelpCommand()){if(j.push(I),_.length>0)j.push(..._);break}else if(this._defaultCommandName){if(q.push(I),_.length>0)q.push(..._);break}}if(this._passThroughOptions){if(E.push(I),_.length>0)E.push(..._);break}E.push(I)}return{operands:j,unknown:q}}opts(){if(this._storeOptionsAsProperties){let A={},j=this.options.length;for(let q=0;q<j;q++){let E=this.options[q].attributeName();A[E]=E===this._versionOptionName?this._version:this[E]}return A}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((A,j)=>Object.assign(A,j.opts()),{})}error(A,j){if(this._outputConfiguration.outputError(`${A}
`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError==="string")this._outputConfiguration.writeErr(`${this._showHelpAfterError}
`);else if(this._showHelpAfterError)this._outputConfiguration.writeErr(`
`),this.outputHelp({error:!0});let q=j||{},E=q.exitCode||1,_=q.code||"commander.error";this._exit(E,_,A)}_parseOptionsEnv(){this.options.forEach((A)=>{if(A.envVar&&A.envVar in J.env){let j=A.attributeName();if(this.getOptionValue(j)===void 0||["default","config","env"].includes(this.getOptionValueSource(j)))if(A.required||A.optional)this.emit(`optionEnv:${A.name()}`,J.env[A.envVar]);else this.emit(`optionEnv:${A.name()}`)}})}_parseOptionsImplied(){let A=new Uq(this.options),j=(q)=>{return this.getOptionValue(q)!==void 0&&!["default","implied"].includes(this.getOptionValueSource(q))};this.options.filter((q)=>q.implied!==void 0&&j(q.attributeName())&&A.valueFromOption(this.getOptionValue(q.attributeName()),q)).forEach((q)=>{Object.keys(q.implied).filter((E)=>!j(E)).forEach((E)=>{this.setOptionValueWithSource(E,q.implied[E],"implied")})})}missingArgument(A){let j=`error: missing required argument '${A}'`;this.error(j,{code:"commander.missingArgument"})}optionMissingArgument(A){let j=`error: option '${A.flags}' argument missing`;this.error(j,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(A){let j=`error: required option '${A.flags}' not specified`;this.error(j,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(A,j){let q=($)=>{let k=$.attributeName(),I=this.getOptionValue(k),G=this.options.find((U)=>U.negate&&k===U.attributeName()),R=this.options.find((U)=>!U.negate&&k===U.attributeName());if(G&&(G.presetArg===void 0&&I===!1||G.presetArg!==void 0&&I===G.presetArg))return G;return R||$},E=($)=>{let k=q($),I=k.attributeName();if(this.getOptionValueSource(I)==="env")return`environment variable '${k.envVar}'`;return`option '${k.flags}'`},_=`error: ${E(A)} cannot be used with ${E(j)}`;this.error(_,{code:"commander.conflictingOption"})}unknownOption(A){if(this._allowUnknownOption)return;let j="";if(A.startsWith("--")&&this._showSuggestionAfterError){let E=[],_=this;do{let $=_.createHelp().visibleOptions(_).filter((k)=>k.long).map((k)=>k.long);E=E.concat($),_=_.parent}while(_&&!_._enablePositionalOptions);j=Yj(A,E)}let q=`error: unknown option '${A}'${j}`;this.error(q,{code:"commander.unknownOption"})}_excessArguments(A){if(this._allowExcessArguments)return;let j=this.registeredArguments.length,q=j===1?"":"s",_=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${j} argument${q} but got ${A.length}.`;this.error(_,{code:"commander.excessArguments"})}unknownCommand(){let A=this.args[0],j="";if(this._showSuggestionAfterError){let E=[];this.createHelp().visibleCommands(this).forEach((_)=>{if(E.push(_.name()),_.alias())E.push(_.alias())}),j=Yj(A,E)}let q=`error: unknown command '${A}'${j}`;this.error(q,{code:"commander.unknownCommand"})}version(A,j,q){if(A===void 0)return this._version;this._version=A,j=j||"-V, --version",q=q||"output the version number";let E=this.createOption(j,q);return this._versionOptionName=E.attributeName(),this.options.push(E),this.on("option:"+E.name(),()=>{this._outputConfiguration.writeOut(`${A}
`),this._exit(0,"commander.version",A)}),this}description(A,j){if(A===void 0&&j===void 0)return this._description;if(this._description=A,j)this._argsDescription=j;return this}summary(A){if(A===void 0)return this._summary;return this._summary=A,this}alias(A){if(A===void 0)return this._aliases[0];let j=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler)j=this.commands[this.commands.length-1];if(A===j._name)throw new Error("Command alias can't be the same as its name");return j._aliases.push(A),this}aliases(A){if(A===void 0)return this._aliases;return A.forEach((j)=>this.alias(j)),this}usage(A){if(A===void 0){if(this._usage)return this._usage;let j=this.registeredArguments.map((q)=>{return Gq(q)});return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?j:[]).join(" ")}return this._usage=A,this}name(A){if(A===void 0)return this._name;return this._name=A,this}nameFromFilename(A){return this._name=V.basename(A,V.extname(A)),this}executableDir(A){if(A===void 0)return this._executableDir;return this._executableDir=A,this}helpInformation(A){let j=this.createHelp();if(j.helpWidth===void 0)j.helpWidth=A&&A.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth();return j.formatHelp(this,j)}_getHelpContext(A){A=A||{};let j={error:!!A.error},q;if(j.error)q=(E)=>this._outputConfiguration.writeErr(E);else q=(E)=>this._outputConfiguration.writeOut(E);return j.write=A.write||q,j.command=this,j}outputHelp(A){let j;if(typeof A==="function")j=A,A=void 0;let q=this._getHelpContext(A);this._getCommandAndAncestors().reverse().forEach((_)=>_.emit("beforeAllHelp",q)),this.emit("beforeHelp",q);let E=this.helpInformation(q);if(j){if(E=j(E),typeof E!=="string"&&!Buffer.isBuffer(E))throw new Error("outputHelp callback must return a string or a Buffer")}if(q.write(E),this._helpLongFlag)this.emit(this._helpLongFlag);this.emit("afterHelp",q),this._getCommandAndAncestors().forEach((_)=>_.emit("afterAllHelp",q))}helpOption(A,j){if(typeof A==="boolean")return this._hasHelpOption=A,this;this._helpFlags=A||this._helpFlags,this._helpDescription=j||this._helpDescription;let q=Lq(this._helpFlags);return this._helpShortFlag=q.shortFlag,this._helpLongFlag=q.longFlag,this}help(A){this.outputHelp(A);let j=J.exitCode||0;if(j===0&&A&&typeof A!=="function"&&A.error)j=1;this._exit(j,"commander.help","(outputHelp)")}addHelpText(A,j){let q=["beforeAll","before","after","afterAll"];if(!q.includes(A))throw new Error(`Unexpected value for position to addHelpText.
Expecting one of '${q.join("', '")}'`);let E=`${A}Help`;return this.on(E,(_)=>{let $;if(typeof j==="function")$=j({error:_.error,command:_.command});else $=j;if($)_.write(`${$}
`)}),this}}function Qj(A,j){if(A._hasHelpOption&&j.find((E)=>E===A._helpLongFlag||E===A._helpShortFlag))A.outputHelp(),A._exit(0,"commander.helpDisplayed","(outputHelp)")}function zj(A){return A.map((j)=>{if(!j.startsWith("--inspect"))return j;let q,E="127.0.0.1",_="9229",$;if(($=j.match(/^(--inspect(-brk)?)$/))!==null)q=$[1];else if(($=j.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null)if(q=$[1],/^\d+$/.test($[3]))_=$[3];else E=$[3];else if(($=j.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null)q=$[1],E=$[3],_=$[4];if(q&&_!=="0")return`${q}=${E}:${parseInt(_)+1}`;return j})}Fq.Command=uA});var Dj=Q((W,Wj)=>{var{Argument:Kq}=KA(),{Command:Sj}=Zj(),{CommanderError:Pq,InvalidArgumentError:Nj}=p(),{Help:Xq}=OA(),{Option:Jq}=CA();W=Wj.exports=new Sj;W.program=W;W.Command=Sj;W.Option=Jq;W.Argument=Kq;W.Help=Xq;W.CommanderError=Pq;W.InvalidArgumentError=Nj;W.InvalidOptionArgumentError=Nj});var pA=Q((__,h)=>{var __dirname="/Users/maxim/Projects/Private/Sites/cryptit/node_modules/argon2-browser/dist",B=typeof self!=="undefined"&&typeof self.Module!=="undefined"?self.Module:{},Tq=B,o={},O;for(O in B)if(B.hasOwnProperty(O))o[O]=B[O];var a=[],wj="./this.program",iA=function(A,j){throw j},TA=!1,C=!1,nA=!1,Oj=!1;TA=typeof window==="object";C=typeof importScripts==="function";nA=typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string";Oj=!TA&&!nA&&!C;var N="";function Yq(A){if(B.locateFile)return B.locateFile(A,N);return N+A}var PA,mA,e,Qq,gA,cA;if(nA){if(C)N=T("path").dirname(N)+"/";else N=__dirname+"/";if(PA=function A(j,q){if(!gA)gA=T("fs");if(!cA)cA=T("path");return j=cA.normalize(j),gA.readFileSync(j,q?null:"utf8")},e=function A(j){var q=PA(j,!0);if(!q.buffer)q=new Uint8Array(q);return Mj(q.buffer),q},process.argv.length>1)wj=process.argv[1].replace(/\\/g,"/");if(a=process.argv.slice(2),typeof h!=="undefined")h.exports=B;process.on("uncaughtException",function(A){if(!(A instanceof AE))throw A}),process.on("unhandledRejection",EA),iA=function(A){process.exit(A)},B.inspect=function(){return"[Emscripten Module object]"}}else if(Oj){if(typeof read!="undefined")PA=function A(j){return read(j)};if(e=function A(j){var q;if(typeof readbuffer==="function")return new Uint8Array(readbuffer(j));return q=read(j,"binary"),Mj(typeof q==="object"),q},typeof scriptArgs!="undefined")a=scriptArgs;else if(typeof arguments!="undefined")a=arguments;if(typeof quit==="function")iA=function(A){quit(A)};if(typeof print!=="undefined"){if(typeof console==="undefined")console={};console.log=print,console.warn=console.error=typeof printErr!=="undefined"?printErr:print}}else if(TA||C){if(C)N=self.location.href;else if(typeof document!=="undefined"&&document.currentScript)N=document.currentScript.src;if(N.indexOf("blob:")!==0)N=N.substr(0,N.lastIndexOf("/")+1);else N="";{if(PA=function(A){var j=new XMLHttpRequest;return j.open("GET",A,!1),j.send(null),j.responseText},C)e=function(A){var j=new XMLHttpRequest;return j.open("GET",A,!1),j.responseType="arraybuffer",j.send(null),new Uint8Array(j.response)};mA=function(A,j,q){var E=new XMLHttpRequest;E.open("GET",A,!0),E.responseType="arraybuffer",E.onload=function(){if(E.status==200||E.status==0&&E.response){j(E.response);return}q()},E.onerror=q,E.send(null)}}Qq=function(A){document.title=A}}var j_=B.print||console.log.bind(console),s=B.printErr||console.warn.bind(console);for(O in o)if(o.hasOwnProperty(O))B[O]=o[O];o=null;if(B.arguments)a=B.arguments;if(B.thisProgram)wj=B.thisProgram;if(B.quit)iA=B.quit;var jA;if(B.wasmBinary)jA=B.wasmBinary;var q_=B.noExitRuntime||!0;if(typeof WebAssembly!=="object")EA("no native wasm support detected");var qA,Cj=!1,zq;function Mj(A,j){if(!A)EA("Assertion failed: "+j)}var Zq=0,Sq=1;function Nq(A,j){var q;if(j==Sq)q=sj(A.length);else q=pj(A.length);if(A.subarray||A.slice)b.set(A,q);else b.set(new Uint8Array(A),q);return q}var yj=typeof TextDecoder!=="undefined"?new TextDecoder("utf8"):void 0;function Wq(A,j,q){var E=j+q,_=j;while(A[_]&&!(_>=E))++_;if(_-j>16&&A.subarray&&yj)return yj.decode(A.subarray(j,_));else{var $="";while(j<_){var k=A[j++];if(!(k&128)){$+=String.fromCharCode(k);continue}var I=A[j++]&63;if((k&224)==192){$+=String.fromCharCode((k&31)<<6|I);continue}var G=A[j++]&63;if((k&240)==224)k=(k&15)<<12|I<<6|G;else k=(k&7)<<18|I<<12|G<<6|A[j++]&63;if(k<65536)$+=String.fromCharCode(k);else{var R=k-65536;$+=String.fromCharCode(55296|R>>10,56320|R&1023)}}}return $}function Dq(A,j){return A?Wq(b,A,j):""}function fq(A,j){if(A%j>0)A+=j-A%j;return A}var rA,xj,b,bj,hj,uj,gj,cj,lj;function ij(A){rA=A,B.HEAP8=xj=new Int8Array(A),B.HEAP16=bj=new Int16Array(A),B.HEAP32=uj=new Int32Array(A),B.HEAPU8=b=new Uint8Array(A),B.HEAPU16=hj=new Uint16Array(A),B.HEAPU32=gj=new Uint32Array(A),B.HEAPF32=cj=new Float32Array(A),B.HEAPF64=lj=new Float64Array(A)}var E_=B.INITIAL_MEMORY||16777216,XA,mj=[],nj=[],rj=[],Vq=!1;function Mq(){if(B.preRun){if(typeof B.preRun=="function")B.preRun=[B.preRun];while(B.preRun.length)wq(B.preRun.shift())}tA(mj)}function yq(){Vq=!0,tA(nj)}function vq(){if(B.postRun){if(typeof B.postRun=="function")B.postRun=[B.postRun];while(B.postRun.length)Cq(B.postRun.shift())}tA(rj)}function wq(A){mj.unshift(A)}function Oq(A){nj.unshift(A)}function Cq(A){rj.unshift(A)}var x=0,lA=null,AA=null;function xq(A){if(x++,B.monitorRunDependencies)B.monitorRunDependencies(x)}function bq(A){if(x--,B.monitorRunDependencies)B.monitorRunDependencies(x);if(x==0){if(lA!==null)clearInterval(lA),lA=null;if(AA){var j=AA;AA=null,j()}}}B.preloadedImages={};B.preloadedAudios={};function EA(A){if(B.onAbort)B.onAbort(A);A+="",s(A),Cj=!0,zq=1,A="abort("+A+"). Build with -s ASSERTIONS=1 for more info.";var j=new WebAssembly.RuntimeError(A);throw j}var hq="data:application/octet-stream;base64,";function tj(A){return A.startsWith(hq)}function dj(A){return A.startsWith("file://")}var z="argon2.wasm";if(!tj(z))z=Yq(z);function vj(A){try{if(A==z&&jA)return new Uint8Array(jA);if(e)return e(A);else throw"both async and sync fetching of the wasm failed"}catch(j){EA(j)}}function uq(){if(!jA&&(TA||C)){if(typeof fetch==="function"&&!dj(z))return fetch(z,{credentials:"same-origin"}).then(function(A){if(!A.ok)throw"failed to load wasm binary file at '"+z+"'";return A.arrayBuffer()}).catch(function(){return vj(z)});else if(mA)return new Promise(function(A,j){mA(z,function(q){A(new Uint8Array(q))},j)})}return Promise.resolve().then(function(){return vj(z)})}function gq(){var A={a:mq};function j(k,I){var G=k.exports;B.asm=G,qA=B.asm.c,ij(qA.buffer),XA=B.asm.k,Oq(B.asm.d),bq("wasm-instantiate")}xq("wasm-instantiate");function q(k){j(k.instance)}function E(k){return uq().then(function(I){var G=WebAssembly.instantiate(I,A);return G}).then(k,function(I){s("failed to asynchronously prepare wasm: "+I),EA(I)})}function _(){if(!jA&&typeof WebAssembly.instantiateStreaming==="function"&&!tj(z)&&!dj(z)&&typeof fetch==="function")return fetch(z,{credentials:"same-origin"}).then(function(k){var I=WebAssembly.instantiateStreaming(k,A);return I.then(q,function(G){return s("wasm streaming compile failed: "+G),s("falling back to ArrayBuffer instantiation"),E(q)})});else return E(q)}if(B.instantiateWasm)try{var $=B.instantiateWasm(A,j);return $}catch(k){return s("Module.instantiateWasm callback failed with error: "+k),!1}return _(),{}}function tA(A){while(A.length>0){var j=A.shift();if(typeof j=="function"){j(B);continue}var q=j.func;if(typeof q==="number")if(j.arg===void 0)XA.get(q)();else XA.get(q)(j.arg);else q(j.arg===void 0?null:j.arg)}}function cq(A,j,q){b.copyWithin(A,j,j+q)}function lq(A){try{return qA.grow(A-rA.byteLength+65535>>>16),ij(qA.buffer),1}catch(j){}}function iq(A){var j=b.length;A=A>>>0;var q=2147418112;if(A>q)return!1;for(var E=1;E<=4;E*=2){var _=j*(1+0.2/E);_=Math.min(_,A+100663296);var $=Math.min(q,fq(Math.max(A,_),65536)),k=lq($);if(k)return!0}return!1}var mq={a:cq,b:iq},nq=gq(),rq=B.___wasm_call_ctors=function(){return(rq=B.___wasm_call_ctors=B.asm.d).apply(null,arguments)},tq=B._argon2_hash=function(){return(tq=B._argon2_hash=B.asm.e).apply(null,arguments)},pj=B._malloc=function(){return(pj=B._malloc=B.asm.f).apply(null,arguments)},dq=B._free=function(){return(dq=B._free=B.asm.g).apply(null,arguments)},pq=B._argon2_verify=function(){return(pq=B._argon2_verify=B.asm.h).apply(null,arguments)},sq=B._argon2_error_message=function(){return(sq=B._argon2_error_message=B.asm.i).apply(null,arguments)},oq=B._argon2_encodedlen=function(){return(oq=B._argon2_encodedlen=B.asm.j).apply(null,arguments)},aq=B._argon2_hash_ext=function(){return(aq=B._argon2_hash_ext=B.asm.l).apply(null,arguments)},eq=B._argon2_verify_ext=function(){return(eq=B._argon2_verify_ext=B.asm.m).apply(null,arguments)},sj=B.stackAlloc=function(){return(sj=B.stackAlloc=B.asm.n).apply(null,arguments)};B.allocate=Nq;B.UTF8ToString=Dq;B.ALLOC_NORMAL=Zq;var JA;function AE(A){this.name="ExitStatus",this.message="Program terminated with exit("+A+")",this.status=A}AA=function A(){if(!JA)dA();if(!JA)AA=A};function dA(A){if(A=A||a,x>0)return;if(Mq(),x>0)return;function j(){if(JA)return;if(JA=!0,B.calledRun=!0,Cj)return;if(yq(),B.onRuntimeInitialized)B.onRuntimeInitialized();vq()}if(B.setStatus)B.setStatus("Running..."),setTimeout(function(){setTimeout(function(){B.setStatus("")},1),j()},1);else j()}B.run=dA;if(B.preInit){if(typeof B.preInit=="function")B.preInit=[B.preInit];while(B.preInit.length>0)B.preInit.pop()()}dA();if(typeof h!=="undefined")h.exports=B;B.unloadRuntime=function(){if(typeof self!=="undefined")delete self.Module;if(B=Tq=qA=XA=nq=rA=xj=b=bj=hj=uj=gj=cj=lj=void 0,typeof h!=="undefined")delete h.exports}});var oj=Q(($_,jE)=>{jE.exports="./cryptit.cli.wasm"});var ej=Q((aj,YA)=>{(function(A,j){if(typeof define==="function"&&define.amd)define([],j);else if(typeof YA==="object"&&YA.exports)YA.exports=j();else A.argon2=j()})(typeof self!=="undefined"?self:aj,function(){let A=typeof self!=="undefined"?self:this,j={Argon2d:0,Argon2i:1,Argon2id:2};function q(L){if(q._promise)return q._promise;if(q._module)return Promise.resolve(q._module);let F;if(A.process&&A.process.versions&&A.process.versions.node)F=_().then((H)=>new Promise((Y)=>{H.postRun=()=>Y(H)}));else F=$().then((H)=>{let Y=L?I(L):void 0;return E(H,Y)});return q._promise=F,F.then((H)=>{return q._module=H,delete q._promise,H})}function E(L,F){return new Promise((H)=>{return A.Module={wasmBinary:L,wasmMemory:F,postRun(){H(Module)}},_()})}function _(){if(A.loadArgon2WasmModule)return A.loadArgon2WasmModule();return Promise.resolve(pA())}function $(){if(A.loadArgon2WasmBinary)return A.loadArgon2WasmBinary();return Promise.resolve(oj()).then((F)=>{return k(F)})}function k(L){let F=atob(L),H=new Uint8Array(new ArrayBuffer(F.length));for(let Y=0;Y<F.length;Y++)H[Y]=F.charCodeAt(Y);return H}function I(L){let g=Math.min(Math.max(Math.ceil(L*1024/65536),256)+256,32767);return new WebAssembly.Memory({initial:g,maximum:32767})}function G(L,F){return L.allocate(F,"i8",L.ALLOC_NORMAL)}function R(L,F){let H=new Uint8Array([...F,0]);return G(L,H)}function U(L){if(typeof L!=="string")return L;if(typeof TextEncoder==="function")return new TextEncoder().encode(L);else if(typeof Buffer==="function")return Buffer.from(L);else throw new Error("Don't know how to encode UTF8")}function P(L){let F=L.mem||1024;return q(F).then((H)=>{let Y=L.time||1,n=L.parallelism||1,r=U(L.pass),g=R(H,r),yA=r.length,BA=U(L.salt),GA=R(H,BA),t=BA.length,c=L.type||j.Argon2d,D=H.allocate(new Array(L.hashLen||24),"i8",H.ALLOC_NORMAL),w=L.secret?G(H,L.secret):0,d=L.secret?L.secret.byteLength:0,S=L.ad?G(H,L.ad):0,w6=L.ad?L.ad.byteLength:0,RA=L.hashLen||24,Bj=H._argon2_encodedlen(Y,F,n,t,RA,c),vA=H.allocate(new Array(Bj+1),"i8",H.ALLOC_NORMAL),CE=19,l,LA;try{LA=H._argon2_hash_ext(Y,F,n,g,yA,GA,t,D,RA,vA,Bj,c,w,d,S,w6,19)}catch(i){l=i}let UA;if(LA===0&&!l){let i="",Gj=new Uint8Array(RA);for(let FA=0;FA<RA;FA++){let Rj=H.HEAP8[D+FA];Gj[FA]=Rj,i+=("0"+(255&Rj).toString(16)).slice(-2)}let O6=H.UTF8ToString(vA);UA={hash:Gj,hashHex:i,encoded:O6}}else{try{if(!l)l=H.UTF8ToString(H._argon2_error_message(LA))}catch(i){}UA={message:l,code:LA}}try{if(H._free(g),H._free(GA),H._free(D),H._free(vA),S)H._free(S);if(w)H._free(w)}catch(i){}if(l)throw UA;else return UA})}function K(L){return q().then((F)=>{let H=U(L.pass),Y=R(F,H),n=H.length,r=L.secret?G(F,L.secret):0,g=L.secret?L.secret.byteLength:0,yA=L.ad?G(F,L.ad):0,BA=L.ad?L.ad.byteLength:0,GA=U(L.encoded),t=R(F,GA),c=L.type;if(c===void 0){let S=L.encoded.split("$")[1];if(S)S=S.replace("a","A"),c=j[S]||j.Argon2d}let D,w;try{w=F._argon2_verify_ext(t,Y,n,r,g,yA,BA,c)}catch(S){D=S}let d;if(w||D){try{if(!D)D=F.UTF8ToString(F._argon2_error_message(w))}catch(S){}d={message:D,code:w}}try{F._free(Y),F._free(t)}catch(S){}if(D)throw d;else return d})}function X(){if(q._module)q._module.unloadRuntime(),delete q._promise,delete q._module}return{ArgonType:j,hash:P,verify:K,unloadRuntime:X}})});var E6=Q((I_,q6)=>{var QA=/^[a-z0-9-]{1,32}$/,zA=/^[a-z0-9-]{1,32}$/,ZA=/^[a-zA-Z0-9/+.-]+$/,A6=/^([a-zA-Z0-9/+.-]+|)$/,qE=/^((-)?[1-9]\d*|0)$/,sA=/^v=(\d+)$/;function EE(A){return _A(A).map((j)=>[j,A[j]].join("=")).join(",")}function _E(A){let j={};return A.split(",").forEach((q)=>{let E=q.split("=");if(E.length<2)throw new TypeError("params must be in the format name=value");j[E.shift()]=E.join("=")}),j}function _A(A){return Object.keys(A)}function j6(A){if(typeof Object.values==="function")return Object.values(A);return _A(A).map((j)=>A[j])}function $E(A){let j=[""];if(typeof A!=="object"||A===null)throw new TypeError("opts must be an object");if(typeof A.id!=="string")throw new TypeError("id must be a string");if(!QA.test(A.id))throw new TypeError(`id must satisfy ${QA}`);if(j.push(A.id),typeof A.version!=="undefined"){if(typeof A.version!=="number"||A.version<0||!Number.isInteger(A.version))throw new TypeError("version must be a positive integer number");j.push(`v=${A.version}`)}if(typeof A.params!=="undefined"){if(typeof A.params!=="object"||A.params===null)throw new TypeError("params must be an object");let E=_A(A.params);if(!E.every((k)=>zA.test(k)))throw new TypeError(`params names must satisfy ${zA}`);E.forEach((k)=>{if(typeof A.params[k]==="number")A.params[k]=A.params[k].toString();else if(Buffer.isBuffer(A.params[k]))A.params[k]=A.params[k].toString("base64").split("=")[0]});let _=j6(A.params);if(!_.every((k)=>typeof k==="string"))throw new TypeError("params values must be strings");if(!_.every((k)=>ZA.test(k)))throw new TypeError(`params values must satisfy ${ZA}`);let $=EE(A.params);j.push($)}if(typeof A.salt!=="undefined"){if(!Buffer.isBuffer(A.salt))throw new TypeError("salt must be a Buffer");if(j.push(A.salt.toString("base64").split("=")[0]),typeof A.hash!=="undefined"){if(!Buffer.isBuffer(A.hash))throw new TypeError("hash must be a Buffer");j.push(A.hash.toString("base64").split("=")[0])}}return j.join("$")}function kE(A){if(typeof A!=="string"||A==="")throw new TypeError("pchstr must be a non-empty string");if(A[0]!=="$")throw new TypeError("pchstr must contain a $ as first char");let j=A.split("$");j.shift();let q=5;if(!sA.test(j[1]))q--;if(j.length>q)throw new TypeError(`pchstr contains too many fileds: ${j.length}/${q}`);let E=j.shift();if(!QA.test(E))throw new TypeError(`id must satisfy ${QA}`);let _;if(sA.test(j[0]))_=parseInt(j.shift().match(sA)[1],10);let $,k;if(A6.test(j[j.length-1]))if(j.length>1&&A6.test(j[j.length-2]))$=Buffer.from(j.pop(),"base64"),k=Buffer.from(j.pop(),"base64");else k=Buffer.from(j.pop(),"base64");let I;if(j.length>0){let R=j.pop();if(I=_E(R),!_A(I).every((K)=>zA.test(K)))throw new TypeError(`params names must satisfy ${zA}`);if(!j6(I).every((K)=>ZA.test(K)))throw new TypeError(`params values must satisfy ${ZA}`);_A(I).forEach((K)=>{I[K]=qE.test(I[K])?parseInt(I[K],10):I[K]})}if(j.length>0)throw new TypeError(`pchstr contains unrecognized fileds: ${j}`);let G={id:E};if(_)G.version=_;if(I)G.params=I;if(k)G.salt=k;if($)G.hash=$;return G}q6.exports={serialize:$E,deserialize:kE}});var T6=Q((B_,J6)=>{var I6=T("fs"),M=T("path"),B6=T("os"),G6=typeof __webpack_require__==="function"?__non_webpack_require__:T,IE=process.config&&process.config.variables||{},BE=!!process.env.PREBUILDS_ONLY,_6=process.versions.modules,oA=LE()?"electron":RE()?"node-webkit":"node",aA=process.env.npm_config_arch||B6.arch(),eA=process.env.npm_config_platform||B6.platform(),R6=process.env.LIBC||(UE(eA)?"musl":"glibc"),Aj=process.env.ARM_VERSION||(aA==="arm64"?"8":IE.arm_version)||"",L6=(process.versions.uv||"").split(".")[0];J6.exports=f;function f(A){return G6(f.resolve(A))}f.resolve=f.path=function(A){A=M.resolve(A||".");try{var j=G6(M.join(A,"package.json")).name.toUpperCase().replace(/-/g,"_");if(process.env[j+"_PREBUILD"])A=process.env[j+"_PREBUILD"]}catch(G){}if(!BE){var q=$6(M.join(A,"build/Release"),k6);if(q)return q;var E=$6(M.join(A,"build/Debug"),k6);if(E)return E}var _=I(A);if(_)return _;var $=I(M.dirname(process.execPath));if($)return $;var k=["platform="+eA,"arch="+aA,"runtime="+oA,"abi="+_6,"uv="+L6,Aj?"armv="+Aj:"","libc="+R6,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"",typeof __webpack_require__==="function"?"webpack=true":""].filter(Boolean).join(" ");throw new Error("No native build was found for "+k+`
    loaded from: `+A+`
`);function I(G){var R=jj(M.join(G,"prebuilds")).map(U6),U=R.filter(F6(eA,aA)).sort(H6)[0];if(!U)return;var P=M.join(G,"prebuilds",U.name),K=jj(P).map(K6),X=K.filter(P6(oA,_6)),L=X.sort(X6(oA))[0];if(L)return M.join(P,L.file)}};function jj(A){try{return I6.readdirSync(A)}catch(j){return[]}}function $6(A,j){var q=jj(A).filter(j);return q[0]&&M.join(A,q[0])}function k6(A){return/\.node$/.test(A)}function U6(A){var j=A.split("-");if(j.length!==2)return;var q=j[0],E=j[1].split("+");if(!q)return;if(!E.length)return;if(!E.every(Boolean))return;return{name:A,platform:q,architectures:E}}function F6(A,j){return function(q){if(q==null)return!1;if(q.platform!==A)return!1;return q.architectures.includes(j)}}function H6(A,j){return A.architectures.length-j.architectures.length}function K6(A){var j=A.split("."),q=j.pop(),E={file:A,specificity:0};if(q!=="node")return;for(var _=0;_<j.length;_++){var $=j[_];if($==="node"||$==="electron"||$==="node-webkit")E.runtime=$;else if($==="napi")E.napi=!0;else if($.slice(0,3)==="abi")E.abi=$.slice(3);else if($.slice(0,2)==="uv")E.uv=$.slice(2);else if($.slice(0,4)==="armv")E.armv=$.slice(4);else if($==="glibc"||$==="musl")E.libc=$;else continue;E.specificity++}return E}function P6(A,j){return function(q){if(q==null)return!1;if(q.runtime&&q.runtime!==A&&!GE(q))return!1;if(q.abi&&q.abi!==j&&!q.napi)return!1;if(q.uv&&q.uv!==L6)return!1;if(q.armv&&q.armv!==Aj)return!1;if(q.libc&&q.libc!==R6)return!1;return!0}}function GE(A){return A.runtime==="node"&&A.napi}function X6(A){return function(j,q){if(j.runtime!==q.runtime)return j.runtime===A?-1:1;else if(j.abi!==q.abi)return j.abi?-1:1;else if(j.specificity!==q.specificity)return j.specificity>q.specificity?-1:1;else return 0}}function RE(){return!!(process.versions&&process.versions.nw)}function LE(){if(process.versions&&process.versions.electron)return!0;if(process.env.ELECTRON_RUN_AS_NODE)return!0;return typeof window!=="undefined"&&window.process&&window.process.type==="renderer"}function UE(A){return A==="linux"&&I6.existsSync("/etc/alpine-release")}f.parseTags=K6;f.matchTags=P6;f.compareTags=X6;f.parseTuple=U6;f.matchTuple=F6;f.compareTuples=H6});var Y6=Q((R_,Ej)=>{var qj=typeof __webpack_require__==="function"?__non_webpack_require__:T;if(typeof qj.addon==="function")Ej.exports=qj.addon.bind(qj);else Ej.exports=T6()});var S6=Q((ZE,u)=>{var __dirname="/Users/maxim/Projects/Private/Sites/cryptit/node_modules/argon2",U_=T("node:assert"),{randomBytes:FE,timingSafeEqual:HE}=T("node:crypto"),{promisify:KE}=T("node:util"),{deserialize:Q6,serialize:PE}=E6(),XE=Y6(),{hash:z6}=XE(__dirname),JE=KE(FE);ZE.argon2d=0;ZE.argon2i=1;ZE.argon2id=2;var $A=Object.freeze({argon2d:0,argon2i:1,argon2id:2}),TE=Object.freeze({[$A.argon2d]:"argon2d",[$A.argon2i]:"argon2i",[$A.argon2id]:"argon2id"}),Z6={hashLength:32,timeCost:3,memoryCost:65536,parallelism:4,type:2,version:19};async function YE(A,j){let{raw:q,salt:E,..._}={...Z6,...j};if(_.hashLength>4294967295)throw new RangeError("Hash length is too large");if(_.memoryCost>4294967295)throw new RangeError("Memory cost is too large");if(_.timeCost>4294967295)throw new RangeError("Time cost is too large");if(_.parallelism>16777215)throw new RangeError("Parallelism is too large");E=E??await JE(16);let{hashLength:$,secret:k=Buffer.alloc(0),type:I,version:G,memoryCost:R,timeCost:U,parallelism:P,associatedData:K=Buffer.alloc(0)}=_,X=await z6({password:Buffer.from(A),salt:E,secret:k,data:K,hashLength:$,m:R,t:U,p:P,version:G,type:I});if(q)return X;return PE({id:TE[I],version:G,params:{m:R,t:U,p:P,...K.byteLength>0?{data:K}:{}},salt:E,hash:X})}ZE.hash=YE;function QE(A,j={}){let{memoryCost:q,timeCost:E,parallelism:_,version:$}={...Z6,...j},{version:k,params:{m:I,t:G,p:R}}=Q6(A);return+k!==+$||+I!==+q||+G!==+E||+R!==+_}ZE.needsRehash=QE;async function zE(A,j,q={}){let{id:E,..._}=Q6(A);if(!(E in $A))return!1;let{version:$=16,params:{m:k,t:I,p:G,data:R=""},salt:U,hash:P}=_,{secret:K=Buffer.alloc(0)}=q;return HE(await z6({password:Buffer.from(j),salt:U,secret:K,data:Buffer.from(R,"base64"),hashLength:P.byteLength,m:+k,t:+I,p:+G,version:+$,type:$A[E]}),P)}ZE.verify=zE});var fj=HA(Dj(),1),{program:mE,createCommand:nE,createArgument:rE,createOption:tE,CommanderError:dE,InvalidArgumentError:pE,InvalidOptionArgumentError:sE,Command:Vj,Argument:oE,Option:aE,Help:eE}=fj.default;import{createReadStream as f6,createWriteStream as V6}from"node:fs";import{stdin as Z,stdout as VA,stderr as fA,exit as Ij}from"node:process";import{Readable as vE,Writable as wE}from"node:stream";var SA=HA(ej(),1);async function N6(A,j,q,E){if(E==="node"){let _=await Promise.resolve().then(() => HA(S6(),1)),$=typeof A==="string"?Buffer.from(A,"utf8"):Buffer.from(A),k=Buffer.from(j),I=await _.hash($,{salt:k,timeCost:q.time,memoryCost:q.mem,parallelism:q.parallelism,hashLength:32,raw:!0,type:_.argon2id});return{hash:new Uint8Array(I)}}if(E==="browser"){let{hash:_}=await SA.hash({pass:A,salt:j,time:q.time,mem:q.mem,parallelism:q.parallelism,hashLen:32,type:SA.ArgonType.Argon2id});return{hash:_}}throw new Error(`Unsupported environment: ${E}`)}var y={saltLengths:{low:12,high:16},argon:{low:{time:5,mem:65536,parallelism:1},middle:{time:20,mem:65536,parallelism:1},high:{time:40,mem:65536,parallelism:1}},chunkSize:524288};class _j{provider;key=null;constructor(A){this.provider=A}async deriveKey(A,j,q){let E=this.provider.isNode?"node":"browser",{hash:_}=await N6(A,j,y.argon[q],E);this.key=await this.provider.subtle.importKey("raw",_,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async encryptChunk(A){if(!this.key)throw new Error("KEY_NOT_DERIVED");let j=this.provider.getRandomValues(new Uint8Array(12)),q=new Uint8Array(await this.provider.subtle.encrypt({name:"AES-GCM",iv:j},this.key,A)),E=new Uint8Array(j.length+q.length);return E.set(j),E.set(q,j.length),E}async decryptChunk(A){if(!this.key)throw new Error("KEY_NOT_DERIVED");let j=A.slice(0,12),q=A.slice(12),E=await this.provider.subtle.decrypt({name:"AES-GCM",iv:j},this.key,q);return new Uint8Array(E)}}var NA=1,W6=0;function WA(A,j,q){let E=W6<<5|(j==="high"?1:0)<<2|{low:0,middle:1,high:2}[A];return new Uint8Array([NA,E,...q])}function DA(A){if(A[0]!==NA)throw new Error("INVALID_HEADER");let j=A[1],q=j>>5,E=j>>2&1?"high":"low",_=j&3,$=["low","middle","high"][_],k=y.saltLengths[E],I=A.slice(2,2+k);return{version:q,difficulty:$,saltStrength:E,salt:I,headerLen:2+k}}class kA{engine;chunkSize;buffer=new Uint8Array(0);constructor(A,j=524288){this.engine=A;this.chunkSize=j}toTransformStream(){return new TransformStream({transform:async(A,j)=>{await this.transform(await this.asUint8Array(A),j)},flush:async(A)=>this.flush(A)})}async transform(A,j){let q=new Uint8Array(this.buffer.length+A.length);q.set(this.buffer),q.set(A,this.buffer.length);let E=0;while(q.length-E>=this.chunkSize){let _=q.slice(E,E+this.chunkSize);E+=this.chunkSize;let $=await this.engine.encryptChunk(_),k=new Uint8Array(4);new DataView(k.buffer).setUint32(0,$.length,!1);let I=new Uint8Array(k.length+$.length);I.set(k),I.set($,k.length),j.enqueue(I)}this.buffer=q.slice(E)}async flush(A){if(!this.buffer.length)return;let j=await this.engine.encryptChunk(this.buffer),q=new Uint8Array(4);new DataView(q.buffer).setUint32(0,j.length,!1);let E=new Uint8Array(4+j.length);E.set(q),E.set(j,4),A.enqueue(E),this.buffer=new Uint8Array(0)}async asUint8Array(A){if(A instanceof Uint8Array)return A;if(A instanceof ArrayBuffer)return new Uint8Array(A);return new Uint8Array(await A.arrayBuffer())}}class m{engine;chunkSize;buffer=new Uint8Array(0);constructor(A,j=524288){this.engine=A;this.chunkSize=j}toTransformStream(){return new TransformStream({transform:async(A,j)=>{await this.transform(await this.asUint8Array(A),j)},flush:async(A)=>this.flush(A)})}async transform(A,j){let q=new Uint8Array(this.buffer.length+A.length);q.set(this.buffer),q.set(A,this.buffer.length);let E=0;while(!0){if(q.length-E<4)break;let _=new DataView(q.buffer,q.byteOffset+E,4).getUint32(0,!1);if(q.length-E-4<_)break;E+=4;let $=q.slice(E,E+_);E+=_;let k=await this.engine.decryptChunk($);j.enqueue(k)}this.buffer=q.slice(E)}async flush(A){await this.transform(new Uint8Array(0),A),this.buffer=new Uint8Array(0)}async asUint8Array(A){if(A instanceof Uint8Array)return A;if(A instanceof ArrayBuffer)return new Uint8Array(A);return new Uint8Array(await A.arrayBuffer())}}class $j{engine;chunkSize;constructor(A,j=524288){this.engine=A;this.chunkSize=j}encryptionStream(){let A=new kA(this.engine,this.chunkSize).toTransformStream();return{writable:A.writable,readable:A.readable}}decryptionStream(A){let j=A;console.log(j);let q=new TransformStream({transform(_,$){if(j===0){$.enqueue(_);return}if(_.byteLength<=j){j-=_.byteLength;return}$.enqueue(_.slice(j)),j=0}}),E=new m(this.engine,this.chunkSize).toTransformStream();return{writable:q.writable,readable:q.readable.pipeThrough(E)}}async collect(A,j,q=null){let E=A.pipeThrough(j).getReader(),_=[];if(q?.length)_.push(q);while(!0){let{value:G,done:R}=await E.read();if(R)break;_.push(G)}let $=_.reduce((G,R)=>G+R.byteLength,0),k=new Uint8Array($),I=0;for(let G of _)k.set(G,I),I+=G.byteLength;return k}}class kj{provider;algo;difficulty;saltStrength;chunkSize;streamer;constructor(A,j={}){this.provider=A;this.algo=new _j(A),this.difficulty=j.difficulty??"middle",this.saltStrength=j.saltStrength??"high",this.chunkSize=j.chunkSize??y.chunkSize,this.streamer=new $j(this.algo,this.chunkSize)}async encryptText(A,j){let q=this.genSalt();await this.algo.deriveKey(j,q,this.difficulty);let E=await this.algo.encryptChunk(typeof A==="string"?new TextEncoder().encode(A):A),_=WA(this.difficulty,this.saltStrength,q);return Buffer.from([..._,...E]).toString("base64")}async decryptText(A,j){let q=Uint8Array.from(Buffer.from(A,"base64")),{difficulty:E,salt:_,headerLen:$}=DA(q);await this.algo.deriveKey(j,_,E);let k=await this.algo.decryptChunk(q.slice($));return new TextDecoder().decode(k)}async encryptFile(A,j){let q=this.genSalt();await this.algo.deriveKey(j,q,this.difficulty);let E=WA(this.difficulty,this.saltStrength,q),_=await this.streamer.collect(A.stream(),new kA(this.algo,this.chunkSize).toTransformStream(),E);return new Blob([_],{type:"application/octet-stream"})}async decryptFile(A,j){let E=new Uint8Array(await A.slice(0,2).arrayBuffer())[1]>>2&1?"high":"low",_=2+y.saltLengths[E],$=new Uint8Array(await A.slice(0,_).arrayBuffer()),k=DA($);await this.algo.deriveKey(j,k.salt,k.difficulty);let I=await this.streamer.collect(A.slice(_).stream(),new m(this.algo,this.chunkSize).toTransformStream());return new Blob([I],{type:"application/octet-stream"})}async createEncryptionStream(A){let j=this.genSalt();await this.algo.deriveKey(A,j,this.difficulty);let q=WA(this.difficulty,this.saltStrength,j),E=this.streamer.encryptionStream();return{header:q,writable:E.writable,readable:E.readable}}async createDecryptionStream(A){let j=this,q=new Uint8Array(0),E=!1,_;async function $(k,I){let G=k.getReader();while(!0){let{value:R,done:U}=await G.read();if(U)break;I.enqueue(R)}}return new TransformStream({async transform(k,I){if(!E){if(q=j.concat(q,k),q.length<2)return;let R=q[1]>>2&1?"high":"low",U=2+y.saltLengths[R];if(q.length<U)return;let P=q.slice(0,U),{salt:K,difficulty:X}=DA(P);await j.algo.deriveKey(A,K,X),_=new m(j.algo,j.chunkSize).toTransformStream(),$(_.readable,I);let L=q.slice(U);if(L.length){let F=_.writable.getWriter();await F.write(L),F.releaseLock()}E=!0;return}let G=_.writable.getWriter();await G.write(k),G.releaseLock()},async flush(){if(E){let k=_.writable.getWriter();await k.close(),k.releaseLock()}}})}concat(A,j){let q=new Uint8Array(A.length+j.length);return q.set(A,0),q.set(j,A.length),q}genSalt(){let A=y.saltLengths[this.saltStrength];return this.provider.getRandomValues(new Uint8Array(A))}}import{webcrypto as ME,randomFillSync as yE}from"node:crypto";var D6={subtle:ME.subtle,getRandomValues(A){return yE(A),A},isNode:!0};function IA(A){return new kj(D6,A)}var OE="0.2.0";async function MA(){if(!Z.isTTY)throw new Error("STDIN not a TTY; --pass required");fA.write("Passphrase: "),Z.setRawMode?.(!0),Z.resume(),Z.setEncoding("utf8");let A="";return new Promise((j)=>{function q(){Z.setRawMode?.(!1),Z.pause(),fA.write(`
`),Z.off("data",E),j(A)}function E(_){if(_==="\x03")Ij(130);if(_==="\r"||_===`
`)return q();if(_==="\b"||_===""){A=A.slice(0,-1);return}A+=_}Z.on("data",E)})}function M6(A){return vE.toWeb(A)}function y6(A){return wE.toWeb(A)}async function v6(){let A=[];for await(let j of Z)A.push(j);return Buffer.concat(A).toString("utf8")}var v=new Vj().name("cryptit").description("AES-GCM / Argon2 encryption utility").version(OE).option("-p, --pass <passphrase>","passphrase (prompt if omitted)").option("-d, --difficulty <level>","argon2 difficulty low|middle|high","middle").option("-s, --salt-strength <low|high>","salt length difficulty","high").option("-c, --chunk-size <bytes>","chunk size (bytes)",(A)=>Number(A),524288).option("-v, --verbose","increase verbosity",(A,j)=>(j??0)+1,0);v.command("encrypt <src>").description("encrypt file; use - for STDIN, --out - for STDOUT").option("-o, --out <file>","output file (default STDOUT)","-").action(async(A,j)=>{let q=v.opts(),E=IA({difficulty:q.difficulty,saltStrength:q.saltStrength,chunkSize:q.chunkSize}),_=q.pass??(Z.isTTY?await MA():(()=>{fA.write(`Use --pass when piping data via STDIN
`),Ij(1)})()),$=A==="-"?Z:f6(A),k=j.out==="-"?VA:V6(j.out),{header:I,writable:G,readable:R}=await E.createEncryptionStream(_),U=M6($),P=y6(k),K=P.getWriter();await K.write(I),K.releaseLock(),await Promise.all([U.pipeTo(G),R.pipeTo(P)])});v.command("decrypt <src>").description("decrypt file; use - for STDIN, --out - for STDOUT").option("-o, --out <file>","output file (default STDOUT)","-").action(async(A,j)=>{let q=v.opts(),E=IA({difficulty:q.difficulty,saltStrength:q.saltStrength,chunkSize:q.chunkSize}),_=q.pass??await MA(),$=A==="-"?Z:f6(A),k=j.out==="-"?VA:V6(j.out),I=M6($),G=y6(k),R=await E.createDecryptionStream(_);await Promise.all([I.pipeTo(R.writable),R.readable.pipeTo(G)])});v.command("encrypt-text [text]").description("encrypt plaintext; omit arg to read from STDIN").action(async(A)=>{let j=v.opts(),q=IA({difficulty:j.difficulty,saltStrength:j.saltStrength}),E=j.pass??(Z.isTTY?await MA():(()=>{fA.write(`Use --pass when piping data via STDIN
`),Ij(1)})()),_=A??await v6(),$=await q.encryptText(_,E);VA.write($+`
`)});v.command("decrypt-text [b64]").description("decrypt Base64 ciphertext; omit arg to read from STDIN").action(async(A)=>{let j=v.opts(),q=IA({difficulty:j.difficulty,saltStrength:j.saltStrength}),E=j.pass??await MA(),_=A??(await v6()).trim(),$=await q.decryptText(_,E);VA.write($+`
`)});v.parse();

//# debugId=0FCE605F7FF839C164756E2164756E21

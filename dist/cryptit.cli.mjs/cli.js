#!/usr/bin/env node
import{createRequire as O0}from"node:module";var w0=Object.create;var{getPrototypeOf:y0,defineProperty:A8,getOwnPropertyNames:k0}=Object;var C0=Object.prototype.hasOwnProperty;var j8=(U,Y,$)=>{$=U!=null?w0(y0(U)):{};let z=Y||!U||!U.__esModule?A8($,"default",{value:U,enumerable:!0}):$;for(let J of k0(U))if(!C0.call(z,J))A8(z,J,{get:()=>U[J],enumerable:!0});return z};var I=(U,Y)=>()=>(Y||U((Y={exports:{}}).exports,Y),Y.exports);var K=O0(import.meta.url);var m=I((x0)=>{class Z8 extends Error{constructor(U,Y,$){super($);Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=Y,this.exitCode=U,this.nestedError=void 0}}class w8 extends Z8{constructor(U){super(1,"commander.invalidArgument",U);Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}}x0.CommanderError=Z8;x0.InvalidArgumentError=w8});var t=I((u0)=>{var{InvalidArgumentError:b0}=m();class y8{constructor(U,Y){switch(this.description=Y||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,U[0]){case"<":this.required=!0,this._name=U.slice(1,-1);break;case"[":this.required=!1,this._name=U.slice(1,-1);break;default:this.required=!0,this._name=U;break}if(this._name.length>3&&this._name.slice(-3)==="...")this.variadic=!0,this._name=this._name.slice(0,-3)}name(){return this._name}_concatValue(U,Y){if(Y===this.defaultValue||!Array.isArray(Y))return[U];return Y.concat(U)}default(U,Y){return this.defaultValue=U,this.defaultValueDescription=Y,this}argParser(U){return this.parseArg=U,this}choices(U){return this.argChoices=U.slice(),this.parseArg=(Y,$)=>{if(!this.argChoices.includes(Y))throw new b0(`Allowed choices are ${this.argChoices.join(", ")}.`);if(this.variadic)return this._concatValue(Y,$);return Y},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}}function h0(U){let Y=U.name()+(U.variadic===!0?"...":"");return U.required?"<"+Y+">":"["+Y+"]"}u0.Argument=y8;u0.humanReadableArgName=h0});var G8=I((m0)=>{var{humanReadableArgName:l0}=t();class k8{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(U){let Y=U.commands.filter(($)=>!$._hidden);if(U._hasImplicitHelpCommand()){let[,$,z]=U._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/),J=U.createCommand($).helpOption(!1);if(J.description(U._helpCommandDescription),z)J.arguments(z);Y.push(J)}if(this.sortSubcommands)Y.sort(($,z)=>{return $.name().localeCompare(z.name())});return Y}compareOptions(U,Y){let $=(z)=>{return z.short?z.short.replace(/^-/,""):z.long.replace(/^--/,"")};return $(U).localeCompare($(Y))}visibleOptions(U){let Y=U.options.filter((J)=>!J.hidden),$=U._hasHelpOption&&U._helpShortFlag&&!U._findOption(U._helpShortFlag),z=U._hasHelpOption&&!U._findOption(U._helpLongFlag);if($||z){let J;if(!$)J=U.createOption(U._helpLongFlag,U._helpDescription);else if(!z)J=U.createOption(U._helpShortFlag,U._helpDescription);else J=U.createOption(U._helpFlags,U._helpDescription);Y.push(J)}if(this.sortOptions)Y.sort(this.compareOptions);return Y}visibleGlobalOptions(U){if(!this.showGlobalOptions)return[];let Y=[];for(let $=U.parent;$;$=$.parent){let z=$.options.filter((J)=>!J.hidden);Y.push(...z)}if(this.sortOptions)Y.sort(this.compareOptions);return Y}visibleArguments(U){if(U._argsDescription)U.registeredArguments.forEach((Y)=>{Y.description=Y.description||U._argsDescription[Y.name()]||""});if(U.registeredArguments.find((Y)=>Y.description))return U.registeredArguments;return[]}subcommandTerm(U){let Y=U.registeredArguments.map(($)=>l0($)).join(" ");return U._name+(U._aliases[0]?"|"+U._aliases[0]:"")+(U.options.length?" [options]":"")+(Y?" "+Y:"")}optionTerm(U){return U.flags}argumentTerm(U){return U.name()}longestSubcommandTermLength(U,Y){return Y.visibleCommands(U).reduce(($,z)=>{return Math.max($,Y.subcommandTerm(z).length)},0)}longestOptionTermLength(U,Y){return Y.visibleOptions(U).reduce(($,z)=>{return Math.max($,Y.optionTerm(z).length)},0)}longestGlobalOptionTermLength(U,Y){return Y.visibleGlobalOptions(U).reduce(($,z)=>{return Math.max($,Y.optionTerm(z).length)},0)}longestArgumentTermLength(U,Y){return Y.visibleArguments(U).reduce(($,z)=>{return Math.max($,Y.argumentTerm(z).length)},0)}commandUsage(U){let Y=U._name;if(U._aliases[0])Y=Y+"|"+U._aliases[0];let $="";for(let z=U.parent;z;z=z.parent)$=z.name()+" "+$;return $+Y+" "+U.usage()}commandDescription(U){return U.description()}subcommandDescription(U){return U.summary()||U.description()}optionDescription(U){let Y=[];if(U.argChoices)Y.push(`choices: ${U.argChoices.map(($)=>JSON.stringify($)).join(", ")}`);if(U.defaultValue!==void 0){if(U.required||U.optional||U.isBoolean()&&typeof U.defaultValue==="boolean")Y.push(`default: ${U.defaultValueDescription||JSON.stringify(U.defaultValue)}`)}if(U.presetArg!==void 0&&U.optional)Y.push(`preset: ${JSON.stringify(U.presetArg)}`);if(U.envVar!==void 0)Y.push(`env: ${U.envVar}`);if(Y.length>0)return`${U.description} (${Y.join(", ")})`;return U.description}argumentDescription(U){let Y=[];if(U.argChoices)Y.push(`choices: ${U.argChoices.map(($)=>JSON.stringify($)).join(", ")}`);if(U.defaultValue!==void 0)Y.push(`default: ${U.defaultValueDescription||JSON.stringify(U.defaultValue)}`);if(Y.length>0){let $=`(${Y.join(", ")})`;if(U.description)return`${U.description} ${$}`;return $}return U.description}formatHelp(U,Y){let $=Y.padWidth(U,Y),z=Y.helpWidth||80,J=2,Q=2;function Z(W,L){if(L){let E=`${W.padEnd($+2)}${L}`;return Y.wrap(E,z-2,$+2)}return W}function X(W){return W.join(`
`).replace(/^/gm," ".repeat(2))}let G=[`Usage: ${Y.commandUsage(U)}`,""],_=Y.commandDescription(U);if(_.length>0)G=G.concat([Y.wrap(_,z,0),""]);let q=Y.visibleArguments(U).map((W)=>{return Z(Y.argumentTerm(W),Y.argumentDescription(W))});if(q.length>0)G=G.concat(["Arguments:",X(q),""]);let T=Y.visibleOptions(U).map((W)=>{return Z(Y.optionTerm(W),Y.optionDescription(W))});if(T.length>0)G=G.concat(["Options:",X(T),""]);if(this.showGlobalOptions){let W=Y.visibleGlobalOptions(U).map((L)=>{return Z(Y.optionTerm(L),Y.optionDescription(L))});if(W.length>0)G=G.concat(["Global Options:",X(W),""])}let M=Y.visibleCommands(U).map((W)=>{return Z(Y.subcommandTerm(W),Y.subcommandDescription(W))});if(M.length>0)G=G.concat(["Commands:",X(M),""]);return G.join(`
`)}padWidth(U,Y){return Math.max(Y.longestOptionTermLength(U,Y),Y.longestGlobalOptionTermLength(U,Y),Y.longestSubcommandTermLength(U,Y),Y.longestArgumentTermLength(U,Y))}wrap(U,Y,$,z=40){let Q=new RegExp(`[\\n][${" \\f\\t\\v   -   　\uFEFF"}]+`);if(U.match(Q))return U;let Z=Y-$;if(Z<z)return U;let X=U.slice(0,$),G=U.slice($).replace(`\r
`,`
`),_=" ".repeat($),T=`\\s${"​"}`,M=new RegExp(`
|.{1,${Z-1}}([${T}]|$)|[^${T}]+?([${T}]|$)`,"g"),W=G.match(M)||[];return X+W.map((L,E)=>{if(L===`
`)return"";return(E>0?_:"")+L.trimEnd()}).join(`
`)}}m0.Help=k8});var _8=I((n0)=>{var{InvalidArgumentError:p0}=m();class C8{constructor(U,Y){this.flags=U,this.description=Y||"",this.required=U.includes("<"),this.optional=U.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(U),this.mandatory=!1;let $=x8(U);if(this.short=$.shortFlag,this.long=$.longFlag,this.negate=!1,this.long)this.negate=this.long.startsWith("--no-");this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(U,Y){return this.defaultValue=U,this.defaultValueDescription=Y,this}preset(U){return this.presetArg=U,this}conflicts(U){return this.conflictsWith=this.conflictsWith.concat(U),this}implies(U){let Y=U;if(typeof U==="string")Y={[U]:!0};return this.implied=Object.assign(this.implied||{},Y),this}env(U){return this.envVar=U,this}argParser(U){return this.parseArg=U,this}makeOptionMandatory(U=!0){return this.mandatory=!!U,this}hideHelp(U=!0){return this.hidden=!!U,this}_concatValue(U,Y){if(Y===this.defaultValue||!Array.isArray(Y))return[U];return Y.concat(U)}choices(U){return this.argChoices=U.slice(),this.parseArg=(Y,$)=>{if(!this.argChoices.includes(Y))throw new p0(`Allowed choices are ${this.argChoices.join(", ")}.`);if(this.variadic)return this._concatValue(Y,$);return Y},this}name(){if(this.long)return this.long.replace(/^--/,"");return this.short.replace(/^-/,"")}attributeName(){return i0(this.name().replace(/^no-/,""))}is(U){return this.short===U||this.long===U}isBoolean(){return!this.required&&!this.optional&&!this.negate}}class O8{constructor(U){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,U.forEach((Y)=>{if(Y.negate)this.negativeOptions.set(Y.attributeName(),Y);else this.positiveOptions.set(Y.attributeName(),Y)}),this.negativeOptions.forEach((Y,$)=>{if(this.positiveOptions.has($))this.dualOptions.add($)})}valueFromOption(U,Y){let $=Y.attributeName();if(!this.dualOptions.has($))return!0;let z=this.negativeOptions.get($).presetArg,J=z!==void 0?z:!1;return Y.negate===(J===U)}}function i0(U){return U.split("-").reduce((Y,$)=>{return Y+$[0].toUpperCase()+$.slice(1)})}function x8(U){let Y,$,z=U.split(/[ |,]+/);if(z.length>1&&!/^[[<]/.test(z[1]))Y=z.shift();if($=z.shift(),!Y&&/^-[^-]$/.test($))Y=$,$=void 0;return{shortFlag:Y,longFlag:$}}n0.Option=C8;n0.splitOptionFlags=x8;n0.DualOptions=O8});var f8=I((e0)=>{function t0(U,Y){if(Math.abs(U.length-Y.length)>3)return Math.max(U.length,Y.length);let $=[];for(let z=0;z<=U.length;z++)$[z]=[z];for(let z=0;z<=Y.length;z++)$[0][z]=z;for(let z=1;z<=Y.length;z++)for(let J=1;J<=U.length;J++){let Q=1;if(U[J-1]===Y[z-1])Q=0;else Q=1;if($[J][z]=Math.min($[J-1][z]+1,$[J][z-1]+1,$[J-1][z-1]+Q),J>1&&z>1&&U[J-1]===Y[z-2]&&U[J-2]===Y[z-1])$[J][z]=Math.min($[J][z],$[J-2][z-2]+1)}return $[U.length][Y.length]}function a0(U,Y){if(!Y||Y.length===0)return"";Y=Array.from(new Set(Y));let $=U.startsWith("--");if($)U=U.slice(2),Y=Y.map((Z)=>Z.slice(2));let z=[],J=3,Q=0.4;if(Y.forEach((Z)=>{if(Z.length<=1)return;let X=t0(U,Z),G=Math.max(U.length,Z.length);if((G-X)/G>Q){if(X<J)J=X,z=[Z];else if(X===J)z.push(Z)}}),z.sort((Z,X)=>Z.localeCompare(X)),$)z=z.map((Z)=>`--${Z}`);if(z.length>1)return`
(Did you mean one of ${z.join(", ")}?)`;if(z.length===1)return`
(Did you mean ${z[0]}?)`;return""}e0.suggestSimilar=a0});var g8=I((ZU)=>{var YU=K("events").EventEmitter,q8=K("child_process"),j=K("path"),T8=K("fs"),B=K("process"),{Argument:$U,humanReadableArgName:zU}=t(),{CommanderError:M8}=m(),{Help:JU}=G8(),{Option:v8,splitOptionFlags:QU,DualOptions:XU}=_8(),{suggestSimilar:b8}=f8();class W8 extends YU{constructor(U){super();this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=U||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:(Y)=>B.stdout.write(Y),writeErr:(Y)=>B.stderr.write(Y),getOutHelpWidth:()=>B.stdout.isTTY?B.stdout.columns:void 0,getErrHelpWidth:()=>B.stderr.isTTY?B.stderr.columns:void 0,outputError:(Y,$)=>$(Y)},this._hidden=!1,this._hasHelpOption=!0,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._addImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command",this._helpConfiguration={}}copyInheritedSettings(U){return this._outputConfiguration=U._outputConfiguration,this._hasHelpOption=U._hasHelpOption,this._helpFlags=U._helpFlags,this._helpDescription=U._helpDescription,this._helpShortFlag=U._helpShortFlag,this._helpLongFlag=U._helpLongFlag,this._helpCommandName=U._helpCommandName,this._helpCommandnameAndArgs=U._helpCommandnameAndArgs,this._helpCommandDescription=U._helpCommandDescription,this._helpConfiguration=U._helpConfiguration,this._exitCallback=U._exitCallback,this._storeOptionsAsProperties=U._storeOptionsAsProperties,this._combineFlagAndOptionalValue=U._combineFlagAndOptionalValue,this._allowExcessArguments=U._allowExcessArguments,this._enablePositionalOptions=U._enablePositionalOptions,this._showHelpAfterError=U._showHelpAfterError,this._showSuggestionAfterError=U._showSuggestionAfterError,this}_getCommandAndAncestors(){let U=[];for(let Y=this;Y;Y=Y.parent)U.push(Y);return U}command(U,Y,$){let z=Y,J=$;if(typeof z==="object"&&z!==null)J=z,z=null;J=J||{};let[,Q,Z]=U.match(/([^ ]+) *(.*)/),X=this.createCommand(Q);if(z)X.description(z),X._executableHandler=!0;if(J.isDefault)this._defaultCommandName=X._name;if(X._hidden=!!(J.noHelp||J.hidden),X._executableFile=J.executableFile||null,Z)X.arguments(Z);if(this.commands.push(X),X.parent=this,X.copyInheritedSettings(this),z)return this;return X}createCommand(U){return new W8(U)}createHelp(){return Object.assign(new JU,this.configureHelp())}configureHelp(U){if(U===void 0)return this._helpConfiguration;return this._helpConfiguration=U,this}configureOutput(U){if(U===void 0)return this._outputConfiguration;return Object.assign(this._outputConfiguration,U),this}showHelpAfterError(U=!0){if(typeof U!=="string")U=!!U;return this._showHelpAfterError=U,this}showSuggestionAfterError(U=!0){return this._showSuggestionAfterError=!!U,this}addCommand(U,Y){if(!U._name)throw new Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);if(Y=Y||{},Y.isDefault)this._defaultCommandName=U._name;if(Y.noHelp||Y.hidden)U._hidden=!0;return this.commands.push(U),U.parent=this,this}createArgument(U,Y){return new $U(U,Y)}argument(U,Y,$,z){let J=this.createArgument(U,Y);if(typeof $==="function")J.default(z).argParser($);else J.default($);return this.addArgument(J),this}arguments(U){return U.trim().split(/ +/).forEach((Y)=>{this.argument(Y)}),this}addArgument(U){let Y=this.registeredArguments.slice(-1)[0];if(Y&&Y.variadic)throw new Error(`only the last argument can be variadic '${Y.name()}'`);if(U.required&&U.defaultValue!==void 0&&U.parseArg===void 0)throw new Error(`a default value for a required argument is never used: '${U.name()}'`);return this.registeredArguments.push(U),this}addHelpCommand(U,Y){if(U===!1)this._addImplicitHelpCommand=!1;else{if(this._addImplicitHelpCommand=!0,typeof U==="string")this._helpCommandName=U.split(" ")[0],this._helpCommandnameAndArgs=U;this._helpCommandDescription=Y||this._helpCommandDescription}return this}_hasImplicitHelpCommand(){if(this._addImplicitHelpCommand===void 0)return this.commands.length&&!this._actionHandler&&!this._findCommand("help");return this._addImplicitHelpCommand}hook(U,Y){let $=["preSubcommand","preAction","postAction"];if(!$.includes(U))throw new Error(`Unexpected value for event passed to hook : '${U}'.
Expecting one of '${$.join("', '")}'`);if(this._lifeCycleHooks[U])this._lifeCycleHooks[U].push(Y);else this._lifeCycleHooks[U]=[Y];return this}exitOverride(U){if(U)this._exitCallback=U;else this._exitCallback=(Y)=>{if(Y.code!=="commander.executeSubCommandAsync")throw Y};return this}_exit(U,Y,$){if(this._exitCallback)this._exitCallback(new M8(U,Y,$));B.exit(U)}action(U){let Y=($)=>{let z=this.registeredArguments.length,J=$.slice(0,z);if(this._storeOptionsAsProperties)J[z]=this;else J[z]=this.opts();return J.push(this),U.apply(this,J)};return this._actionHandler=Y,this}createOption(U,Y){return new v8(U,Y)}_callParseArg(U,Y,$,z){try{return U.parseArg(Y,$)}catch(J){if(J.code==="commander.invalidArgument"){let Q=`${z} ${J.message}`;this.error(Q,{exitCode:J.exitCode,code:J.code})}throw J}}addOption(U){let Y=U.name(),$=U.attributeName();if(U.negate){let J=U.long.replace(/^--no-/,"--");if(!this._findOption(J))this.setOptionValueWithSource($,U.defaultValue===void 0?!0:U.defaultValue,"default")}else if(U.defaultValue!==void 0)this.setOptionValueWithSource($,U.defaultValue,"default");this.options.push(U);let z=(J,Q,Z)=>{if(J==null&&U.presetArg!==void 0)J=U.presetArg;let X=this.getOptionValue($);if(J!==null&&U.parseArg)J=this._callParseArg(U,J,X,Q);else if(J!==null&&U.variadic)J=U._concatValue(J,X);if(J==null)if(U.negate)J=!1;else if(U.isBoolean()||U.optional)J=!0;else J="";this.setOptionValueWithSource($,J,Z)};if(this.on("option:"+Y,(J)=>{let Q=`error: option '${U.flags}' argument '${J}' is invalid.`;z(J,Q,"cli")}),U.envVar)this.on("optionEnv:"+Y,(J)=>{let Q=`error: option '${U.flags}' value '${J}' from env '${U.envVar}' is invalid.`;z(J,Q,"env")});return this}_optionEx(U,Y,$,z,J){if(typeof Y==="object"&&Y instanceof v8)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");let Q=this.createOption(Y,$);if(Q.makeOptionMandatory(!!U.mandatory),typeof z==="function")Q.default(J).argParser(z);else if(z instanceof RegExp){let Z=z;z=(X,G)=>{let _=Z.exec(X);return _?_[0]:G},Q.default(J).argParser(z)}else Q.default(z);return this.addOption(Q)}option(U,Y,$,z){return this._optionEx({},U,Y,$,z)}requiredOption(U,Y,$,z){return this._optionEx({mandatory:!0},U,Y,$,z)}combineFlagAndOptionalValue(U=!0){return this._combineFlagAndOptionalValue=!!U,this}allowUnknownOption(U=!0){return this._allowUnknownOption=!!U,this}allowExcessArguments(U=!0){return this._allowExcessArguments=!!U,this}enablePositionalOptions(U=!0){return this._enablePositionalOptions=!!U,this}passThroughOptions(U=!0){if(this._passThroughOptions=!!U,!!this.parent&&U&&!this.parent._enablePositionalOptions)throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)");return this}storeOptionsAsProperties(U=!0){if(this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this._storeOptionsAsProperties=!!U,this}getOptionValue(U){if(this._storeOptionsAsProperties)return this[U];return this._optionValues[U]}setOptionValue(U,Y){return this.setOptionValueWithSource(U,Y,void 0)}setOptionValueWithSource(U,Y,$){if(this._storeOptionsAsProperties)this[U]=Y;else this._optionValues[U]=Y;return this._optionValueSources[U]=$,this}getOptionValueSource(U){return this._optionValueSources[U]}getOptionValueSourceWithGlobals(U){let Y;return this._getCommandAndAncestors().forEach(($)=>{if($.getOptionValueSource(U)!==void 0)Y=$.getOptionValueSource(U)}),Y}_prepareUserArgs(U,Y){if(U!==void 0&&!Array.isArray(U))throw new Error("first parameter to parse must be array or undefined");if(Y=Y||{},U===void 0){if(U=B.argv,B.versions&&B.versions.electron)Y.from="electron"}this.rawArgs=U.slice();let $;switch(Y.from){case void 0:case"node":this._scriptPath=U[1],$=U.slice(2);break;case"electron":if(B.defaultApp)this._scriptPath=U[1],$=U.slice(2);else $=U.slice(1);break;case"user":$=U.slice(0);break;default:throw new Error(`unexpected parse option { from: '${Y.from}' }`)}if(!this._name&&this._scriptPath)this.nameFromFilename(this._scriptPath);return this._name=this._name||"program",$}parse(U,Y){let $=this._prepareUserArgs(U,Y);return this._parseCommand([],$),this}async parseAsync(U,Y){let $=this._prepareUserArgs(U,Y);return await this._parseCommand([],$),this}_executeSubCommand(U,Y){Y=Y.slice();let $=!1,z=[".js",".ts",".tsx",".mjs",".cjs"];function J(_,q){let T=j.resolve(_,q);if(T8.existsSync(T))return T;if(z.includes(j.extname(q)))return;let M=z.find((W)=>T8.existsSync(`${T}${W}`));if(M)return`${T}${M}`;return}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let Q=U._executableFile||`${this._name}-${U._name}`,Z=this._executableDir||"";if(this._scriptPath){let _;try{_=T8.realpathSync(this._scriptPath)}catch(q){_=this._scriptPath}Z=j.resolve(j.dirname(_),Z)}if(Z){let _=J(Z,Q);if(!_&&!U._executableFile&&this._scriptPath){let q=j.basename(this._scriptPath,j.extname(this._scriptPath));if(q!==this._name)_=J(Z,`${q}-${U._name}`)}Q=_||Q}$=z.includes(j.extname(Q));let X;if(B.platform!=="win32")if($)Y.unshift(Q),Y=u8(B.execArgv).concat(Y),X=q8.spawn(B.argv[0],Y,{stdio:"inherit"});else X=q8.spawn(Q,Y,{stdio:"inherit"});else Y.unshift(Q),Y=u8(B.execArgv).concat(Y),X=q8.spawn(B.execPath,Y,{stdio:"inherit"});if(!X.killed)["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach((q)=>{B.on(q,()=>{if(X.killed===!1&&X.exitCode===null)X.kill(q)})});let G=this._exitCallback;if(!G)X.on("close",B.exit.bind(B));else X.on("close",()=>{G(new M8(B.exitCode||0,"commander.executeSubCommandAsync","(close)"))});X.on("error",(_)=>{if(_.code==="ENOENT"){let q=Z?`searched for local subcommand relative to directory '${Z}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",T=`'${Q}' does not exist
 - if '${U._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${q}`;throw new Error(T)}else if(_.code==="EACCES")throw new Error(`'${Q}' not executable`);if(!G)B.exit(1);else{let q=new M8(1,"commander.executeSubCommandAsync","(error)");q.nestedError=_,G(q)}}),this.runningCommand=X}_dispatchSubcommand(U,Y,$){let z=this._findCommand(U);if(!z)this.help({error:!0});let J;return J=this._chainOrCallSubCommandHook(J,z,"preSubcommand"),J=this._chainOrCall(J,()=>{if(z._executableHandler)this._executeSubCommand(z,Y.concat($));else return z._parseCommand(Y,$)}),J}_dispatchHelpCommand(U){if(!U)this.help();let Y=this._findCommand(U);if(Y&&!Y._executableHandler)Y.help();return this._dispatchSubcommand(U,[],[this._helpLongFlag||this._helpShortFlag])}_checkNumberOfArguments(){if(this.registeredArguments.forEach((U,Y)=>{if(U.required&&this.args[Y]==null)this.missingArgument(U.name())}),this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic)return;if(this.args.length>this.registeredArguments.length)this._excessArguments(this.args)}_processArguments(){let U=($,z,J)=>{let Q=z;if(z!==null&&$.parseArg){let Z=`error: command-argument value '${z}' is invalid for argument '${$.name()}'.`;Q=this._callParseArg($,z,J,Z)}return Q};this._checkNumberOfArguments();let Y=[];this.registeredArguments.forEach(($,z)=>{let J=$.defaultValue;if($.variadic){if(z<this.args.length){if(J=this.args.slice(z),$.parseArg)J=J.reduce((Q,Z)=>{return U($,Z,Q)},$.defaultValue)}else if(J===void 0)J=[]}else if(z<this.args.length){if(J=this.args[z],$.parseArg)J=U($,J,$.defaultValue)}Y[z]=J}),this.processedArgs=Y}_chainOrCall(U,Y){if(U&&U.then&&typeof U.then==="function")return U.then(()=>Y());return Y()}_chainOrCallHooks(U,Y){let $=U,z=[];if(this._getCommandAndAncestors().reverse().filter((J)=>J._lifeCycleHooks[Y]!==void 0).forEach((J)=>{J._lifeCycleHooks[Y].forEach((Q)=>{z.push({hookedCommand:J,callback:Q})})}),Y==="postAction")z.reverse();return z.forEach((J)=>{$=this._chainOrCall($,()=>{return J.callback(J.hookedCommand,this)})}),$}_chainOrCallSubCommandHook(U,Y,$){let z=U;if(this._lifeCycleHooks[$]!==void 0)this._lifeCycleHooks[$].forEach((J)=>{z=this._chainOrCall(z,()=>{return J(this,Y)})});return z}_parseCommand(U,Y){let $=this.parseOptions(Y);if(this._parseOptionsEnv(),this._parseOptionsImplied(),U=U.concat($.operands),Y=$.unknown,this.args=U.concat(Y),U&&this._findCommand(U[0]))return this._dispatchSubcommand(U[0],U.slice(1),Y);if(this._hasImplicitHelpCommand()&&U[0]===this._helpCommandName)return this._dispatchHelpCommand(U[1]);if(this._defaultCommandName)return h8(this,Y),this._dispatchSubcommand(this._defaultCommandName,U,Y);if(this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName)this.help({error:!0});h8(this,$.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let z=()=>{if($.unknown.length>0)this.unknownOption($.unknown[0])},J=`command:${this.name()}`;if(this._actionHandler){z(),this._processArguments();let Q;if(Q=this._chainOrCallHooks(Q,"preAction"),Q=this._chainOrCall(Q,()=>this._actionHandler(this.processedArgs)),this.parent)Q=this._chainOrCall(Q,()=>{this.parent.emit(J,U,Y)});return Q=this._chainOrCallHooks(Q,"postAction"),Q}if(this.parent&&this.parent.listenerCount(J))z(),this._processArguments(),this.parent.emit(J,U,Y);else if(U.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",U,Y);if(this.listenerCount("command:*"))this.emit("command:*",U,Y);else if(this.commands.length)this.unknownCommand();else z(),this._processArguments()}else if(this.commands.length)z(),this.help({error:!0});else z(),this._processArguments()}_findCommand(U){if(!U)return;return this.commands.find((Y)=>Y._name===U||Y._aliases.includes(U))}_findOption(U){return this.options.find((Y)=>Y.is(U))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach((U)=>{U.options.forEach((Y)=>{if(Y.mandatory&&U.getOptionValue(Y.attributeName())===void 0)U.missingMandatoryOptionValue(Y)})})}_checkForConflictingLocalOptions(){let U=this.options.filter(($)=>{let z=$.attributeName();if(this.getOptionValue(z)===void 0)return!1;return this.getOptionValueSource(z)!=="default"});U.filter(($)=>$.conflictsWith.length>0).forEach(($)=>{let z=U.find((J)=>$.conflictsWith.includes(J.attributeName()));if(z)this._conflictingOption($,z)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach((U)=>{U._checkForConflictingLocalOptions()})}parseOptions(U){let Y=[],$=[],z=Y,J=U.slice();function Q(X){return X.length>1&&X[0]==="-"}let Z=null;while(J.length){let X=J.shift();if(X==="--"){if(z===$)z.push(X);z.push(...J);break}if(Z&&!Q(X)){this.emit(`option:${Z.name()}`,X);continue}if(Z=null,Q(X)){let G=this._findOption(X);if(G){if(G.required){let _=J.shift();if(_===void 0)this.optionMissingArgument(G);this.emit(`option:${G.name()}`,_)}else if(G.optional){let _=null;if(J.length>0&&!Q(J[0]))_=J.shift();this.emit(`option:${G.name()}`,_)}else this.emit(`option:${G.name()}`);Z=G.variadic?G:null;continue}}if(X.length>2&&X[0]==="-"&&X[1]!=="-"){let G=this._findOption(`-${X[1]}`);if(G){if(G.required||G.optional&&this._combineFlagAndOptionalValue)this.emit(`option:${G.name()}`,X.slice(2));else this.emit(`option:${G.name()}`),J.unshift(`-${X.slice(2)}`);continue}}if(/^--[^=]+=/.test(X)){let G=X.indexOf("="),_=this._findOption(X.slice(0,G));if(_&&(_.required||_.optional)){this.emit(`option:${_.name()}`,X.slice(G+1));continue}}if(Q(X))z=$;if((this._enablePositionalOptions||this._passThroughOptions)&&Y.length===0&&$.length===0){if(this._findCommand(X)){if(Y.push(X),J.length>0)$.push(...J);break}else if(X===this._helpCommandName&&this._hasImplicitHelpCommand()){if(Y.push(X),J.length>0)Y.push(...J);break}else if(this._defaultCommandName){if($.push(X),J.length>0)$.push(...J);break}}if(this._passThroughOptions){if(z.push(X),J.length>0)z.push(...J);break}z.push(X)}return{operands:Y,unknown:$}}opts(){if(this._storeOptionsAsProperties){let U={},Y=this.options.length;for(let $=0;$<Y;$++){let z=this.options[$].attributeName();U[z]=z===this._versionOptionName?this._version:this[z]}return U}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((U,Y)=>Object.assign(U,Y.opts()),{})}error(U,Y){if(this._outputConfiguration.outputError(`${U}
`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError==="string")this._outputConfiguration.writeErr(`${this._showHelpAfterError}
`);else if(this._showHelpAfterError)this._outputConfiguration.writeErr(`
`),this.outputHelp({error:!0});let $=Y||{},z=$.exitCode||1,J=$.code||"commander.error";this._exit(z,J,U)}_parseOptionsEnv(){this.options.forEach((U)=>{if(U.envVar&&U.envVar in B.env){let Y=U.attributeName();if(this.getOptionValue(Y)===void 0||["default","config","env"].includes(this.getOptionValueSource(Y)))if(U.required||U.optional)this.emit(`optionEnv:${U.name()}`,B.env[U.envVar]);else this.emit(`optionEnv:${U.name()}`)}})}_parseOptionsImplied(){let U=new XU(this.options),Y=($)=>{return this.getOptionValue($)!==void 0&&!["default","implied"].includes(this.getOptionValueSource($))};this.options.filter(($)=>$.implied!==void 0&&Y($.attributeName())&&U.valueFromOption(this.getOptionValue($.attributeName()),$)).forEach(($)=>{Object.keys($.implied).filter((z)=>!Y(z)).forEach((z)=>{this.setOptionValueWithSource(z,$.implied[z],"implied")})})}missingArgument(U){let Y=`error: missing required argument '${U}'`;this.error(Y,{code:"commander.missingArgument"})}optionMissingArgument(U){let Y=`error: option '${U.flags}' argument missing`;this.error(Y,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(U){let Y=`error: required option '${U.flags}' not specified`;this.error(Y,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(U,Y){let $=(Q)=>{let Z=Q.attributeName(),X=this.getOptionValue(Z),G=this.options.find((q)=>q.negate&&Z===q.attributeName()),_=this.options.find((q)=>!q.negate&&Z===q.attributeName());if(G&&(G.presetArg===void 0&&X===!1||G.presetArg!==void 0&&X===G.presetArg))return G;return _||Q},z=(Q)=>{let Z=$(Q),X=Z.attributeName();if(this.getOptionValueSource(X)==="env")return`environment variable '${Z.envVar}'`;return`option '${Z.flags}'`},J=`error: ${z(U)} cannot be used with ${z(Y)}`;this.error(J,{code:"commander.conflictingOption"})}unknownOption(U){if(this._allowUnknownOption)return;let Y="";if(U.startsWith("--")&&this._showSuggestionAfterError){let z=[],J=this;do{let Q=J.createHelp().visibleOptions(J).filter((Z)=>Z.long).map((Z)=>Z.long);z=z.concat(Q),J=J.parent}while(J&&!J._enablePositionalOptions);Y=b8(U,z)}let $=`error: unknown option '${U}'${Y}`;this.error($,{code:"commander.unknownOption"})}_excessArguments(U){if(this._allowExcessArguments)return;let Y=this.registeredArguments.length,$=Y===1?"":"s",J=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${Y} argument${$} but got ${U.length}.`;this.error(J,{code:"commander.excessArguments"})}unknownCommand(){let U=this.args[0],Y="";if(this._showSuggestionAfterError){let z=[];this.createHelp().visibleCommands(this).forEach((J)=>{if(z.push(J.name()),J.alias())z.push(J.alias())}),Y=b8(U,z)}let $=`error: unknown command '${U}'${Y}`;this.error($,{code:"commander.unknownCommand"})}version(U,Y,$){if(U===void 0)return this._version;this._version=U,Y=Y||"-V, --version",$=$||"output the version number";let z=this.createOption(Y,$);return this._versionOptionName=z.attributeName(),this.options.push(z),this.on("option:"+z.name(),()=>{this._outputConfiguration.writeOut(`${U}
`),this._exit(0,"commander.version",U)}),this}description(U,Y){if(U===void 0&&Y===void 0)return this._description;if(this._description=U,Y)this._argsDescription=Y;return this}summary(U){if(U===void 0)return this._summary;return this._summary=U,this}alias(U){if(U===void 0)return this._aliases[0];let Y=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler)Y=this.commands[this.commands.length-1];if(U===Y._name)throw new Error("Command alias can't be the same as its name");return Y._aliases.push(U),this}aliases(U){if(U===void 0)return this._aliases;return U.forEach((Y)=>this.alias(Y)),this}usage(U){if(U===void 0){if(this._usage)return this._usage;let Y=this.registeredArguments.map(($)=>{return zU($)});return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?Y:[]).join(" ")}return this._usage=U,this}name(U){if(U===void 0)return this._name;return this._name=U,this}nameFromFilename(U){return this._name=j.basename(U,j.extname(U)),this}executableDir(U){if(U===void 0)return this._executableDir;return this._executableDir=U,this}helpInformation(U){let Y=this.createHelp();if(Y.helpWidth===void 0)Y.helpWidth=U&&U.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth();return Y.formatHelp(this,Y)}_getHelpContext(U){U=U||{};let Y={error:!!U.error},$;if(Y.error)$=(z)=>this._outputConfiguration.writeErr(z);else $=(z)=>this._outputConfiguration.writeOut(z);return Y.write=U.write||$,Y.command=this,Y}outputHelp(U){let Y;if(typeof U==="function")Y=U,U=void 0;let $=this._getHelpContext(U);this._getCommandAndAncestors().reverse().forEach((J)=>J.emit("beforeAllHelp",$)),this.emit("beforeHelp",$);let z=this.helpInformation($);if(Y){if(z=Y(z),typeof z!=="string"&&!Buffer.isBuffer(z))throw new Error("outputHelp callback must return a string or a Buffer")}if($.write(z),this._helpLongFlag)this.emit(this._helpLongFlag);this.emit("afterHelp",$),this._getCommandAndAncestors().forEach((J)=>J.emit("afterAllHelp",$))}helpOption(U,Y){if(typeof U==="boolean")return this._hasHelpOption=U,this;this._helpFlags=U||this._helpFlags,this._helpDescription=Y||this._helpDescription;let $=QU(this._helpFlags);return this._helpShortFlag=$.shortFlag,this._helpLongFlag=$.longFlag,this}help(U){this.outputHelp(U);let Y=B.exitCode||0;if(Y===0&&U&&typeof U!=="function"&&U.error)Y=1;this._exit(Y,"commander.help","(outputHelp)")}addHelpText(U,Y){let $=["beforeAll","before","after","afterAll"];if(!$.includes(U))throw new Error(`Unexpected value for position to addHelpText.
Expecting one of '${$.join("', '")}'`);let z=`${U}Help`;return this.on(z,(J)=>{let Q;if(typeof Y==="function")Q=Y({error:J.error,command:J.command});else Q=Y;if(Q)J.write(`${Q}
`)}),this}}function h8(U,Y){if(U._hasHelpOption&&Y.find((z)=>z===U._helpLongFlag||z===U._helpShortFlag))U.outputHelp(),U._exit(0,"commander.helpDisplayed","(outputHelp)")}function u8(U){return U.map((Y)=>{if(!Y.startsWith("--inspect"))return Y;let $,z="127.0.0.1",J="9229",Q;if((Q=Y.match(/^(--inspect(-brk)?)$/))!==null)$=Q[1];else if((Q=Y.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null)if($=Q[1],/^\d+$/.test(Q[3]))J=Q[3];else z=Q[3];else if((Q=Y.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null)$=Q[1],z=Q[3],J=Q[4];if($&&J!=="0")return`${$}=${z}:${parseInt(J)+1}`;return Y})}ZU.Command=W8});var d8=I((V,m8)=>{var{Argument:_U}=t(),{Command:c8}=g8(),{CommanderError:qU,InvalidArgumentError:l8}=m(),{Help:TU}=G8(),{Option:MU}=_8();V=m8.exports=new c8;V.program=V;V.Command=c8;V.Option=MU;V.Argument=_U;V.Help=TU;V.CommanderError=qU;V.InvalidArgumentError=l8;V.InvalidOptionArgumentError=l8});var o8=I((R1,r8)=>{var U8=/^[a-z0-9-]{1,32}$/,Y8=/^[a-z0-9-]{1,32}$/,$8=/^[a-zA-Z0-9/+.-]+$/,n8=/^([a-zA-Z0-9/+.-]+|)$/,WU=/^((-)?[1-9]\d*|0)$/,K8=/^v=(\d+)$/;function BU(U){return p(U).map((Y)=>[Y,U[Y]].join("=")).join(",")}function LU(U){let Y={};return U.split(",").forEach(($)=>{let z=$.split("=");if(z.length<2)throw new TypeError("params must be in the format name=value");Y[z.shift()]=z.join("=")}),Y}function p(U){return Object.keys(U)}function s8(U){if(typeof Object.values==="function")return Object.values(U);return p(U).map((Y)=>U[Y])}function KU(U){let Y=[""];if(typeof U!=="object"||U===null)throw new TypeError("opts must be an object");if(typeof U.id!=="string")throw new TypeError("id must be a string");if(!U8.test(U.id))throw new TypeError(`id must satisfy ${U8}`);if(Y.push(U.id),typeof U.version!=="undefined"){if(typeof U.version!=="number"||U.version<0||!Number.isInteger(U.version))throw new TypeError("version must be a positive integer number");Y.push(`v=${U.version}`)}if(typeof U.params!=="undefined"){if(typeof U.params!=="object"||U.params===null)throw new TypeError("params must be an object");let z=p(U.params);if(!z.every((Z)=>Y8.test(Z)))throw new TypeError(`params names must satisfy ${Y8}`);z.forEach((Z)=>{if(typeof U.params[Z]==="number")U.params[Z]=U.params[Z].toString();else if(Buffer.isBuffer(U.params[Z]))U.params[Z]=U.params[Z].toString("base64").split("=")[0]});let J=s8(U.params);if(!J.every((Z)=>typeof Z==="string"))throw new TypeError("params values must be strings");if(!J.every((Z)=>$8.test(Z)))throw new TypeError(`params values must satisfy ${$8}`);let Q=BU(U.params);Y.push(Q)}if(typeof U.salt!=="undefined"){if(!Buffer.isBuffer(U.salt))throw new TypeError("salt must be a Buffer");if(Y.push(U.salt.toString("base64").split("=")[0]),typeof U.hash!=="undefined"){if(!Buffer.isBuffer(U.hash))throw new TypeError("hash must be a Buffer");Y.push(U.hash.toString("base64").split("=")[0])}}return Y.join("$")}function PU(U){if(typeof U!=="string"||U==="")throw new TypeError("pchstr must be a non-empty string");if(U[0]!=="$")throw new TypeError("pchstr must contain a $ as first char");let Y=U.split("$");Y.shift();let $=5;if(!K8.test(Y[1]))$--;if(Y.length>$)throw new TypeError(`pchstr contains too many fileds: ${Y.length}/${$}`);let z=Y.shift();if(!U8.test(z))throw new TypeError(`id must satisfy ${U8}`);let J;if(K8.test(Y[0]))J=parseInt(Y.shift().match(K8)[1],10);let Q,Z;if(n8.test(Y[Y.length-1]))if(Y.length>1&&n8.test(Y[Y.length-2]))Q=Buffer.from(Y.pop(),"base64"),Z=Buffer.from(Y.pop(),"base64");else Z=Buffer.from(Y.pop(),"base64");let X;if(Y.length>0){let _=Y.pop();if(X=LU(_),!p(X).every((M)=>Y8.test(M)))throw new TypeError(`params names must satisfy ${Y8}`);if(!s8(X).every((M)=>$8.test(M)))throw new TypeError(`params values must satisfy ${$8}`);p(X).forEach((M)=>{X[M]=WU.test(X[M])?parseInt(X[M],10):X[M]})}if(Y.length>0)throw new TypeError(`pchstr contains unrecognized fileds: ${Y}`);let G={id:z};if(J)G.version=J;if(X)G.params=X;if(Z)G.salt=Z;if(Q)G.hash=Q;return G}r8.exports={serialize:KU,deserialize:PU}});var M0=I((H1,T0)=>{var U0=K("fs"),y=K("path"),Y0=K("os"),$0=typeof __webpack_require__==="function"?__non_webpack_require__:K,RU=process.config&&process.config.variables||{},HU=!!process.env.PREBUILDS_ONLY,t8=process.versions.modules,P8=VU()?"electron":IU()?"node-webkit":"node",R8=process.env.npm_config_arch||Y0.arch(),H8=process.env.npm_config_platform||Y0.platform(),z0=process.env.LIBC||(DU(H8)?"musl":"glibc"),S8=process.env.ARM_VERSION||(R8==="arm64"?"8":RU.arm_version)||"",J0=(process.versions.uv||"").split(".")[0];T0.exports=A;function A(U){return $0(A.resolve(U))}A.resolve=A.path=function(U){U=y.resolve(U||".");try{var Y=$0(y.join(U,"package.json")).name.toUpperCase().replace(/-/g,"_");if(process.env[Y+"_PREBUILD"])U=process.env[Y+"_PREBUILD"]}catch(G){}if(!HU){var $=a8(y.join(U,"build/Release"),e8);if($)return $;var z=a8(y.join(U,"build/Debug"),e8);if(z)return z}var J=X(U);if(J)return J;var Q=X(y.dirname(process.execPath));if(Q)return Q;var Z=["platform="+H8,"arch="+R8,"runtime="+P8,"abi="+t8,"uv="+J0,S8?"armv="+S8:"","libc="+z0,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"",typeof __webpack_require__==="function"?"webpack=true":""].filter(Boolean).join(" ");throw new Error("No native build was found for "+Z+`
    loaded from: `+U+`
`);function X(G){var _=I8(y.join(G,"prebuilds")).map(Q0),q=_.filter(X0(H8,R8)).sort(Z0)[0];if(!q)return;var T=y.join(G,"prebuilds",q.name),M=I8(T).map(G0),W=M.filter(_0(P8,t8)),L=W.sort(q0(P8))[0];if(L)return y.join(T,L.file)}};function I8(U){try{return U0.readdirSync(U)}catch(Y){return[]}}function a8(U,Y){var $=I8(U).filter(Y);return $[0]&&y.join(U,$[0])}function e8(U){return/\.node$/.test(U)}function Q0(U){var Y=U.split("-");if(Y.length!==2)return;var $=Y[0],z=Y[1].split("+");if(!$)return;if(!z.length)return;if(!z.every(Boolean))return;return{name:U,platform:$,architectures:z}}function X0(U,Y){return function($){if($==null)return!1;if($.platform!==U)return!1;return $.architectures.includes(Y)}}function Z0(U,Y){return U.architectures.length-Y.architectures.length}function G0(U){var Y=U.split("."),$=Y.pop(),z={file:U,specificity:0};if($!=="node")return;for(var J=0;J<Y.length;J++){var Q=Y[J];if(Q==="node"||Q==="electron"||Q==="node-webkit")z.runtime=Q;else if(Q==="napi")z.napi=!0;else if(Q.slice(0,3)==="abi")z.abi=Q.slice(3);else if(Q.slice(0,2)==="uv")z.uv=Q.slice(2);else if(Q.slice(0,4)==="armv")z.armv=Q.slice(4);else if(Q==="glibc"||Q==="musl")z.libc=Q;else continue;z.specificity++}return z}function _0(U,Y){return function($){if($==null)return!1;if($.runtime&&$.runtime!==U&&!SU($))return!1;if($.abi&&$.abi!==Y&&!$.napi)return!1;if($.uv&&$.uv!==J0)return!1;if($.armv&&$.armv!==S8)return!1;if($.libc&&$.libc!==z0)return!1;return!0}}function SU(U){return U.runtime==="node"&&U.napi}function q0(U){return function(Y,$){if(Y.runtime!==$.runtime)return Y.runtime===U?-1:1;else if(Y.abi!==$.abi)return Y.abi?-1:1;else if(Y.specificity!==$.specificity)return Y.specificity>$.specificity?-1:1;else return 0}}function IU(){return!!(process.versions&&process.versions.nw)}function VU(){if(process.versions&&process.versions.electron)return!0;if(process.env.ELECTRON_RUN_AS_NODE)return!0;return typeof window!=="undefined"&&window.process&&window.process.type==="renderer"}function DU(U){return U==="linux"&&U0.existsSync("/etc/alpine-release")}A.parseTags=G0;A.matchTags=_0;A.compareTags=q0;A.parseTuple=Q0;A.matchTuple=X0;A.compareTuples=Z0});var W0=I((I1,D8)=>{var V8=typeof __webpack_require__==="function"?__non_webpack_require__:K;if(typeof V8.addon==="function")D8.exports=V8.addon.bind(V8);else D8.exports=M0()});var P0=I((xU,x)=>{var __dirname="/Users/maxim/Projects/Private/Sites/cryptit/node_modules/argon2",D1=K("node:assert"),{randomBytes:NU,timingSafeEqual:FU}=K("node:crypto"),{promisify:EU}=K("node:util"),{deserialize:B0,serialize:AU}=o8(),jU=W0(),{hash:L0}=jU(__dirname),wU=EU(NU);xU.argon2d=0;xU.argon2i=1;xU.argon2id=2;var i=Object.freeze({argon2d:0,argon2i:1,argon2id:2}),yU=Object.freeze({[i.argon2d]:"argon2d",[i.argon2i]:"argon2i",[i.argon2id]:"argon2id"}),K0={hashLength:32,timeCost:3,memoryCost:65536,parallelism:4,type:2,version:19};async function kU(U,Y){let{raw:$,salt:z,...J}={...K0,...Y};if(J.hashLength>4294967295)throw new RangeError("Hash length is too large");if(J.memoryCost>4294967295)throw new RangeError("Memory cost is too large");if(J.timeCost>4294967295)throw new RangeError("Time cost is too large");if(J.parallelism>16777215)throw new RangeError("Parallelism is too large");z=z??await wU(16);let{hashLength:Q,secret:Z=Buffer.alloc(0),type:X,version:G,memoryCost:_,timeCost:q,parallelism:T,associatedData:M=Buffer.alloc(0)}=J,W=await L0({password:Buffer.from(U),salt:z,secret:Z,data:M,hashLength:Q,m:_,t:q,p:T,version:G,type:X});if($)return W;return AU({id:yU[X],version:G,params:{m:_,t:q,p:T,...M.byteLength>0?{data:M}:{}},salt:z,hash:W})}xU.hash=kU;function CU(U,Y={}){let{memoryCost:$,timeCost:z,parallelism:J,version:Q}={...K0,...Y},{version:Z,params:{m:X,t:G,p:_}}=B0(U);return+Z!==+Q||+X!==+$||+G!==+z||+_!==+J}xU.needsRehash=CU;async function OU(U,Y,$={}){let{id:z,...J}=B0(U);if(!(z in i))return!1;let{version:Q=16,params:{m:Z,t:X,p:G,data:_=""},salt:q,hash:T}=J,{secret:M=Buffer.alloc(0)}=$;return FU(await L0({password:Buffer.from(Y),salt:q,secret:M,data:Buffer.from(_,"base64"),hashLength:T.byteLength,m:+Z,t:+X,p:+G,version:+Q,type:i[z]}),T)}xU.verify=OU});var p8=j8(d8(),1),{program:z1,createCommand:J1,createArgument:Q1,createOption:X1,CommanderError:Z1,InvalidArgumentError:G1,InvalidOptionArgumentError:_1,Command:i8,Argument:q1,Option:v,Help:T1}=p8.default;import{existsSync as c}from"node:fs";import{createReadStream as N0,createWriteStream as F0}from"node:fs";import{stdin as H,stdout as l,stderr as R,exit as F}from"node:process";import{Readable as dU,Writable as pU}from"node:stream";import{open as iU}from"node:fs/promises";class w extends Error{constructor(U){super(U);Object.setPrototypeOf(this,new.target.prototype),this.name=new.target.name,this.stack=void 0}}class k extends w{}class d extends w{}class B8 extends w{}class a extends w{}class b extends w{}class C extends w{}class e extends w{}class D extends w{}class P{static byId=new Map;static register(U){if(this.byId.has(U.id))throw new a(`Version ${U.id} already registered`);this.byId.set(U.id,U)}static get(U){let Y=this.byId.get(U);if(!Y)throw new a(`Unknown version: ${U}`);return Y}static get current(){return this.get(0)}}class L8{p;key;constructor(U){this.p=U}setKey(U){this.key=U}async encryptChunk(U){let Y=this.p.getRandomValues(new Uint8Array(12)),$=new Uint8Array(await this.p.subtle.encrypt({name:"AES-GCM",iv:Y},this.key,U)),z=new Uint8Array(Y.length+$.length);return z.set(Y),z.set($,Y.length),z}async decryptChunk(U){let Y=U.slice(0,12),$=U.slice(12),z=await this.p.subtle.decrypt({name:"AES-GCM",iv:Y},this.key,$);try{let J=await this.p.subtle.decrypt({name:"AES-GCM",iv:Y},this.key,$);return new Uint8Array(J)}catch{throw new D("Decryption failed: wrong passphrase or corrupted ciphertext")}}}import*as z8 from"argon2-browser";async function R0(U,Y,$,z){if(z==="node"){let J=await Promise.resolve().then(() => j8(P0(),1)),Q=typeof U==="string"?Buffer.from(U,"utf8"):Buffer.from(U),Z=Buffer.from(Y),X=await J.hash(Q,{salt:Z,timeCost:$.time,memoryCost:$.mem,parallelism:$.parallelism,hashLength:32,raw:!0,type:J.argon2id});return{hash:new Uint8Array(X)}}if(z==="browser"){if(!("loadArgon2WasmBinary"in globalThis))globalThis.loadArgon2WasmBinary=()=>{let J=new URL("argon2.wasm",import.meta.url).href;return fetch(J).then((Q)=>{if(!Q.ok)throw new Error("Failed to load argon2.wasm");return Q.arrayBuffer()}).then((Q)=>new Uint8Array(Q))};return z8.hash({pass:U,salt:Y,time:$.time,mem:$.mem,parallelism:$.parallelism,hashLen:32,type:z8.ArgonType.Argon2id}).then((J)=>{if(!J||!J.hash)throw new Error("Failed to produce key derivation");return{hash:J.hash}}).catch((J)=>{let Q=J instanceof Error?J.message:typeof J==="string"?J:"Unknown error";throw new C(`argon2-browser failure: ${Q}`)})}throw new Error(`Unsupported environment: ${z}`)}class N8{presets;name="argon2id";constructor(U){this.presets=U}async derive(U,Y,$,z){let{hash:J}=await R0(U,Y,this.presets[$],z.isNode?"node":"browser");return z.subtle.importKey("raw",J,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}}var H0={low:{time:5,mem:65536,parallelism:1},middle:{time:20,mem:65536,parallelism:1},high:{time:40,mem:65536,parallelism:1}},cU={id:0,cipher:L8,kdf:new N8(H0),saltLengths:{low:12,high:16},difficulties:H0,defaultChunkSize:524288};P.register(cU);var J8=1;function S0(){return typeof process!=="undefined"&&typeof process.versions==="object"&&!0}function n(...U){let Y=U.reduce((J,Q)=>J+Q.byteLength,0),$=new Uint8Array(Y),z=0;for(let J of U)$.set(J,z),z+=J.byteLength;return $}function s(...U){try{let Y=n(...U);if(S0())return Buffer.from(Y).toString("base64");let $="";for(let z=0;z<Y.length;z++)$+=String.fromCharCode(Y[z]);return btoa($)}catch(Y){throw new B8("Base64 Enconding Error")}}function F8(U){try{if(!/^[A-Za-z0-9+/]+={0,2}$/.test(U)||U.length%4!==0)throw new Error("invalid base64");if(S0())return new Uint8Array(Buffer.from(U,"base64"));let Y=atob(U),$=new Uint8Array(Y.length);for(let z=0;z<Y.length;z++)$[z]=Y.charCodeAt(z);return $}catch(Y){throw new d("Base64 Decoding Error")}}function Q8(U,Y,$,z){let J={low:0,middle:1,high:2}[Y]??0,Q=U<<5|($==="high"?1:0)<<2|J;return n(new Uint8Array([J8,Q]),z)}function f(U){if(U[0]!==J8)throw new k("Invalid input format. The input is unknown.");try{let Y=U[1],$=Y>>5,z=Y>>2&1?"high":"low",J=Y&3,Q=["low","middle","high"][J],Z=P.get($).saltLengths[z],X=U.slice(2,2+Z);return{version:$,difficulty:Q,saltStrength:z,salt:X,headerLen:2+Z}}catch(Y){throw new b(Y instanceof Error?Y.message:String(Y))}}class r{engine;chunkSize;buffer=new Uint8Array(0);constructor(U,Y=524288){this.engine=U;this.chunkSize=Y}toTransformStream(){return new TransformStream({transform:async(U,Y)=>{await this.transform(await this.asUint8Array(U),Y)},flush:async(U)=>this.flush(U)})}async transform(U,Y){let $=new Uint8Array(this.buffer.length+U.length);$.set(this.buffer),$.set(U,this.buffer.length);let z=0;while($.length-z>=this.chunkSize){let J=$.slice(z,z+this.chunkSize);z+=this.chunkSize;let Q=await this.engine.encryptChunk(J),Z=new Uint8Array(4);new DataView(Z.buffer).setUint32(0,Q.length,!1);let X=new Uint8Array(4+Q.length);X.set(Z),X.set(Q,Z.length),Y.enqueue(X)}this.buffer=$.slice(z)}async flush(U){if(!this.buffer.length)return;let Y=await this.engine.encryptChunk(this.buffer),$=new Uint8Array(4);new DataView($.buffer).setUint32(0,Y.length,!1);let z=new Uint8Array(4+Y.length);z.set($),z.set(Y,4),U.enqueue(z),this.buffer=new Uint8Array(0)}async asUint8Array(U){if(U instanceof Uint8Array)return U;if(U instanceof ArrayBuffer)return new Uint8Array(U);return new Uint8Array(await U.arrayBuffer())}}class h{engine;chunkSize;buffer=new Uint8Array(0);constructor(U,Y=524288){this.engine=U;this.chunkSize=Y}toTransformStream(){return new TransformStream({transform:async(U,Y)=>{await this.transform(await this.asUint8Array(U),Y)},flush:async(U)=>this.flush(U)})}async transform(U,Y){let $=new Uint8Array(this.buffer.length+U.length);$.set(this.buffer),$.set(U,this.buffer.length);let z=0;while(!0){if($.length-z<4)break;let J=new DataView($.buffer,$.byteOffset+z,4).getUint32(0,!1);if($.length-z-4<J)break;z+=4;let Q=$.slice(z,z+J);z+=J;try{let Z=await this.engine.decryptChunk(Q);Y.enqueue(Z)}catch(Z){throw Z instanceof D?Z:new D("Decryption failed: Wrong passphrase or corrupted ciphertext")}}this.buffer=$.slice(z)}async flush(U){await this.transform(new Uint8Array(0),U),this.buffer=new Uint8Array(0)}async asUint8Array(U){if(U instanceof Uint8Array)return U;if(U instanceof ArrayBuffer)return new Uint8Array(U);return new Uint8Array(await U.arrayBuffer())}}class u{engine;chunkSize;constructor(U,Y=524288){this.engine=U;this.chunkSize=Y}encryptionStream(){let U=new r(this.engine,this.chunkSize).toTransformStream();return{writable:U.writable,readable:U.readable}}decryptionStream(U){let Y=U,$=new TransformStream({transform(J,Q){if(Y===0){Q.enqueue(J);return}if(J.byteLength<=Y){Y-=J.byteLength;return}Q.enqueue(J.slice(Y)),Y=0}}),z=new h(this.engine,this.chunkSize).toTransformStream();return{writable:$.writable,readable:$.readable.pipeThrough(z)}}async collect(U,Y,$=null){let z=U.pipeThrough(Y).getReader(),J=[];if($?.length)J.push($);while(!0){let{value:G,done:_}=await z.read();if(_)break;J.push(G)}let Q=J.reduce((G,_)=>G+_.byteLength,0),Z=new Uint8Array(Q),X=0;for(let G of J)Z.set(G,X),X+=G.byteLength;return Z}}function I0(U=0,Y=console.info){return{level:U,log($,z){if($<=U)Y(`${$}| ${z}`)}}}var V0=new Map;class O{static getEngine(U,Y){let $=V0.get(Y);if($)return $;let z=P.get(Y),J=new z.cipher(U),Q=z.kdf,Z=z.defaultChunkSize;return $={desc:z,cipher:J,kdf:Q,chunkSize:Z,provider:U},V0.set(Y,$),$}static async deriveKey(U,Y,$,z){try{let J=await U.kdf.derive(Y,$,z,U.provider);U.cipher.key=J}catch(J){let Q=J instanceof Error?J.message:String(J);throw new C(Q)}}}class N{provider;v;cipher;kdf;chunkSize;stream;difficulty;saltStrength;engines=new Map;log;constructor(U,Y={}){this.provider=U;this.v=P.get(Y.version??P.current.id),this.cipher=new this.v.cipher(U),this.kdf=this.v.kdf,this.chunkSize=Y.chunkSize??this.v.defaultChunkSize,this.stream=new u(this.cipher,this.chunkSize),this.difficulty=Y.difficulty??"middle",this.saltStrength=Y.saltStrength??"high",this.log=I0(Y.verbose??0,Y.logger)}static async isEncrypted(U){try{return await N.peekHeader(U),!0}catch{return!1}}static async headerDecode(U){let Y=await N.peekHeader(U),$=f(Y);return{version:$.version,difficulty:$.difficulty,salt:s($.salt),saltLength:$.salt.byteLength}}setDifficulty(U){this.difficulty=U}getDifficulty(){return this.difficulty}setVersion(U){this.v=P.get(U),this.cipher=new this.v.cipher(this.provider),this.kdf=this.v.kdf,this.stream=new u(this.cipher,this.chunkSize)}getVersion(){return this.v.id}setSaltDifficulty(U){this.saltStrength=U}getSaltDifficulty(){return this.saltStrength}setChunkSize(U){this.chunkSize=U,this.stream=new u(this.cipher,this.chunkSize)}getChunkSize(){return this.chunkSize}setVerbose(U){this.log.level=U}getVerbose(){return this.log.level}async encryptText(U,Y){try{this.log.log(1,"Start text encryption"),this.log.log(2,"Deriving key for text encryption");let $=this.genSalt();await this.deriveKey(Y,$),this.log.log(3,`Salt generated: ${s($)}, KDF difficulty: ${this.difficulty}`),this.log.log(2,"Encrypting text data");let z=await this.cipher.encryptChunk(typeof U==="string"?new TextEncoder().encode(U):U);this.log.log(3,"Encoding header");let J=Q8(this.v.id,this.difficulty,this.saltStrength,$);this.log.log(3,"Encoding text");let Q=s(J,z);return this.log.log(1,"Decryption finished"),Q}catch($){throw new e($ instanceof Error?$.message:String($))}}async decryptText(U,Y){try{this.log.log(1,"Start text decryption"),this.log.log(3,"Start text decoding");let $=F8(U);this.log.log(3,"Start header decoding"),await N.peekHeader(U);let z=f($);this.log.log(3,"Trying to get engine");let J=O.getEngine(this.provider,z.version);this.log.log(2,"Deriving key via engine for text decryption"),this.log.log(3,`Salt use: ${s(z.salt)}, KDF difficulty: ${z.difficulty}`),await O.deriveKey(J,Y,z.salt,z.difficulty),this.log.log(2,"Decrypting text data");let Q=await J.cipher.decryptChunk($.slice(z.headerLen));this.log.log(3,"Decoding text");let Z=new TextDecoder().decode(Q);return this.log.log(1,"Decryption finished"),Z}catch($){if($ instanceof D||$ instanceof k||$ instanceof b||$ instanceof d||$ instanceof C)throw $;throw new D("Decryption failed: wrong passphrase or corrupted ciphertext")}}async encryptFile(U,Y){try{this.log.log(2,"Deriving key for file encryption");let $=this.genSalt();await this.deriveKey(Y,$);let z=Q8(this.v.id,this.difficulty,this.saltStrength,$),J=await this.stream.collect(U.stream(),new r(this.cipher,this.chunkSize).toTransformStream(),z);return new Blob([J],{type:"application/octet-stream"})}catch($){throw new e($ instanceof Error?$.message:String($))}}async decryptFile(U,Y){try{let $=await N.peekHeader(U),z=f($),J=O.getEngine(this.provider,z.version);await O.deriveKey(J,Y,z.salt,z.difficulty),this.log.log(2,"Decrypting file data");let Z=await new u(J.cipher,J.chunkSize).collect(U.slice(z.headerLen).stream(),new h(J.cipher,J.chunkSize).toTransformStream());return new Blob([Z],{type:"application/octet-stream"})}catch($){if($ instanceof D)throw $;throw new D($ instanceof Error?$.message:String($))}}async createEncryptionStream(U){this.log.log(2,"Deriving key for stream encryption");let Y=this.genSalt();await this.deriveKey(U,Y);let $=Q8(this.v.id,this.difficulty,this.saltStrength,Y),z=this.stream.encryptionStream();return{header:$,writable:z.writable,readable:z.readable}}async createDecryptionStream(U){let Y=this,$=new Uint8Array(0),z=null;async function J(Q,Z){let X=Q.getReader();while(!0){let{value:G,done:_}=await X.read();if(_)break;Z.enqueue(G)}}return new TransformStream({async transform(Q,Z){if(!z){if($=n($,Q),$.length<2)return;let G=$.slice(0,30),{salt:_,difficulty:q}=f(G),T=$[1]>>5,M=$[1]>>2&1?"high":"low",L=2+P.get(T).saltLengths[M];if($.length<L)return;let E=O.getEngine(Y.provider,T);await O.deriveKey(E,U,_,q),z=new h(E.cipher,E.chunkSize).toTransformStream(),J(z.readable,Z);let o=$.slice(L);if(o.length){let E8=z.writable.getWriter();await E8.write(o),E8.releaseLock()}return}let X=z.writable.getWriter();await X.write(Q),X.releaseLock()},async flush(){if(z){let Q=z.writable.getWriter();await Q.close(),Q.releaseLock()}}})}async deriveKey(U,Y,$=this.difficulty){let z=performance.now();try{let J=await this.kdf.derive(U,Y,$,this.provider);this.cipher.key=J,this.log.log(3,`Key derivation completed in ${(performance.now()-z).toFixed(1)} ms`)}catch(J){throw new C(J instanceof Error?J.message:String(J))}}genSalt(){let U=this.v.saltLengths[this.saltStrength];return this.provider.getRandomValues(new Uint8Array(U))}static async peekHeader(U){if(typeof U==="string")U=F8(U);if(U instanceof Uint8Array){if(U.length<2)throw new k("Input too short");let{headerLen:Y}=f(U.length>=16?U:Uint8Array.from(U));if(U.length<Y)throw new k("Incomplete header");return U.slice(0,Y)}if(U instanceof Blob){let Y=new Uint8Array(await U.slice(0,2).arrayBuffer());if(Y[0]!==1)throw new k("Invalid input format. The input is unknown.");let $=Y[1],z=$>>5,J=$>>2&1?"high":"low",Q=P.get(z).saltLengths[J],Z=new Uint8Array(await U.slice(0,2+Q).arrayBuffer());return f(Z),Z}throw new b("Unsupported input type")}}import{webcrypto as lU,randomFillSync as mU}from"node:crypto";var D0={subtle:lU.subtle,getRandomValues(U){return mU(U),U},isNode:!0};function g(U){return new N(D0,U)}var nU="0.2.4";async function X8(){if(!H.isTTY)throw new Error("STDIN not a TTY; use --pass");R.write("Passphrase: "),H.setRawMode?.(!0),H.resume(),H.setEncoding("utf8");let U="";return new Promise((Y)=>{function $(){H.setRawMode?.(!1),H.pause(),R.write(`
`),H.off("data",z),Y(U)}function z(J){if(J==="\x03")F(130);if(J==="\r"||J===`
`)return $();if(J==="\b"||J===""){U=U.slice(0,-1);return}U+=J}H.on("data",z)})}function E0(U){return dU.toWeb(U)}function A0(U){return pU.toWeb(U)}async function j0(){let U=[];for await(let Y of H)U.push(Y);return Buffer.concat(U).toString("utf8")}var S=new i8;S.name("cryptit").version(nU).description("AES-GCM / Argon2 encryption utility").addOption(new v("-p, --pass <passphrase>","passphrase (prompt if omitted)").hideHelp().argParser((U)=>{if(!U.trim())throw new Error("Passphrase cannot be empty");return U})).addOption(new v("-d, --difficulty <level>","argon2 difficulty").choices(["low","middle","high"]).default("middle","middle")).addOption(new v("-s, --salt-strength <variant>","salt length variant").choices(["low","high"]).default("high","high")).addOption(new v("-c, --chunk-size <bytes>","chunk size in bytes").argParser((U)=>{let Y=Number(U);if(!Number.isInteger(Y)||Y<=0)throw new Error("Chunk size must be a positive integer");return Y}).default(524288,"512*1024")).addOption(new v("-v, --verbose","increase verbosity (use multiple times)").default(0).argParser((U,Y)=>{return Y+1}));process.on("uncaughtException",(U)=>{if(U instanceof Error){let Y=U.constructor.name,$=U.message;R.write(`Error [${Y}]: ${$}
`)}else R.write(`Error [Unknown]: ${String(U)}
`);F(1)});process.on("unhandledRejection",(U)=>{if(U instanceof Error){let Y=U.constructor.name,$=U.message;R.write(`Error [${Y}]: ${$}
`)}else R.write(`Error [Unknown]: ${String(U)}
`);F(1)});async function sU(){let U=[];for await(let Y of H)U.push(Y);return Buffer.concat(U)}S.command("decode [src]").description("Show Cryptit header information; omit arg or use - to read from STDIN").action(async(U)=>{let{verbose:Y}=S.opts(),z=g({verbose:Y,logger:(_)=>R.write(_)}),J=!U||U==="-";async function Q(_){if(_.length<2)throw new Error("Input too short for header");let q=_[1],T=q>>5,M=q>>2&1?"high":"low",W=P.get(T).saltLengths[M],L=_.slice(0,2+W);return N.headerDecode(L)}if(!J&&U){let _=await iU(U,"r"),q=Buffer.alloc(2);await _.read(q,0,2,0);let T=q[1],M=T>>5,W=T>>2&1?"high":"low",L=P.get(M).saltLengths[W],E=Buffer.alloc(2+L);await _.read(E,0,2+L,0),await _.close();let o=await N.headerDecode(new Uint8Array(E));l.write(JSON.stringify(o,null,2)+`
`);return}let Z=J?await sU():Buffer.from(U,"utf8"),X=Z.toString("utf8").trim(),G=/^[A-Za-z0-9\/+]+={0,2}$/.test(X)&&X.length%4===0;try{let _=G?await N.headerDecode(X):await Q(Z);l.write(JSON.stringify(_,null,2)+`
`)}catch(_){let q=_ instanceof Error?_.message:String(_);R.write(`Error: ${q}
`),F(1)}});S.command("encrypt <src>").description("Encrypt file; use - for STDIN, --out - for STDOUT").option("-o, --out <file>","output file (default STDOUT)","-").action(async(U,Y)=>{if(U!=="-"&&!c(U))R.write(`Error: input file not found: ${U}
`),F(1);let $=S.opts(),z=g({difficulty:$.difficulty,saltStrength:$.saltStrength,chunkSize:$.chunkSize,verbose:$.verbose}),J=$.pass??(H.isTTY?await X8():(()=>{R.write(`Use --pass when piping via STDIN
`),F(1)})()),Q=Y.out;if(Q!=="-"&&!c(Q)&&!c(K("path").dirname(Q)))R.write(`Error: output directory does not exist: ${K("path").dirname(Q)}
`),F(1);let Z=U==="-"?H:N0(U),X=Y.out==="-"?l:F0(Y.out),{header:G,writable:_,readable:q}=await z.createEncryptionStream(J),T=E0(Z),M=A0(X),W=M.getWriter();await W.write(G),W.releaseLock(),await Promise.all([T.pipeTo(_),q.pipeTo(M)])});S.command("decrypt <src>").description("Decrypt file; use - for STDIN, --out - for STDOUT").option("-o, --out <file>","output file (default STDOUT)","-").action(async(U,Y)=>{if(U!=="-"&&!c(U))R.write(`Error: input file not found: ${U}
`),F(1);let $=S.opts(),z=g({difficulty:$.difficulty,saltStrength:$.saltStrength,chunkSize:$.chunkSize,verbose:$.verbose}),J=Y.out;if(J!=="-"&&!c(J)&&!c(K("path").dirname(J)))R.write(`Error: output directory does not exist: ${K("path").dirname(J)}
`),F(1);let Q=$.pass??await X8(),Z=U==="-"?H:N0(U),X=Y.out==="-"?l:F0(Y.out),G=E0(Z),_=A0(X),q=await z.createDecryptionStream(Q);await Promise.all([G.pipeTo(q.writable),q.readable.pipeTo(_)])});S.command("encrypt-text [text]").description("Encrypt plaintext; omit arg to read from STDIN").action(async(U)=>{let Y=S.opts(),$=g({difficulty:Y.difficulty,saltStrength:Y.saltStrength,verbose:Y.verbose}),z=Y.pass??(H.isTTY?await X8():(()=>{R.write(`Use --pass when piping via STDIN
`),F(1)})()),J=U??await j0(),Q=await $.encryptText(J,z);l.write(Q+`
`)});S.command("decrypt-text [b64]").description("Decrypt Base64 ciphertext; omit arg to read from STDIN").action(async(U)=>{let Y=S.opts(),$=g({difficulty:Y.difficulty,saltStrength:Y.saltStrength,verbose:Y.verbose}),z=Y.pass??await X8(),J=U??(await j0()).trim();if(!/^[A-Za-z0-9+/]+={0,2}$/.test(J))R.write(`Error: ciphertext does not look like Base64
`),F(1);let Q=await $.decryptText(J,z);l.write(Q+`
`)});S.parse();

//# debugId=BBDE41EDBE906DEC64756E2164756E21
